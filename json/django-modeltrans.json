{
  "info": {
    "author": "Jan Pieter Waagmeester",
    "author_email": "jieter@zostera.nl",
    "bugtrack_url": "",
    "classifiers": [
      "Environment :: Web Environment",
      "Framework :: Django",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Programming Language :: Python :: 3.6",
      "Topic :: Internet :: WWW/HTTP",
      "Topic :: Software Development :: Libraries"
    ],
    "description": "# django-modeltrans\n\n[![Travis CI](https://travis-ci.org/zostera/django-modeltrans.svg?branch=master)](https://travis-ci.org/zostera/django-modeltrans)\n\nTranslates Django model fields in a `JSONField` using a registration approach.\n\n# Features/requirements\n\n- Uses one `django.contrib.postgres.JSONField` (PostgreSQL jsonb field) for every record.\n- Django 1.9, 1.10, 1.11 for now\n- PostgreSQL >= 9.4 and Psycopg2 >= 2.5.4.\n\n# Usage\n\n - Add `'modeltrans'` your list of `INSTALLED_APPS`.\n - Add a list of available languages to your `settings.py`:\n   `AVAILABLE_LANGUAGES = ('en', 'nl', 'de', 'fr')`\n - Add a `translation.py` in each app you want to translate models for.\n - For each model you want to translate, create a `TransltionOptions` object and register the model using that object:\n```python\n# models.py\nfrom django.db import models\n\n\nclass Blog(models.Model):\n    title = models.CharField(max_length=255)\n    body = models.TextField(null=True)\n\n# translation.py\nfrom modeltrans.translator import TranslationOptions, translator\n\nfrom .models import Blog, Category\n\n\nclass BlogTranslationOptions(TranslationOptions):\n    fields = ('title', 'body')\n\ntranslator.register(Blog, BlogTranslationOptions)\n```\n - Run `./manage.py makemigrations` to add the `i18n` JSONField to each model containing\n   translations.\n - Each method now has some extra virtual fields. In the example above:\n   - `title_nl`, `title_de`, ... allow getting/setting the specific languages\n   - `title_i18n` follows the currently active translation in Django, and falls\n     back to the default language:\n\n```python\n>>> b = Blog.objects.create(title='Falcon', title_nl='Valk')\n>>> b.title\n'Falcon'\n>>> b.title_nl\n'Valk'\n>>> b.title_i18n\n'Falcon'\n>>> from django.utils.translation import override\n>>> with override('nl'):\n...   b.title_i18n\n...\n'Valk'\n# translations are stored in the field `i18n` in each model:\n>>> b.i18n\n{u'title_nl': u'Valk'}\n# if a translation is not available, None is returned.\n>>> print(b.title_de)\nNone\n# fallback to the default language\n>>> with override('de'):\n...     b.title_i18n\n'Falcon'\n# now, if we set the German tranlation, it it is returned from title_i18n:\n>>> b.title_de = 'Falk'\n>>> with override('de'):\n...     b.title_i18n\n'Falk'\n```\n\n# Migrating from django-modeltranslation\n\nThis is how to migrate from django-modeltranslation (version 0.12.1) to\ndjango-modeltrans:\n\n1. Make sure you have a recent backup available!\n2. Add `modeltrans` to your `INSTALLED_APPS`\n3. Copy the django-modeltranslation registrations to use django-modeltrans\n   alongside it, while disabling the virtual fields for now:\n```python\n\n# if this whas your configuration:\nfrom modeltranslation.translator import translator, TranslationOptions\nfrom .models import Blog\n\nclass BlogTranslationOptions(TranslationOptions):\n    fields = ('name', 'title', )\n\ntranslator.register(Blog, BlogTranslationOptions)\n\n# this is what you add:\ndef i18n_migrate():\n    from modeltrans import translator, TranslationOptions\n\n    translator.set_create_virtual_fields(False)\n\n\n    class BlogTranslationOptions(TranslationOptions):\n        fields = ('name', 'title', )\n\n    translator.register(Blog, BlogTranslationOptions)\n\n\n# and make sure it gets executed\ni18n_migrate()\n```\n3. Run `./manage.py makemigrations <apps>`. This will create the\n   migration adding the`i18n`-fields required by django-modeltrans. Apply\n   them with `./manage.py migrate`\n4. We need to create a migration to copy the values of the translated\n   fields into the newly created `i18n`-field. django-modeltrans provides\n   a management command to do that:\n     `./manage.py i18n_makemmigrations <apps>`\n5. Now, remove django-modeltranslation by:\n    - Removing the translation registrations for `modeltranslation` from your\n      `translation.py`'s. Also remove the function around the new registrations.\n    - Remove the use of `modeltranslation.admin.TranslationAdmin` in your `admin.py`'s\n\n   Run `./manage.py makemigrations <apps>`. This will remove the translated\n   fields from your registered models. You can now safely remove the line\n   `translator.set_create_virtual_fields(False)` and let django-modeltrans add\n   the virtual fields to your models.\n5. Update your code and cleanup:\n    - Remove `modeltranslation` from `INSTALLED_APPS`.\n    - Use `<field>_i18n` field names for places where you would use `<field>`\n      with django-modeltranslation. Less magic, but\n      [explicit is better than implicit](https://www.python.org/dev/peps/pep-0020/)!\n\n'''\n# Running the tests\n\n`tox`\n\nRunning the tests only for the current environment, use `make test`\n\n\n# Attribution\nSome concepts and code from https://github.com/deschler/django-modeltranslation,\nwhich is in turn inspired by https://github.com/zmathew/django-linguo\n\nWe started this solution at Zostera because we did not like:\n- The way django-modeltranslation adds one field per language (and thus requires a migration\nwhen adding language)\n- The unpredictability of the original field.\n\nSince JSONB is supported by Postgres now, we developed this approach.\n\n# alternatives\n- [django-nence](https://github.com/tatterdemalion/django-nece/)\n  Also uses a `jsonb` PostgreSQL field, but has a bunch of custom `QuerySet` and `Model` methods to get translated values. It also requires one to inherit from a `TranslationModel`.\n- [django-i18nfield](https://github.com/raphaelm/django-i18nfield)\n  Stores JSON in a `TextField`, so does not allow lookup, searching or ordering by the translated fields.\n\n# relevant 3rd party documentation\n- [PostgreSQL jsonb functions](https://www.postgresql.org/docs/9.5/static/functions-json.html)\n",
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/zostera/django-modeltrans/",
    "keywords": null,
    "license": "Simplified BSD",
    "maintainer": null,
    "maintainer_email": null,
    "name": "django-modeltrans",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/django-modeltrans/",
    "release_url": "https://pypi.org/project/django-modeltrans/0.0.4/",
    "requires_python": null,
    "summary": "Model translations in a jsonb field",
    "version": "0.0.4"
  },
  "releases": {
    "0.0.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "fac8102f9504c3f801c181d2198fdf0b",
          "sha256": "d7620db0d61627bf26d94bde9bdfdd90c37820bd70dcab3e268a454b20689209"
        },
        "downloads": 0,
        "filename": "django-modeltrans-0.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "fac8102f9504c3f801c181d2198fdf0b",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 13067,
        "upload_time": "2017-05-08T09:31:43",
        "url": "https://files.pythonhosted.org/packages/b6/61/e4c2ad01a96884ba39e581ef7596a66c53a4593bc5bfed5a22e30ebc15d6/django-modeltrans-0.0.0.tar.gz"
      }
    ],
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "20283332ef80ab087513ac86498e4a7d",
          "sha256": "416e7d5b314f1c5434b83ee26785a0a3139c6eb5ca9071e6ab720683903b6ea8"
        },
        "downloads": 0,
        "filename": "django-modeltrans-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "20283332ef80ab087513ac86498e4a7d",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15482,
        "upload_time": "2017-05-12T09:52:33",
        "url": "https://files.pythonhosted.org/packages/66/92/6ef690500c1b9a6397e0fba3172712f76464d7c8ed1cb5bfa1da59dcc77b/django-modeltrans-0.0.1.tar.gz"
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "b9e17c6ca5807a042420a31ce29caa51",
          "sha256": "b4455b14b8d159943ad1fad7b05660e2417bb7c8e29a49ec657410ebcb88bc87"
        },
        "downloads": 0,
        "filename": "django-modeltrans-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "b9e17c6ca5807a042420a31ce29caa51",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15679,
        "upload_time": "2017-05-12T12:11:49",
        "url": "https://files.pythonhosted.org/packages/a8/27/4e937135c2002abb89863fc2134696d0e271accc6c081c5be02e05673d68/django-modeltrans-0.0.2.tar.gz"
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "cb25e86af9931b003dbd1fa067884c47",
          "sha256": "3a330e0ed83845dcfa411230dc560f996948a69c7ea513291033a560bb54cde9"
        },
        "downloads": 0,
        "filename": "django-modeltrans-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "cb25e86af9931b003dbd1fa067884c47",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 17335,
        "upload_time": "2017-05-18T09:28:31",
        "url": "https://files.pythonhosted.org/packages/6e/b2/11d62d2571480c6fb17f1e6c15eb457202484b526d7277c23d28129574a1/django-modeltrans-0.0.3.tar.gz"
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "34b23a0d9b43b55493bbc9c77af1f78a",
          "sha256": "7d841d85f8f73a58f02f7d3b7aaf094044ce945696575760312381c522fea0e1"
        },
        "downloads": 0,
        "filename": "django-modeltrans-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "34b23a0d9b43b55493bbc9c77af1f78a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 17508,
        "upload_time": "2017-05-18T13:58:51",
        "url": "https://files.pythonhosted.org/packages/24/be/4622bf4c3bb24bcd128e12bdbf6ffeb200086b18acec07cc2d1173b4554e/django-modeltrans-0.0.4.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "34b23a0d9b43b55493bbc9c77af1f78a",
        "sha256": "7d841d85f8f73a58f02f7d3b7aaf094044ce945696575760312381c522fea0e1"
      },
      "downloads": 0,
      "filename": "django-modeltrans-0.0.4.tar.gz",
      "has_sig": false,
      "md5_digest": "34b23a0d9b43b55493bbc9c77af1f78a",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 17508,
      "upload_time": "2017-05-18T13:58:51",
      "url": "https://files.pythonhosted.org/packages/24/be/4622bf4c3bb24bcd128e12bdbf6ffeb200086b18acec07cc2d1173b4554e/django-modeltrans-0.0.4.tar.gz"
    }
  ]
}