{
  "info": {
    "author": "Rafael Gonzalez",
    "author_email": "astrorafael@yahoo.es",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: No Input/Output (Daemon)",
      "Intended Audience :: Developers",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: MIT License",
      "Operating System :: Microsoft :: Windows :: Windows XP",
      "Operating System :: POSIX :: Linux",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: SQL",
      "Topic :: Scientific/Engineering :: Astronomy",
      "Topic :: Scientific/Engineering :: Atmospheric Science"
    ],
    "description": "tessdb (overview)\n=================\n\nLinux service to collect measurements pubished by TESS Sky Quality Meter\nvia MQTT. TESS stands for `Cristobal Garcia's Telescope Encoder and Sky\nSensor <http://www.observatorioremoto.com/TESS.pdf>`__\n\n**tessdb** is being used as part of the `STARS4ALL\nProject <https://guaix.fis.ucm.es/splpr/TESS-V1>`__.\n\nDescription\n-----------\n\n**tessdb** is a software package that collects measurements from one or\nseveral TESS instruments into a SQLite Database.\n\nIt is a `Python Twisted Application <https://twistedmatrix.com/trac/>`__\nthat uses a `custom Twisted library implementing the MQTT\nprotocol <https://github.com/astrorafael/twisted-mqtt>`__\n\nDesktop applicatons may query the database to generate reports and\ngraphs using the accumulated, historic data.\n\nThe Windows version works as a Windows service, but the Linux version\nhas further functionality like servcie reload and automatic daily\nlogfile and rotation.\n\nThese data sources are available:\n\n-  individual samples (real time, configurable, 1 min. aprox between\n   samples).\n\nInstrument should send their readings at twice the time resolution\nspecified in the config file (in seconds).\n\n**Warning**: Time is UTC, not local time.\n\nINSTALLATION\n============\n\nLinux installation (Debian)\n---------------------------\n\nRequirements\n------------\n\nThe following components are needed and should be installed first:\n\n-  python 2.7.x (tested on Ubuntu Python 2.7.6)\n\nInstallation\n~~~~~~~~~~~~\n\nInstallation via PyPi repository\n\n``sudo pip install tessdb``\n\nor from GitHub:\n\n::\n\n    git clone https://github.com/astrorafael/tessdb.git\n    cd tessdb\n    sudo python setup.py install\n\n-  All executables are copied to ``/usr/local/bin``\n-  The database is located at ``/var/dbase/tess.db`` by default\n-  The log file is located at ``/var/log/tessdb.log``\n-  The following required PIP packages will be automatically installed:\n\n   -  twisted,\n   -  twisted-mqtt\n   -  pyephem\n   -  tabulate\n\nStart up and Verification\n~~~~~~~~~~~~~~~~~~~~~~~~~\n\n-  Type ``sudo tessdb -k`` to start the service in foreground with\n   console output. Verify that it starts without errors or exceptions.\n\n-  Type ``sudo service tessdb start`` to start it as a backgroud\n   service.\n-  Type ``sudo update-rc.d tessdb defaults`` to start it at boot time.\n\nWindows installation\n--------------------\n\n**WARNING**: The Windows version is currently untested due to the lack\nof a real usage need. We recomemnd using the *Linux version*.\n\nRequirements\n------------\n\n(Tested on Windows XP SP1 & python 2.7.10) \\* Have `Python 2.7 for\nWindows <https://www.python.org/downloads/windows/>`__ installed. \\*\nHave `PythonWin\nextensions <http://sourceforge.net/projects/pywin32/files/pywin32/>`__\ninstalled. select the latest build fpr the **Pyhton2.7 version** \\* Have\nthe `Microsoft Visual C++ Compiler for Python\n2.7 <https://www.microsoft.com/en-us/download/details.aspx?id=44266>`__\ninstalled. Thos is necessary to install ``twisted`` later on. Systems\nrequirements state for Windows 7+, but it works fine for Windows XP,\n32bits.\n\nInstallation\n~~~~~~~~~~~~\n\nThe Windows python 2.7 distro comes with the pip utility included.\n\n1. Open a ``CMD.exe`` console, **with Administrator privileges for\n   Windows 7 and higher**\n2. Inside this console type:\n\n``pip install twisted``\n\nTwisted will install (15.5.0 at this moment)\n\nYou can test that this installation went fine by opening a python\ncommand line (IDLE or Python CMD) and type:\n\n::\n\n    ```\n    >>> import twisted\n    >>> print twisted.__version__\n    15.5.0\n    >>> _\n    ```\n\n3. Inside this new created folder type:\n\n``pip install tessdb``\n\n-  The executables (.bat files) are located in the same folder\n   ``C:\\tessdb``\n-  The database is located at ``C:\\tessdb\\dbase`` by default. It is\n   strongly recommeded that you leave it there.\n-  The log file is located at ``C:\\tessdb\\log\\tessdb.log``\n-  The following required PIP packages will be automatically installed:\n\n   -  twisted,\n   -  twisted-mqtt\n   -  pyephem\n   -  tabulate\n\nStart up and Verification\n~~~~~~~~~~~~~~~~~~~~~~~~~\n\nIn the same CMD console, type\\ ``.\\tessdb.bat`` to start it in forground\nand verify that it starts without errors or exceptions.\n\nGo to the Services Utility and start the TESSDB database service.\n\nCONFIGURATION\n=============\n\nThere is a small configuration file for this service:\n\n-  ``/etc/tessdb/config`` (Linux)\n-  ``C:\\tessdb\\config.ini`` (Windows)\n\nThis file is self explanatory. In special, the database file name and\nlocation is specified in this file. Some of the properities marked in\nthis file are marked as *reloadable property*. This means that this\nvalue can be changed and the process reloads its new value on the fly.\n\nLogging\n-------\n\nLog file is usually placed under ``/var/log/tessdb.log`` in Linux or\nunder ``C:\\tessdb\\log`` folder on Windows. Default log level is\n``info``. It generates very litte logging at this level. File is rotated\nby logrotate **only under Linux**. For Windows, it requires support from\nan exteral log rotator software such as\n`LogRotateWin <http://sourceforge.net/projects/logrotatewin/>`__\n\nServer Start/Stop/Restart\n-------------------------\n\nUnder Linux\n~~~~~~~~~~~\n\n-  Service status: ``sudo service emadb status``\n-  Start Service: ``sudo service emadb start``\n-  Stop Service: ``sudo service emadb stop``\n-  Restart Service: ``sudo service emadb restart``. A service restart\n   kills the process and then starts a new one\n\nUnder Windows\n~~~~~~~~~~~~~\n\nThe start/stop/pause operations can be performed with the Windows\nservice GUI tool **If the config.ini file is not located in the usual\nlocatioon, you must supply its path to the tool as extra arguments**\n\nService Pause/Resume\n--------------------\n\nThe server can be put in *pause mode*, in which will be still receiving\nincoming MQTT messages but will be internally enqueued and not written\nto the database. This is useful to perform high risk operations on the\ndatabase without loss of data. Examples:\n\n-  Compact the database using the SQLite VACUUM pragma\n-  Migrating data from tables.\n-  etc.\n\nUnder Linux\n~~~~~~~~~~~\n\nTo pause the server, type: ``sudo service emadb pause`` and watch the\nlog file output wit ``tail -f /var/log/emadb.log``\n\nTo resume normal operation type ``sudo service tessdb resume`` and\nwautch the same log file. Service pause/resume use signals ``SIGUSR1``\nand ``SIGUSR2``.\n\nUnder Windows\n~~~~~~~~~~~~~\n\nServer pause/resume is made through the standard service GUI tool by\nclicking the Pasue and Resume buttons.\n\nService reload\n--------------\n\nDuring a reload the service is not stopped and re-reads the new values\nform the configuration file and apply the changes. In general, all\naspects not related to maintaining the current connection to the MQTT\nbroker or changing the database schema can be reloaded. The full list is\ndescribed inside the configuration file.\n\n-  *Linux:* The ``service emadb reload`` will keep the MQTT connection\n   intact.\n-  *Windows:* There is no GUI button in the service tool for a reload.\n   You must execute an auxiliar script ``C:\\emadb\\winreload.py`` by\n   double-clicking on it.\n\nIn both cases, watch the log file to ensure this is done.\n\nDATA MODEL\n==========\n\nDimensional Modelling\n---------------------\n\nThe data model follows the `dimensional\nmodelling <#dimensional-modelling>`__\n(https://en.wikipedia.org/wiki/Dimensional\\_modeling) approach by Ralph\nKimball. More references can also be found in `Star\nSchemas <https://en.wikipedia.org/wiki/Star_schema>`__.\n\nThe data model\n--------------\n\nThe figure below shows the layout of **tessdb**.\n\n.. figure:: doc/tessdb-full.png\n   :alt: TESS Database Model\n\n   TESS Database Model\n\nDimension Tables\n~~~~~~~~~~~~~~~~\n\nThey are:\n\n-  ``date_t`` : preloaded from 2016 to 2026\n-  ``time_t`` : preloaded, with seconds resolution (configurable)\n-  ``tess_t`` : registered TESS instruments collecting data\n-  ``location_t`` : locations where instruments are deployed\n-  ``tess_units_t`` : an assorted collection of unit labels for reports,\n   preloaded with current units.\n-  ``tess_v`` : View with TESS instrument and current location. It is\n   recommended that reporting applications use this view, instead of the\n   underlying ``tess_t`` and ``location_t`` tables.\n\nDate Dimension\n^^^^^^^^^^^^^^\n\nPretty much standard date table from dimensional modelling. Contains\nmost used attributes plus ``julian_day`` specific to Astronomy domain.\n\nTime of the day Dimension\n^^^^^^^^^^^^^^^^^^^^^^^^^\n\nPretty much standard time of the day table from dimensional modelling.\nContains well known attributes.\n\nInstrument Dimension\n^^^^^^^^^^^^^^^^^^^^\n\nThis dimension holds the current list of TESS instruments.\n\n-  The real key is an artificial key ``tess_id`` linked to the Fact\n   table.\n-  The ``mac_address`` could be the natural key if it weren't for the\n   zero point and filter history tracking.\n-  The ``name`` attribute could be an alternative key for the same\n   reason. TESS instruments send readings using this name in the MQTT\n   payload.\n-  A TESS instrument name can be changed as long as there is no other\n   instrument with the same name.\n-  The ``location_id`` is a reference to the current location assigned\n   to the instrument.\n-  Location id -1 denotes the \"Unknown\" location.\n-  The ``zero_point`` holds the current value of the instrument\n   calibration constant.\n-  The ``filter`` holds the current TESS filter (i.e. 'DG' or Dichroic\n   Glass). A history of zero point & filter changes are maintained in\n   the ``tess_t`` table if the instrument is recalibrated or its filter\n   is changed.\n-  Columns ``valid_since`` and ``valid_until`` hold the timestamps where\n   the changes to zero point and/or filter are valid.\n-  Column ``valid_state`` is an indicator. Its values are either\n   **``Current``** or **``Expired``**.\n-  The current valid TESS instrument has its ``valid_state`` set to\n   ``Current`` and the expiration date in a far away future (Y2999).\n\nUnit dimension\n^^^^^^^^^^^^^^\n\nThe ``tess_units_t`` table is what Dr. Kimball denotes as a *junk\ndimension*. It collects various labels denoting the current measurement\nunits of samples in the fact table.\n\n-  Columns ``valid_since``, ``valid_until`` and ``valid_state`` keep\n   track of any units change in a similar technique as above should the\n   units change.\n\nFact Tables\n~~~~~~~~~~~\n\nThey are:\n\n-  ``tess_readings_t`` : Accumulating snapshot fact table containing\n   measurements from several TESS instruments.\n\nTESS devices with accelerometer will send ``azimuth`` and ``altitude``\nvalues, otherwise they are ``NULL``.\n\nTESS devices with a GPS will send ``longitude``, ``latitude`` and\n``height`` values, otherwise they are ``NULL``.\n\nMQTT PAYLOAD INFORMATION\n========================\n\nPayloads are transmitted in JSON format, with the format described\nbelow.\n\nPublished on topic 'STARS4ALL/{channel}/reading'\n------------------------------------------------\n\n+--------------+----------+---------+------------+-----------------------------------+\n| Field name   | Type     | Units   | Optional   | Description                       |\n+==============+==========+=========+============+===================================+\n| seq          | int      | -       | mand       | Sequence number. If possible use  |\n|              |          |         |            | 32 bits. The sequence number will |\n|              |          |         |            | start in 1 at each device reboot. |\n+--------------+----------+---------+------------+-----------------------------------+\n| name         | string   | -       | mand       | Instrument friendly name. Should  |\n|              |          |         |            | be unique as it identifies the    |\n|              |          |         |            | device.                           |\n+--------------+----------+---------+------------+-----------------------------------+\n| freq         | float    | Hz      | mand       | Raw reading as a frequency with 3 |\n|              |          |         |            | decimal digits precision          |\n|              |          |         |            | (millihertz) NNNNN.NNN            |\n+--------------+----------+---------+------------+-----------------------------------+\n| mag          | float    | mag/arc | mandat.    | Visual magnitude (formulae?)      |\n|              |          | sec^2   |            | corresponding to the raw          |\n|              |          |         |            | reading). Transmitted up to two   |\n|              |          |         |            | decimal places NN.NN              |\n+--------------+----------+---------+------------+-----------------------------------+\n| tamb         | float    | \u00baC      | mandat.    | Ambient Temperature. Transmitted  |\n|              |          |         |            | up to one decimal place.          |\n+--------------+----------+---------+------------+-----------------------------------+\n| tsky         | float    | \u00baC      | mandat.    | Sky Temperature. Transmitted up   |\n|              |          |         |            | to one decimal place.             |\n+--------------+----------+---------+------------+-----------------------------------+\n| az           | int      | deg     | opt        | Photometer optical axis Azimuth   |\n|              |          |         |            | sent only on instruments with     |\n|              |          |         |            | accelerometer.                    |\n+--------------+----------+---------+------------+-----------------------------------+\n| alt          | int      | deg     | opt        | Photometer optical axis Altitude  |\n|              |          |         |            | (angle): sent only on instruments |\n|              |          |         |            | with accelerometer.               |\n+--------------+----------+---------+------------+-----------------------------------+\n| lat          | float    | deg     | opt        | Instrument latitude. Only sent by |\n|              |          |         |            | instruments with GPS integration. |\n+--------------+----------+---------+------------+-----------------------------------+\n| long         | float    | deg     | opt        | Instrument longitude. Only sent   |\n|              |          |         |            | by instruments with GPS           |\n|              |          |         |            | integration.                      |\n+--------------+----------+---------+------------+-----------------------------------+\n| height       | float    | meters  | opt        | Instrument height above the sea   |\n|              |          |         |            | level. Only sent by instruments   |\n|              |          |         |            | with GPS integration.             |\n+--------------+----------+---------+------------+-----------------------------------+\n| rev          | int      | -       | mand       | Payload data format revision      |\n|              |          |         |            | number. Current version is 1.     |\n+--------------+----------+---------+------------+-----------------------------------+\n| tstamp       | string   | UTC     | opt        | Timestamp,\u201cYYYY-MM-DDTHH:MM:SS\u201d   |\n|              |          |         |            | format. Must be UTC.              |\n+--------------+----------+---------+------------+-----------------------------------+\n\nPublished on topic 'STARS4ALL/register'\n---------------------------------------\n\n+--------------+----------+---------+------------+-----------------------------------+\n| Field name   | Type     | Units   | Optional   | Description                       |\n+==============+==========+=========+============+===================================+\n| name         | string   | -       | mand       | Instrument friendly name. Should  |\n|              |          |         |            | be unique as it identifies the    |\n|              |          |         |            | device.                           |\n+--------------+----------+---------+------------+-----------------------------------+\n| mac          | string   | -       | mand.      | Device MAC address, format        |\n|              |          |         |            | \u201cxx:yy:zz:rr:ss:tt\u201d               |\n+--------------+----------+---------+------------+-----------------------------------+\n| calib        | float    | mag/arc | mand       | Per-device Zero Point.            |\n|              |          | sec^2   |            | Transmitted as NN.NN floating     |\n|              |          |         |            | point.                            |\n+--------------+----------+---------+------------+-----------------------------------+\n| rev          | int      | -       | mand       | Payload data format revision      |\n|              |          |         |            | number. Current version is 1.     |\n+--------------+----------+---------+------------+-----------------------------------+\n| chan         | string   | -       | opt        | Channel where this instrument     |\n|              |          |         |            | will publish its readings.        |\n+--------------+----------+---------+------------+-----------------------------------+\n\nOPERATION & MAINTENANCE\n=======================\n\nTESS instruments and locations\n------------------------------\n\nThere is no master file concerning TESS instruments since they register\nthemselves on power-up.\n\nThere is a master file of all locations relevant to the deployment of\nTESS instruments: ``config/locations.json``).\n\nIt is not possible to assign beforehand where a given TESS instruments\nwill be deployed. Besides, a given TESS instruments could be temporally\nmoved from one site to another. So, to maintain the current location\nwhere a given TESS is deployed, there is another file named\n``config/tess_location.json`` where this relationship is established.\n\nInstrument filtering\n--------------------\n\n*For personal use only*. In order to reject readings from other TESS\ninstruments coming to your own personal database, you can specify an\ninstrument name (or a list of instrument names). All readings whose\ninstrument names do not match the one defined in the configuration file\nwill be silently discarded.\n\nSunrise / Sunset filtering\n--------------------------\n\nIt is recommended to activate the sunrise/sunset filter to reject TESS\nreadings coming in daytime and avoid unnecessary grouth in the database.\nEach location has a latitude (degrees), longitude (degrees) and\nelevation (meters) which can be neglected is this filter is not used.\n\nActivating this filter have the following conecuences: 1. Once a day, at\narount 00:00 UTC, all locations will have their sunrise and sunset time\ncomputed, according to the local horizon defined (configurable). 2.\nInstruments assigned to locations found to be in daytime will have their\nreadings rejected. 2. ***Instruments not assigned to a known location\nwill have their readings rejected***. 3. Instruments assigned to\nLocations with ``NULL`` or ``Unknown`` longitude, latitude or elevation\ncolumns will have their readings rejected.\n\nSQLite Database Maintenance\n---------------------------\n\n***Linux only*** The database and log file are rotated daily by a cron\nscript file at 12:00 UTC. This is done to prevent a costly file copy at\nmidnight, precisely when the database is busy writting samples. The\nprogram is first put in pause mode, perform the backup and then resumes\noperation.\n\nThe ``tess`` utility\n--------------------\n\n``tess`` is a command line utility to perform some common operations on\nthe database without having to write SQL statements. As this utility\nmodifies the database, it is necessary to invoke it within using\n``sudo``. Also, you should ensure that the database is not being written\nby ``tessdb`` to avoid *database is locked* exceptions, either by using\nit at daytime or by pausing the ``tessdb`` service.\n\nIt has several subcommands. You can find the all by typing\n``tess --help``\n\n::\n\n    pi@rb-tess:~ $ tess --help\n    usage: /usr/local/bin/tess [-h] {instrument,location,readings} ...\n\n    positional arguments:\n      {instrument,location,readings}\n        instrument          instrument commands\n        location            location commands\n        readings            readings commands\n\n    optional arguments:\n      -h, --help            show this help message and exit\n\nEach subcommand has its own help that you may display by issuing\n``tess <subcommand> --help``\n\nExample:\n\n::\n\n    pi@rb-tess:~ $ tess location list --help\n    usage: /usr/local/bin/tess location list [-h] [-p PAGE_SIZE] [-d DBASE]\n\n    optional arguments:\n      -h, --help            show this help message and exit\n      -p PAGE_SIZE, --page-size PAGE_SIZE\n                            list page size\n      -d DBASE, --dbase DBASE\n                            SQLite database full file path\n\nListing locations\n~~~~~~~~~~~~~~~~~\n\n``tess location list``\n\n::\n\n    +-----------------------------------------+-------------+------------+-------------+\n    | Name                                    |   Longitude |   Latitude |   Elevation |\n    +=========================================+=============+============+=============+\n    | Laboratorio de Cristobal                |    -nn.nnnn |    nn.nnnn |         nnn |\n    +-----------------------------------------+-------------+------------+-------------+\n    | Centro de Recursos Asociativos El Cerro |    -3.5515  |    40.4186 |         650 |\n    +-----------------------------------------+-------------+------------+-------------+\n\nListing TESS instruments\n~~~~~~~~~~~~~~~~~~~~~~~~\n\n``tess instrument list``\n\n::\n\n    +---------+---------+-------------+------------+-------------+\n    | TESS    | Site    | Longitude   | Latitude   | Elevation   |\n    +=========+=========+=============+============+=============+\n    | pruebas | Unknown | Unknown     | Unknown    | Unknown     |\n    +---------+---------+-------------+------------+-------------+\n    | stars1  | Unknown | Unknown     | Unknown    | Unknown     |\n    +---------+---------+-------------+------------+-------------+\n\nAssign a location to an instrument\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nThe most important use of the tess utility is to assign an existing\nlocation to an instrument, since brand new registered instruments are\nassigned to a default *Unknown* location. This must be issued with\n``sudo``, since it requires a DB write.\n\n``sudo tess assign pruebas \"Laboratorio de Cristobal\"``\n\n::\n\n    +---------+--------------------------+-------------+------------+-------------+\n    | TESS    | Site                     |   Longitude |   Latitude |   Elevation |\n    +=========+==========================+=============+============+=============+\n    | pruebas | Laboratorio de Cristobal |    -n.nnnnn |    nn.nnnn |         nnn |\n    +---------+--------------------------+-------------+------------+-------------+\n\n``tess instrument list``\n\n::\n\n    +---------+--------------------------+-------------+------------+-------------+\n    | TESS    | Site                     | Longitude   | Latitude   | Elevation   |\n    +=========+==========================+=============+============+=============+\n    | pruebas | Laboratorio de Cristobal | -nn.nnnnnnn | nn.nnnnnnn | nnn.n       |\n    +---------+--------------------------+-------------+------------+-------------+\n    | stars1  | Unknown                  | Unknown     | Unknown    | Unknown     |\n    +---------+--------------------------+-------------+------------+-------------+\n\nCreate a brand new TESS instrument\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nIf automatic registration fails, this command allows manual creation of\na TESS instrument in the database\n\n``tess instrument create {name} {mac} {calibration constant}``\n\nRenaming a TESS instrument\n~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nIf for some reason, an instrument needs to change the friendly user\nname, this command allows you to do so.\n``tess instrument rename {old name} {new name}``\n\n::\n\n    +---------+-------------------+---------------+----------+-------------+------------+-------------+\n    | TESS    | MAC Addr.         |   Zero Point | Site     |   Longitude |   Latitude |   Elevation |\n    +=========+===================+===============+==========+=============+============+=============+\n    | pruebas | 18:FE:34:9C:AD:ED |          1.61 | Pamplona |    n.nnnnn |    nn.nnnn |         nnn |\n    +---------+-------------------+---------------+----------+-------------+------------+-------------+\n\nUpdating the zero point or the filter\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nIf, for some reason, we need to change the instrumental zero point or\nthe filter (or both), this command allows you to do so. Note that you\nmust especify at least a new zero point or a new filter.\n\nSince the filter and zero point are versioned columns in the database, a\nnew instrument entry is made with updated ``valid_since``,\n``valid_until`` and ``valid_state`` columns. However, If the\n``--latest`` flag is passed, the update command only changes the\n**current** TESS zero point or filter. This is useful to fix errors in\nthe current TESS instrument definition.\n\n``tess instrument update {name} --zero-point {new zp} --filter {new filter} [--latest]``\n\nExample 1:\n``tess instrument update stars3 --zero-point 23.45 --filter BG39``\n\nExample 2:\n``tess instrument update stars3 --zero-point 19.99 --filter DG --latest``\n\n::\n\n    +--------+--------------+----------+---------+---------------------+---------------------+--------------------------+\n    | TESS   |   Zero Point | Filter   | State   | Since               | Until               | Site                     |\n    +========+==============+==========+=========+=====================+=====================+==========================+\n    | stars3 |        19.99 | DG       | Current | 2016-09-08T13:59:12 | 2999-12-31T23:59:59 | Facultad de Fisicas, UCM |\n    +--------+--------------+----------+---------+---------------------+---------------------+--------------------------+\n\nListing TESS readings\n~~~~~~~~~~~~~~~~~~~~~\n\n``test readings list``\n\n::\n\n    +--------------+--------+------------+-------------+-------------+\n    | Timestamp    | TESS   | Location   | Frequency   | Magnitude   |\n    +==============+========+============+=============+=============+\n    +--------------+--------+------------+-------------+-------------+\n\nSample SQL Queries\n==================\n\nThe following are samples queries illustraing how to use the data model.\nThey are actually being used by the STARS4ALL project\n\n1. Get a daily report of readings per instrument:\n\n.. code:: sh\n\n    #!/bin/bash\n    sqlite3 /var/dbase/tess.db <<EOF\n    .mode column\n    .headers on\n    SELECT d.sql_date, i.name, count(*) AS readings\n    FROM tess_readings_t AS r\n    JOIN tess_t AS i USING (tess_id)\n    JOIN date_t AS d USING (date_id)\n    GROUP BY r.date_id, r.tess_id\n    ORDER BY d.sql_date DESC;\n    EOF\n\n2. Extract a CSV (semicolon separated) with all readings for an\n   instrument passed as a command line argument:\n\n.. code:: sh\n\n    #!/bin/bash\n    instrument_name=$1\n    sqlite3 -csv -header /var/dbase/tess.db <<EOF\n    SELECT (d.julian_day + t.day_fraction) AS julian_day, (d.sql_date || 'T' || t.time) AS timestamp, r.sequence_number, l.site, i.name, r.frequency, r.magnitude, i.zero_point, r.sky_temperature, r.ambient_temperature\n    FROM tess_readings_t AS r\n    JOIN tess_t          AS i USING (tess_id)\n    JOIN location_t      AS l USING (location_id)\n    JOIN date_t          AS d USING (date_id)\n    JOIN time_t          AS t USING (time_id)\n    WHERE i.name = \"${instrument_name}\"\n    ORDER BY r.date_id ASC, r.time_id ASC;\n    EOF\n\n3. Show current TESS instruments. Note that we are using the ``tess_v``\n   View,so that the current location info is already included.\n\n.. code:: sh\n\n    #!/bin/bash\n    sqlite3 /var/dbase/tess.db <<EOF\n    .mode column\n    .headers on\n    SELECT v.name AS Name, v.mac_address AS MAC, (v.latitude || ' ' || v.longitude) AS Coordinates , (v.site || ', ' || v.location || ', ' || v.province) AS Location, v.contact_email as User, v.zero_point as ZP, v.filter as Filter\n    FROM tess_v AS v\n    WHERE v.valid_state = \"Current\"\n    ORDER BY v.name ASC;\n    EOF\n\n4. Show TESS instruments changes (zero point and/or filter)\n\n.. code:: sh\n\n    #!/bin/bash\n    sqlite3 /var/dbase/tess.db <<EOF\n    .mode column\n    .headers on;\n    SELECT i.name AS Name, i.zero_point as ZP, i.filter as Filter, i.valid_since AS Since, i.valid_until AS Until, i.valid_state AS 'Change State'\n    FROM tess_t AS i\n    ORDER BY i.name ASC, i.valid_since ASC;\n    EOF",
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "http://github.com/astrorafael/tessdb/",
    "keywords": "Astronomy Python RaspberryPi",
    "license": "MIT",
    "maintainer": null,
    "maintainer_email": null,
    "name": "tessdb",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/tessdb/",
    "release_url": "https://pypi.org/project/tessdb/1.0.4/",
    "requires_python": null,
    "summary": "A package to collect measurements published by TESS instruments into a SQlite database",
    "version": "1.0.4"
  },
  "releases": {
    "0.2.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "9a991f5608786f1a1c6ea90a59b7842b",
          "sha256": "e6b4b02081eb9189057f246e6f5db2ce07c350bc46fcbcbc68b14e0e6a432f34"
        },
        "downloads": 114,
        "filename": "tessdb-0.2.2.tar.gz",
        "has_sig": false,
        "md5_digest": "9a991f5608786f1a1c6ea90a59b7842b",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 47792,
        "upload_time": "2016-02-28T17:44:12",
        "url": "https://files.pythonhosted.org/packages/b8/39/c5510f20a59e18be3cc634ca1f27da6bf7cd3245eb5f3aeaa20596e2d33a/tessdb-0.2.2.tar.gz"
      }
    ],
    "0.3.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "2b4e6fc05efad542733d160b073a4794",
          "sha256": "1372228a3907021d117f554e2394e354c501f70b879134a986b5792e01543295"
        },
        "downloads": 120,
        "filename": "tessdb-0.3.1.tar.gz",
        "has_sig": false,
        "md5_digest": "2b4e6fc05efad542733d160b073a4794",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54955,
        "upload_time": "2016-03-26T20:41:47",
        "url": "https://files.pythonhosted.org/packages/06/11/cc71a28ee798c1e34277de5038db304ad59b764c7e39e0dfcb4801599bb5/tessdb-0.3.1.tar.gz"
      }
    ],
    "0.3.10": [
      {
        "comment_text": "",
        "digests": {
          "md5": "dc1b80742939b51069e6e41baaab6c40",
          "sha256": "09e1779fb506cff6fa8c663027d9fc9ea5aec45ec71f3524524e6b96d2e86834"
        },
        "downloads": 140,
        "filename": "tessdb-0.3.10.tar.gz",
        "has_sig": false,
        "md5_digest": "dc1b80742939b51069e6e41baaab6c40",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 59410,
        "upload_time": "2016-06-04T08:05:23",
        "url": "https://files.pythonhosted.org/packages/29/01/308b513d3bfb1b54b398d86c2fcef4aced9a4dca604d3a68d00225724418/tessdb-0.3.10.tar.gz"
      }
    ],
    "0.3.11": [
      {
        "comment_text": "",
        "digests": {
          "md5": "6ee1e5e5afd7271b72cc52c1d9d6be48",
          "sha256": "72550324caf5d011af22fd564b67676e4bc0b73c258d6ecc743ebac3a36e8af4"
        },
        "downloads": 128,
        "filename": "tessdb-0.3.11.tar.gz",
        "has_sig": false,
        "md5_digest": "6ee1e5e5afd7271b72cc52c1d9d6be48",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 59959,
        "upload_time": "2016-06-09T14:45:28",
        "url": "https://files.pythonhosted.org/packages/5e/98/cebba388dd01790a26b6c53b5b91bb75a9cede595d0ecfc950d4f3406b75/tessdb-0.3.11.tar.gz"
      }
    ],
    "0.3.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "6420e3f1a8974a9d0403c8335a0ec608",
          "sha256": "0b3ddf55fcd8ff9b800c8db44a7eacd6b65ab168a31c26836ea91f0ab4333d80"
        },
        "downloads": 122,
        "filename": "tessdb-0.3.3.tar.gz",
        "has_sig": false,
        "md5_digest": "6420e3f1a8974a9d0403c8335a0ec608",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54820,
        "upload_time": "2016-03-27T09:32:38",
        "url": "https://files.pythonhosted.org/packages/6a/c2/b1c50445824c39f03b41350ab8bc1ec274be79b0ecfc3dd03577c63b6221/tessdb-0.3.3.tar.gz"
      }
    ],
    "0.3.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "05291db5ae7224df4984b8a1ccd3959b",
          "sha256": "b92877396a06eecaf160b4881155c602193301e57964834a995a36939c9bd6f6"
        },
        "downloads": 117,
        "filename": "tessdb-0.3.4.tar.gz",
        "has_sig": false,
        "md5_digest": "05291db5ae7224df4984b8a1ccd3959b",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54863,
        "upload_time": "2016-03-27T11:03:14",
        "url": "https://files.pythonhosted.org/packages/2f/8b/d51be69e7aa71767ac074ac6cdff776cf72bab7148a8e3b5eb6feff21a04/tessdb-0.3.4.tar.gz"
      }
    ],
    "0.3.5": [
      {
        "comment_text": "",
        "digests": {
          "md5": "ea5ed632a4450c16aa3f56ae4cbe2c05",
          "sha256": "12efdeecadfa6edfa2fbc20f1166fc63939bc4552f5af76851a517b428439036"
        },
        "downloads": 128,
        "filename": "tessdb-0.3.5.tar.gz",
        "has_sig": false,
        "md5_digest": "ea5ed632a4450c16aa3f56ae4cbe2c05",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54896,
        "upload_time": "2016-04-05T19:53:25",
        "url": "https://files.pythonhosted.org/packages/af/88/e6a4528fb57079de280a2da96a2643473893b80d07637feb829479033bb0/tessdb-0.3.5.tar.gz"
      }
    ],
    "0.3.6": [
      {
        "comment_text": "",
        "digests": {
          "md5": "56161a7b8eceb833ea2275470f7ed350",
          "sha256": "b249e353c2204b6a9e0f73639df9b19dc0685bb0ee720df2a63a446ce1034b87"
        },
        "downloads": 138,
        "filename": "tessdb-0.3.6.tar.gz",
        "has_sig": false,
        "md5_digest": "56161a7b8eceb833ea2275470f7ed350",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54894,
        "upload_time": "2016-04-05T20:10:46",
        "url": "https://files.pythonhosted.org/packages/3c/29/f8cf6f714b8c4f4702c3472383ebf4132f51c877ce68d03fe87a6cf71c37/tessdb-0.3.6.tar.gz"
      }
    ],
    "0.3.7": [
      {
        "comment_text": "",
        "digests": {
          "md5": "e6d23fbf077b3cc5ca61bd96a88de7dc",
          "sha256": "a3a556fe55d2b1694305d2c8c0f699b6b9f6eeb3461fb60bf6c77259a741afe6"
        },
        "downloads": 120,
        "filename": "tessdb-0.3.7.tar.gz",
        "has_sig": false,
        "md5_digest": "e6d23fbf077b3cc5ca61bd96a88de7dc",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 54913,
        "upload_time": "2016-04-06T14:04:25",
        "url": "https://files.pythonhosted.org/packages/39/8e/5f174123390d5243e7c8e4fb89baf36c049cd9166d69b965732664f04b22/tessdb-0.3.7.tar.gz"
      }
    ],
    "0.3.8": [],
    "0.3.9": [
      {
        "comment_text": "",
        "digests": {
          "md5": "f8923f753c7f031d4fce31ced5142e3a",
          "sha256": "12e2aa386aafd635892e0fd5d09b2ff4e4b154d7a160b496de15767341775f69"
        },
        "downloads": 462,
        "filename": "tessdb-0.3.9.tar.gz",
        "has_sig": false,
        "md5_digest": "f8923f753c7f031d4fce31ced5142e3a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 58613,
        "upload_time": "2016-06-02T13:53:08",
        "url": "https://files.pythonhosted.org/packages/26/b7/3e6ef41c270fd9e956ec8c347516e965b1f33441b366baf329a9a94feb24/tessdb-0.3.9.tar.gz"
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "17aad98033f789bb829b2b935941563c",
          "sha256": "6ca7cdaeaa81bc7fe7226c54a2253b3b65f24d97de8eab39dd54120b79ea96f9"
        },
        "downloads": 168,
        "filename": "tessdb-0.4.0.tar.gz",
        "has_sig": false,
        "md5_digest": "17aad98033f789bb829b2b935941563c",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 63873,
        "upload_time": "2016-06-23T13:57:21",
        "url": "https://files.pythonhosted.org/packages/46/9a/c31f388d5023c0ad4234b088580ccaffeace71462ddca9c9f66d72010d04/tessdb-0.4.0.tar.gz"
      }
    ],
    "0.4.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "febcb3ac03a773fa81930b100d5abdc0",
          "sha256": "8e6ceacefb7a6a33f2add080ebcaa822b6465c120e862b29efc122ea4b3e03d4"
        },
        "downloads": 116,
        "filename": "tessdb-0.4.1.tar.gz",
        "has_sig": false,
        "md5_digest": "febcb3ac03a773fa81930b100d5abdc0",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 67118,
        "upload_time": "2016-07-30T17:29:38",
        "url": "https://files.pythonhosted.org/packages/ee/d4/a45a918ebddc9a4823df3751d408b26b014a664363dc93a4382b96eaa5d8/tessdb-0.4.1.tar.gz"
      }
    ],
    "0.4.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a0fbe4af467761425d4d6ebc1c8654a4",
          "sha256": "fdb3d850d8320203caa0bbd9dc40334daf60de4d8fec830f42a398233cbf431a"
        },
        "downloads": 101,
        "filename": "tessdb-0.4.2.tar.gz",
        "has_sig": false,
        "md5_digest": "a0fbe4af467761425d4d6ebc1c8654a4",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 69087,
        "upload_time": "2016-08-10T11:07:16",
        "url": "https://files.pythonhosted.org/packages/56/8b/587f98c994eb769bdce0ef1dc5c42b1912f1423fc53a0ce3b810ac4143e5/tessdb-0.4.2.tar.gz"
      }
    ],
    "0.4.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "5d32675a1b94912a8d3f62280c1ef910",
          "sha256": "006eb3e7b575d584417340c74ecda72e4044e5bcb286d2f0abdd491e5133ae11"
        },
        "downloads": 112,
        "filename": "tessdb-0.4.3.tar.gz",
        "has_sig": false,
        "md5_digest": "5d32675a1b94912a8d3f62280c1ef910",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 69307,
        "upload_time": "2016-08-12T10:36:14",
        "url": "https://files.pythonhosted.org/packages/7f/70/8b02d16b81c04ba3aaced13a984a23fdcb7417d9735c3be77c56800d7b3b/tessdb-0.4.3.tar.gz"
      }
    ],
    "0.4.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "7d7a610e8af1fffffcf6ed95e05e2fe0",
          "sha256": "942d3ee400025bc1a985f4de92869172ba995385f3a0c6f70d6f022e949b3716"
        },
        "downloads": 247,
        "filename": "tessdb-0.4.4.tar.gz",
        "has_sig": false,
        "md5_digest": "7d7a610e8af1fffffcf6ed95e05e2fe0",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 69803,
        "upload_time": "2016-10-25T16:07:27",
        "url": "https://files.pythonhosted.org/packages/4e/5a/5b0676d794868d8ef9451c9707b3e2ad9669707a30c67bf0480e1f43c83b/tessdb-0.4.4.tar.gz"
      }
    ],
    "0.4.5": [
      {
        "comment_text": "",
        "digests": {
          "md5": "41bc5869272f4913fcd8662871752e97",
          "sha256": "7b1c9fd55df1542a24724e76dbc0238b0e428410ea335a1dfd9ebe67fc160d64"
        },
        "downloads": 49,
        "filename": "tessdb-0.4.5.tar.gz",
        "has_sig": false,
        "md5_digest": "41bc5869272f4913fcd8662871752e97",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 69813,
        "upload_time": "2016-11-10T14:06:23",
        "url": "https://files.pythonhosted.org/packages/74/87/707960262e8bf7b11b7925d5d172810c1144beab449ac156d5bfc79b1f56/tessdb-0.4.5.tar.gz"
      }
    ],
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "845d430b587577143197d8f629a4c6ff",
          "sha256": "bb08482047990479ef0a7106850aafd8ebc1a400cad005a7d0f722e6e792f08b"
        },
        "downloads": 311,
        "filename": "tessdb-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "845d430b587577143197d8f629a4c6ff",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 71930,
        "upload_time": "2016-11-24T15:41:22",
        "url": "https://files.pythonhosted.org/packages/0c/fc/bc9bec66abfa0c9bb65bb33c41b10d659a9f0c3aae0cc9f40474b9f0e12f/tessdb-1.0.0.tar.gz"
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "3032a18c399b96f8987f78829895b60f",
          "sha256": "d3382a3d9182bcd70d97c61ffd8f3a21060a532ce9f2e0f1bfd3703a8f092168"
        },
        "downloads": 289,
        "filename": "tessdb-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "3032a18c399b96f8987f78829895b60f",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 72391,
        "upload_time": "2016-11-26T23:19:36",
        "url": "https://files.pythonhosted.org/packages/22/82/081d54cfa6c18095bb0d16b578daae1b529999785e1bd28d301574aeeb3c/tessdb-1.0.1.tar.gz"
      }
    ],
    "1.0.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "4b142d4322db0a95780c5f4b7bec1f79",
          "sha256": "59a7e4ee1e216d13f252be720257a3f5ae69da300601ca85ea4510bc0c124676"
        },
        "downloads": 150,
        "filename": "tessdb-1.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "4b142d4322db0a95780c5f4b7bec1f79",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 73628,
        "upload_time": "2016-12-29T11:39:55",
        "url": "https://files.pythonhosted.org/packages/10/e5/86db696c1724fb419224f7f02f0b9344468695c7ad01770f15cfd4d43af8/tessdb-1.0.3.tar.gz"
      }
    ],
    "1.0.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "f3dd19c2bf3e9b837e725cae4bf4968a",
          "sha256": "fa03dbed14d50ce7ffdcbd879e56788be005eb175a30b346a032893e3c07c453"
        },
        "downloads": 10,
        "filename": "tessdb-1.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "f3dd19c2bf3e9b837e725cae4bf4968a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 74623,
        "upload_time": "2017-02-17T16:39:41",
        "url": "https://files.pythonhosted.org/packages/9a/e9/6fee6afaeb76867f9857385f62a0271e2a8903f1725c2bcf6acdb0f66fda/tessdb-1.0.4.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "f3dd19c2bf3e9b837e725cae4bf4968a",
        "sha256": "fa03dbed14d50ce7ffdcbd879e56788be005eb175a30b346a032893e3c07c453"
      },
      "downloads": 10,
      "filename": "tessdb-1.0.4.tar.gz",
      "has_sig": false,
      "md5_digest": "f3dd19c2bf3e9b837e725cae4bf4968a",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 74623,
      "upload_time": "2017-02-17T16:39:41",
      "url": "https://files.pythonhosted.org/packages/9a/e9/6fee6afaeb76867f9857385f62a0271e2a8903f1725c2bcf6acdb0f66fda/tessdb-1.0.4.tar.gz"
    }
  ]
}