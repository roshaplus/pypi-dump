{
  "info": {
    "author": "Fr\u00e9d\u00e9ric MOHIER",
    "author_email": "frederic.mohier@alignak.net",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: Console",
      "Intended Audience :: Developers",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
      "Natural Language :: English",
      "Programming Language :: Python",
      "Topic :: System :: Monitoring",
      "Topic :: System :: Systems Administration"
    ],
    "description": "Alignak checks package for Windows WMI\r\n======================================\r\n\r\n*Checks pack for monitoring hosts with Windows Management Instrumentation (WMI)*\r\n\r\n\r\n.. image:: https://badge.fury.io/py/alignak_checks_wmi.svg\r\n    :target: https://badge.fury.io/py/alignak-checks-wmi\r\n    :alt: Most recent PyPi version\r\n\r\n.. image:: https://img.shields.io/badge/IRC-%23alignak-1e72ff.svg?style=flat\r\n    :target: http://webchat.freenode.net/?channels=%23alignak\r\n    :alt: Join the chat #alignak on freenode.net\r\n\r\n.. image:: https://img.shields.io/badge/License-AGPL%20v3-blue.svg\r\n    :target: http://www.gnu.org/licenses/agpl-3.0\r\n    :alt: License AGPL v3\r\n\r\nInstallation\r\n------------\r\n\r\nThe installation of this checks pack will copy some configuration files in the Alignak default configuration directory (eg. */usr/local/etc/alignak*). The copied files are located in the default sub-directory used for the packs (eg. *arbiter/packs*).\r\n\r\nFrom PyPI\r\n~~~~~~~~~\r\nTo install the package from PyPI:\r\n::\r\n\r\n   sudo pip install alignak-checks-wmi\r\n\r\n\r\nFrom source files\r\n~~~~~~~~~~~~~~~~~\r\nTo install the package from the source files:\r\n::\r\n\r\n   git clone https://github.com/Alignak-monitoring-contrib/alignak-checks-wmi\r\n   cd alignak-checks-linux-snmp\r\n   sudo pip install .\r\n\r\n**Note:** *using `sudo python setup.py install` will not correctly manage the package configuration files! The recommended way is really to use `pip`;)*\r\n\r\n\r\n\r\nDocumentation\r\n-------------\r\n\r\nConfiguration\r\n~~~~~~~~~~~~~\r\n\r\n**Note**: this pack embeds the ``wmic`` binary that is not always easy to find for Linux distributions :/\r\n\r\n\r\nThe embedded version of ``wmic`` is only compatible with Linux distros. For Unix (FreeBSD), you can simply install the wmic port:\r\n::\r\n\r\n    pkg install wmi-client\r\n    cd /var/cache/pkg/\r\n    tar Jxvf wmi-client-1.3.16_1.txz\r\n    # winexe and wmic scripts are available in /usr/local/bin/\r\n\r\nThe *check_wmi_plus.pl* script assumes that the executable *wmic* is installed in the Alignak plugins directory.\r\nEdit the *check_wmi_plus.conf* configuration file to change the *wmic* location if necessary. The variable to set is **$wmic_command**.\r\n\r\n**Note:** The files *check_wmi_plus.pl* and *check_wmi_plus.conf*, located in the */usr/local/var/libexec/alignak*, need some configuration. Edit them and search for the ALIGNAK keyword to find out what is to be configured and set according to your server.\r\n\r\nEdit the */usr/local/etc/alignak/arbiter/packs/resource.d/wmi.cfg* file and configure the domain name, user name and password allowed to access remotely to the monitored hosts WMI.\r\n::\r\n\r\n    #-- Active Directory for WMI\r\n    # Replace MYDOMAIN with your domain name or . for local user account\r\n    $DOMAIN$=MYDOMAIN\r\n    # Replace MYUSER with the WMI authorized user (domain or local user account)\r\n    $DOMAINUSERSHORT$=MYUSER\r\n    $DOMAINUSER$=$DOMAIN$\\\\$DOMAINUSERSHORT$\r\n    # Replace MYPASSWORD with the WMI authorized user password\r\n    $DOMAINPASSWORD$=MYPASSWORD\r\n\r\n\r\nInstall PERL dependencies for check_wmi_plus plugin\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nYou must install some PERL dependencies for the *check_wmi_plus.pl* script.\r\n\r\nOn some Linux distros, you can::\r\n\r\n   su -\r\n   apt-get install libnumber-format-perl\r\n   apt-get install libconfig-inifiles-perl\r\n   apt-get install libdatetime-perl\r\n\r\nOr you can use the PERL *cpan* utility::\r\n\r\n    cpan install Config::IniFiles\r\n    cpan install Number::Format\r\n    cpan install DateTime\r\n\r\n\r\nMore information is available on `Check WMI Plus Web site<http://edcint.co.nz/checkwmiplus/?q=Installation>`_.\r\n\r\n\r\nPrepare Windows host\r\n~~~~~~~~~~~~~~~~~~~~\r\nSome operations are necessary on the Windows monitored hosts if WMI remote access is not yet activated.\r\n\r\nCreate a user account:\r\n\r\n- username/password (example): alignak/alignak\r\n- member of following groups: Administrators, Remote DCOM users\r\n- Deactivate interactive login permissions (more secure)\r\n\r\nCheck that WMI and RPC services are started\r\n\r\nThe Windows Firewall must allow inbound trafic for:\r\n- Windows Firewall Remote Management (RPC)\r\n- Windows Management Instrumentation (DCOM-In)\r\n- Windows Management Instrumentation (WMI-In)\r\n\r\nThis page contains more information about remote WMI configuration: https://kb.op5.com/display/HOWTOs/Agentless+Monitoring+of+Windows+using+WMI\r\n\r\nTest remote WMI access with the plugins files:\r\n::\r\n\r\n   # Basic wmic command ...\r\n   $ /usr/local/var/libexec/alignak/wmic -U .\\\\alignak%alignak //192.168.0.20 'Select Caption From Win32_OperatingSystem'\r\n\r\n   # Alignak plugin command ...\r\n   $ /usr/local/var/libexe/alignak/check_wmi_plus.pl -H 192.168.0.20 -u \".\\\\alignak\" -p \"alignak\" -m checkdrivesize -a '.'  -w 90 -c 95 -o 0 -3 1  --inidir=/usr/local/var/libexec/alignak\r\n\r\n\r\n**Note**: these commands assume that you created an *alignak* user account with *alignak* as a password.\r\n\r\nAs a default, WMI opens random TCP ports to communicate with the requesting customer. The Windows WMI service can be configured to use only one port as explained here:\r\nhttps://msdn.microsoft.com/en-us/library/bb219447(v=vs.85).aspx.\r\n\r\nAn abstract of this article::\r\n\r\n    To set up a fixed port for WMI\r\n    1. Stop the WMI service by typing the command: net stop \"Windows Management Instrumentation\", or net stop winmgmt\r\n    2. At the command prompt, type: winmgmt -standalonehost\r\n    3. Restart the WMI service again in a new service host by typing: net start \"Windows Management Instrumentation\" or net start winmgmt\r\n    4. Establish a new port number for the WMI service by typing: netsh firewall add portopening TCP 24158 WMIFixedPort\r\n\r\n    To undo any changes you make to WMI, type: winmgmt /sharedhost, then stop and start the winmgmt service again.\r\n\r\n\r\nAlignak configuration\r\n~~~~~~~~~~~~~~~~~~~~~\r\n\r\nYou simply have to tag the concerned hosts with the template `windows-wmi`.\r\n::\r\n\r\n    define host{\r\n        use                     windows-wmi\r\n        host_name               host_windows_wmi\r\n        address                 127.0.0.1\r\n    }\r\n\r\nThe main `windows-wmi` template declares macros used to configure the launched checks. The default values of these macros listed hereunder can be overriden in each host configuration.\r\n::\r\n\r\n   _DOMAIN                          $DOMAIN$\r\n   _DOMAINUSERSHORT                 $DOMAINUSERSHORT$\r\n   _DOMAINUSER                      $_HOSTDOMAIN$\\\\$_HOSTDOMAINUSERSHORT$\r\n   _DOMAINPASSWORD                  $DOMAINPASSWORD$\r\n\r\n   _WINDOWS_DISK_WARN               90\r\n   _WINDOWS_DISK_CRIT               95\r\n   _WINDOWS_EVENT_LOG_WARN          1\r\n   _WINDOWS_EVENT_LOG_CRIT          2\r\n   _WINDOWS_REBOOT_WARN             15min:\r\n   _WINDOWS_REBOOT_CRIT             5min:\r\n   _WINDOWS_MEM_WARN                80\r\n   _WINDOWS_MEM_CRIT                90\r\n   _WINDOWS_ALL_CPU_WARN            80\r\n   _WINDOWS_ALL_CPU_CRIT            90\r\n   _WINDOWS_CPU_WARN                80\r\n   _WINDOWS_CPU_CRIT                90\r\n   _WINDOWS_LOAD_WARN               10\r\n   _WINDOWS_LOAD_CRIT               20\r\n   _WINDOWS_NET_WARN                80\r\n   _WINDOWS_NET_CRIT                90\r\n   _WINDOWS_EXCLUDED_AUTO_SERVICES\r\n   _WINDOWS_AUTO_SERVICES_WARN      0\r\n   _WINDOWS_AUTO_SERVICES_CRIT      1\r\n   _WINDOWS_BIG_PROCESSES_WARN      25\r\n\r\n   #Default Network Interface\r\n   _WINDOWS_NETWORK_INTERFACE       Ethernet\r\n\r\n   # Now some alert level for a windows host\r\n   _WINDOWS_SHARE_WARN              90\r\n   _WINDOWS_SHARE_CRIT              95\r\n\r\n\r\nTo set a specific value for an host, declare the same macro in the host definition file.\r\n::\r\n\r\n   define host{\r\n      use                     windows-wmi\r\n      contact_groups          admins\r\n      host_name               sim-vm\r\n      address                 192.168.0.16\r\n\r\n      # Specific values for this host\r\n      # Change warning and critical alerts level for memory\r\n      # Same for CPU, ALL_CPU, DISK, LOAD, NET, ...\r\n      _WINDOWS_MEM_WARN       10\r\n      _WINDOWS_MEM_CRIT       20\r\n\r\n      # Exclude some services from automatic start check\r\n      # Use a regexp that matches against the short or long service name as it can be seen in the properties of the service in Windows.\r\n      # The matching services are excluded in the resulting list.\r\n      # Example: (ShortName)|(ShortName)| ... |(ShortName)\r\n      _WINDOWS_EXCLUDED_AUTO_SERVICES (IAStorDataMgrSvc)|(MMCSS)|(ShellHWDetection)|(sppsvc)|(clr_optimization_v4.0.30319_32)\r\n   }\r\n\r\n\r\nBugs, issues and contributing\r\n-----------------------------\r\n\r\nContributions to this project are welcome and encouraged ... `issues in the project repository <https://github.com/alignak-monitoring-contrib/alignak-checks-wmi/issues>`_ are the common way to raise an information.",
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/Alignak-monitoring-contrib/alignak-checks-wmi",
    "keywords": "alignak monitoring pack checks wmi",
    "license": "GNU Affero General Public License, version 3",
    "maintainer": null,
    "maintainer_email": null,
    "name": "alignak_checks_wmi",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/alignak_checks_wmi/",
    "release_url": "https://pypi.org/project/alignak_checks_wmi/0.3.0/",
    "requires_python": null,
    "summary": "Alignak checks pack for Windows Management Instrumentation",
    "version": "0.3.0"
  },
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "05fb9db969a84d6b4faf32829f787e4d",
          "sha256": "34a62112902c450d69d85b34e7c72b292302f4abd67963d1b097cd49ba168842"
        },
        "downloads": 1101,
        "filename": "alignak_checks_wmi-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "05fb9db969a84d6b4faf32829f787e4d",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 164538,
        "upload_time": "2015-11-22T11:49:29",
        "url": "https://files.pythonhosted.org/packages/da/94/f8196c67f40d523fe80b1793951ce11e14abd791135b806c7ce837d34fde/alignak_checks_wmi-0.1.0.tar.gz"
      }
    ],
    "0.2.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "ac28f74407f9c209ecd78f496b628142",
          "sha256": "18a4e071b3e764896f6a0187d9bedf5ca3874410dc34ea62236d3a7d63455dc7"
        },
        "downloads": 198,
        "filename": "alignak_checks_wmi-0.2.1.tar.gz",
        "has_sig": false,
        "md5_digest": "ac28f74407f9c209ecd78f496b628142",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 169073,
        "upload_time": "2016-10-03T08:17:01",
        "url": "https://files.pythonhosted.org/packages/fb/69/76a214dd9847f419aa4b90268bcc11b1c6e648d0279191c5d75ebea92167/alignak_checks_wmi-0.2.1.tar.gz"
      }
    ],
    "0.2.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "f3637d9fc2b92c239780836d568ad696",
          "sha256": "b755b04eb46fb4ce26d597cc7dffa4d0662497278a6504d2b1a229eb5a288542"
        },
        "downloads": 258,
        "filename": "alignak_checks_wmi-0.2.2.tar.gz",
        "has_sig": false,
        "md5_digest": "f3637d9fc2b92c239780836d568ad696",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 3958271,
        "upload_time": "2016-10-03T18:44:36",
        "url": "https://files.pythonhosted.org/packages/a1/82/97398dfe07c4f8edaef99df7e6bf7b2c2a04ffb8bd6e6c0ee876654b9abb/alignak_checks_wmi-0.2.2.tar.gz"
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "7661a28e563b3f2448a977c25705940f",
          "sha256": "39b604fced03e991b0f204d7b9d1407012ac9571b8b5cc29b28c66a9322aae32"
        },
        "downloads": 278,
        "filename": "alignak_checks_wmi-0.3.0.tar.gz",
        "has_sig": false,
        "md5_digest": "7661a28e563b3f2448a977c25705940f",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 3958206,
        "upload_time": "2017-01-05T06:25:21",
        "url": "https://files.pythonhosted.org/packages/66/82/868d69952c6e0a2c2bba0fc7840cd5272155572a55341c1bdc48b64a979e/alignak_checks_wmi-0.3.0.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "7661a28e563b3f2448a977c25705940f",
        "sha256": "39b604fced03e991b0f204d7b9d1407012ac9571b8b5cc29b28c66a9322aae32"
      },
      "downloads": 278,
      "filename": "alignak_checks_wmi-0.3.0.tar.gz",
      "has_sig": false,
      "md5_digest": "7661a28e563b3f2448a977c25705940f",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 3958206,
      "upload_time": "2017-01-05T06:25:21",
      "url": "https://files.pythonhosted.org/packages/66/82/868d69952c6e0a2c2bba0fc7840cd5272155572a55341c1bdc48b64a979e/alignak_checks_wmi-0.3.0.tar.gz"
    }
  ]
}