{
  "info": {
    "author": "Mattias Linnap",
    "author_email": "mattias@linnap.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Environment :: Web Environment",
      "Framework :: Django",
      "Framework :: Django :: 1.11",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Topic :: Database",
      "Topic :: Internet :: WWW/HTTP"
    ],
    "description": "# django-partial-index\n\nPartial (sometimes also called filtered or conditional) index support for Django.\n\nWith partial indexes, only some subset of the rows in the table have corresponding index entries.\nThis can be useful for optimizing index size and query speed, and to add unique constraints for only selected rows.\n\nhttps://www.postgresql.org/docs/current/static/indexes-partial.html\n\nhttps://sqlite.org/partialindex.html\n\n\n## Install\n\n`pip install django-partial-index`\n\nRequirements:\n\n* Django 1.11 or later.\n* PostgreSQL or SQLite database backend. (Partial indexes are not supported on MySQL, and require major hackery on Oracle.)\n\n\n## Usage\n\nWith `unique=True`, this can be used to create unique constraints for a subset of the rows.\nFor example, to enforce that each user can only have one non-deleted room booking at a time:\n\n```python\nfrom partial_index import PartialIndex\n\nclass RoomBooking(models.Model):\n    user = models.ForeignKey(User)\n    room = models.ForeignKey(Room)\n    deleted_at = models.DateTimeField(null=True, blank=True)\n\n    class Meta:\n        # unique_together = [('user', 'room')] - Does not allow multiple deleted rows. Instead use:\n        indexes = [\n            PartialIndex(fields=['user', 'room'], unique=True, where='deleted_at IS NULL')\n        ]\n```\n\nWith `unique=False`, partial indexes can be used to optimise lookups that return only a small subset of the rows.\nFor example, on a job queue table with millions of completed, and very few pending jobs, it can be used to\nspeed up a \"find next pending job\" query:\n\n```python\nfrom partial_index import PartialIndex\n\nclass Job(models.Model):\n    created_at = models.DateTimeField(auto_now_add=True)\n    is_complete = models.BooleanField(default=False)\n\n    class Meta:\n        indexes = [\n            PartialIndex(fields=['created_at'], unique=False, where='is_complete = false')\n        ]\n```\n\nOf course, these (unique) indexes could be created by a handwritten [RunSQL migration](https://docs.djangoproject.com/en/1.11/ref/migration-operations/#runsql).\nBut the constraints are part of the business logic, and best kept close to the model definitions.\n\n\n## TODOs\n\n* Test on Python versions older than 3.6.\n* More thorough tests.\n* Replace `where='some sql expression'` with [Django's query expressions](https://docs.djangoproject.com/en/1.11/ref/models/expressions/) that are checked for valid syntax and field names.\n* Eventually make this package obsolete by getting it merged into Django's contrib.postgres module.\n",
    "docs_url": null,
    "download_url": "https://github.com/mattiaslinnap/django-partial-index/archive/0.1.0.tar.gz",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/mattiaslinnap/django-partial-index",
    "keywords": "",
    "license": "BSD",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-partial-index",
    "platform": "",
    "project_url": "https://pypi.org/project/django-partial-index/",
    "release_url": "https://pypi.org/project/django-partial-index/0.1.1/",
    "requires_dist": [],
    "requires_python": "",
    "summary": "PostgreSQL partial indexes for Django",
    "version": "0.1.1"
  },
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "e4f3f10a3f39ff9af8904958488f7e14",
          "sha256": "075737daed4096b4e4748a7e0638c881424ebc0a237a680fe9825a33dc5a1592"
        },
        "downloads": 0,
        "filename": "django_partial_index-0.1.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e4f3f10a3f39ff9af8904958488f7e14",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 5658,
        "upload_time": "2017-08-05T22:10:52",
        "url": "https://files.pythonhosted.org/packages/1d/4b/2c18368dc4b593ac7dc1ce18a04ea22bc2756ca22cf066658151d8ea399e/django_partial_index-0.1.0-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "1f38f15509de9dfac06c619c5c5c5ec9",
          "sha256": "6103cbffd567a867622517a6d042ed7433bada0748a46ace63f625d55249dfed"
        },
        "downloads": 0,
        "filename": "django-partial-index-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "1f38f15509de9dfac06c619c5c5c5ec9",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 3270,
        "upload_time": "2017-08-05T22:10:55",
        "url": "https://files.pythonhosted.org/packages/27/ae/5b6b23f2bb7055be4066d321d0dcc0529967919d1e54781b99eb0ec2c147/django-partial-index-0.1.0.tar.gz"
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a44e07075e88838aa4b2fb72d3faffc5",
          "sha256": "4e15eb7c38872d451d5a9905b2480ff97714c437f77095df2ecb480b02a69ba2"
        },
        "downloads": 0,
        "filename": "django_partial_index-0.1.1-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a44e07075e88838aa4b2fb72d3faffc5",
        "packagetype": "bdist_wheel",
        "python_version": "3.6",
        "size": 6092,
        "upload_time": "2017-08-06T15:06:40",
        "url": "https://files.pythonhosted.org/packages/62/98/36702d8977f1828be28b6304e7d419821c408a7d2803ea20fd61bb011736/django_partial_index-0.1.1-py2.py3-none-any.whl"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "a44e07075e88838aa4b2fb72d3faffc5",
        "sha256": "4e15eb7c38872d451d5a9905b2480ff97714c437f77095df2ecb480b02a69ba2"
      },
      "downloads": 0,
      "filename": "django_partial_index-0.1.1-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "a44e07075e88838aa4b2fb72d3faffc5",
      "packagetype": "bdist_wheel",
      "python_version": "3.6",
      "size": 6092,
      "upload_time": "2017-08-06T15:06:40",
      "url": "https://files.pythonhosted.org/packages/62/98/36702d8977f1828be28b6304e7d419821c408a7d2803ea20fd61bb011736/django_partial_index-0.1.1-py2.py3-none-any.whl"
    }
  ]
}