{
  "info": {
    "author": "Juergen Brendel",
    "author_email": "jbrendel@paninetworks.com",
    "bugtrack_url": null,
    "classifiers": [
      "Environment :: No Input/Output (Daemon)",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: Apache Software License",
      "Natural Language :: English",
      "Operating System :: POSIX :: Linux",
      "Programming Language :: Python",
      "Topic :: System :: Clustering",
      "Topic :: System :: Networking"
    ],
    "description": "# VPC-router\n\n## Introduction\n\n### Summary\n\nThe vpc-router implements automatic route failover and backup routes for Amazon\nVPC environments.\n\nvpc-router lets users avoid route table limitations and build large Kubernetes\nclusters with the performance and visibility of native VPC networking.\n\nIt can also be used independently of Kubernetes whenever you need to manage\nroutes, backup routes and route failover in VPC environments.\n\nIt provides a plugin architecture for the easy integration with other cloud\norchestration systems.\n\n### Details\n\nvpc-router is a utility for setting and deleting routes in Amazon EC2 VPC route\ntables and specifically for automatically managing route failover.\n\nEach route is specified by a destination CIDR as well as a list of IP addresses\nof EC2 instances, which are eligible to receive packets for the CIDR. An\ninstance from the list is chosen and a route is set. vpc-router continuously\nmonitors instance health and performs an immediate route failover to another\ninstance in the set in case of a detected instance failure.\n\nRoutes can be configured in different ways, but most commonly, vpc-router takes\nroute configs from storage (a config file, in the future also a KV store) or\nvia HTTP requests. It will make sure that routes in the VPC route table are\nupdated as needed with every detected change to the route config.\n\nBy default, it applies all route updates to all the route tables it can find\nwithin a specified VPC.\n\n### Project origin\n\nThis program was developed for the [Romana project](http://romana.io) to\novercome the limit imposed on VPC route table entries (50 by default), which\nconstricts the size of clusters. Avoiding this limit typically required running\nan overlay network, which does not offer the performance and visibility of\nnative VPC networking. \n\nSome users prefer to run CNI network providers that support more advance\nnetwork policy APIs. However, most CNI pod networks require an overlay when\nclusters are split across Availability Zones (AZs), preventing HA clusters from\ndelivering native VPC network performance. Romana, using vpc-router can build\nCNI pod networks across zones without an overlay.\n\nWhile vpc-router was specifically designed for use with Romana and to take\nadvantage of its topology aware IPAM in these Kubernetes deployment scenarios,\nit does not depend on either project and can also be used stand-alone.\n\nPlugins for integration with different environments are provided. For example,\na [plugin to integrate with Romana](https://github.com/romana/vpcrouter-romana-plugin).\n\nHealth-checks are also implemented via plugins. This means that vpc-router may\neither directly contact EC2 instances to check their health, or it may instead\nconnect to AWS status and alert information, or use the node status provided by\norchestration systems, such as Kubernetes.\n\n## Installation and running\n\nYou can either run vpc-router out of the source directory, or perform a full\ninstall, it can run outside of the VPC or within, on a cluster node or not.\n\n### Installation via pip\n\nThe vpc-router is in the Python Package Index (PyPi). Therefore, the simplest\nway to install it is just:\n\n    pip install vpcrouter\n\n### Run vpc-router out of the source directory\n\nIf you wish to work with the vpc-router sources, or [contribute](#contributing)\nto the project, you might want to run vpc-router directly from the sources.\n\nAfter downloading the code, create a virtual environment, activate it and\ninstall the required libraries. You can then use the `vpcrouter-runner.py`\nhelper script to run vpc-router without a full install:\n\n    $ git clone git@github.com:paninetworks/vpc-router.git\n    $ virtualenv vpcrouter\n    $ source vpcrouter/bin/activate\n    $ cd vpc-router\n    $ pip install -r requirements/deploy.txt\n    $ ./vpcrouter-runner.py .....\n\n### Deploying in production environment\n\nPlease see our documentation on how to\n[deploy vpc-router in production](DEPLOY.md), which covers issues such as:\n\n* Performing a proper installation\n* IaM permissions for running on EC2 instances\n* Running vpc-router in a container\n\n## Contributing\n\n### Feedback, bug reports, issue tracker\n\nWe welcome any contributions, bug reports or feedback. Please use our\n[issue tracker](https://github.com/romana/vpc-router/issues) to file bugs or request\nadditional features.\n\n### Developing vpc-router\n\nIn order to develop or extend vpc-router, please read the [developer\ndocumentation](DEVELOPERS.md) for information that might be useful to get you\nstarted.\n\n## Built-in HTTP server to see internal state and config\n\nvpc-router comes with a built-in HTTP server. By default it listens on\n`localhost:33289`. Send a GET request (with a web-browser, curl or wget, or any\nclient you wish) to `http://localhost:33290/` to receive a JSON formatted\noutput with the current internal configuration of vpc-router.\n\nThe listen address and port can be modified with the `-a` (address) and `-p`\n(port) command line options.\n\n\n## Configuration\n\n### The route spec\n\nvpc-router requires a route spec configuration in JSON format. It looks\nsomething like this:\n\n    {\n        \"10.55.16.0/24\" : [ \"10.33.20.142\" ],\n        \"10.66.17.0/24\" : [ \"10.33.20.93\", \"10.33.30.22\" ]\n    }\n\nEach entry in the dictionary is keyed on the route's CIDR and then lists a\nnumber of eligible hosts, which can act as the target/router for this route.\nvpc-router randomly chooses an instance from a route's set of hosts.\n\nIf a route to a specified CIDR does not exist in the VPC's route tables, or if\nit does not specify a target that's contained in the specified host list,\nvpc-router creates or updates the route.\n\nThe health of those hosts is continuously monitored. If a host acting as router\nfails, vpc-router immediately switches the route to a different host from the\nset, if an alternative is available and healthy.\n\nNote that vpc-router takes control of the routing tables and removes any\nentries of this type (interfaces on instances as target) if they are not part\nof the route spec.\n\n## Modes of operation\n\nThe modes for the detection of configuration updates are implemented via\nplugins. It is therefore easy to extend vpc-router to integrate with\nvarious orchestration systems. [How to write plugins](PLUGINS.md) is documented\nseparately.\n\nA plugin may either accept a route spec in the format described above, or it\nmay be used to translate other information into the properly formatted\nroute spec.\n\n### Internal mode plugins\n\nOut of the box, plugins for three different configuration update modes are\nincluded in the vpc-router source:\n\n* configfile: Continuosly monitor a route spec configuration file for any\n  changes. The config file should contain the route spec in exactly the format\n  described above.\n* http: Receive updated route specs via HTTP POSTs. The POSTed data should be\n  the route-spec in exactly the format described above.\n* fixedconf: With this a static config can be provided on the command line. It\n  is mostly used as a simple example for plugin developers. It does work\n  and might be useful in some cases, but is not commonly going to be used in\n  production. It translates the command line parameters into a route spec of\n  the required format.\n\n### External mode plugins\n\nIt is also possible to write external plugins, which live in their own\nrepository. There is currently one example of this:\n\n* romana: The\n  [Romana plugin](https://github.com/romana/vpcrouter-romana-plugin) provides\n  seamless integration with the [Romana project](http://romana.io/), for the\n  creation of Kubernetes and OpenStack clusters without overlays, just\n  natively routed network traffic. The vpc-router with the Romana plugin then\n  allows those clusters to span multiple VPC Availability Zones, all while\n  using native VPC networking and without being hindered by VPC's 50 route\n  limit. The Romana plugin watches the network topology knowledge from Romana\n  and translates it into the required route spec for vpc-router.\n\n### Mode 'configfile' \n\nThe following command starts vpc-router as a service daemon in 'configfile'\nmode:\n\n    $ vpcrouter -m configfile -f route-spec.conf -r us-east-1 -v vpc-350d6a51\n\nThe used options are:\n\n* `-m configfile` tells vpc-router to take config changes from a specified\n  route spec file.\n* `-f` specifies the name of the route spec config file.\n* `-r` specifies the AWS region to which vpc-router should connect. Note: This\n  can be omitted if vpc-router is run on an instance in the region.\n* `-v` specifies the VPC for which vpc-router should perform route updates.\n  Note: This can be omitted if vpc-router is run on an instance within the VPC.\n\nIn 'configfile' mode the `-f` option must be used to specify the route spec\nconfig file. It must exist when the server is started. The server then\ncontinuously monitors this file for changes.\n\nYou can see an example route spec file in `examples/route_spec_1.conf`.\n\n### Mode 'http'\n\nThe following command starts vpc-router as a service daemon in the 'http'\nmode. It utilizes the built-in HTTP server to listen for new route specs:\n\n    $ vpcrouter -m http -r us-east-1 -v vpc-350d6a51\n\nThe used options are:\n\n* `-m http` tells vpc-router to start listening on a certain address and port\nfor HTTP POST requests containing new route specs.\n* `-r` specifies the AWS region to which vpc-router should connect. Note: This\ncan be omitted if vpc-router is run on an instance in the region.\n* `-v` specifies the VPC for which vpc-router should perform route updates.\nNote: This can be omitted if vpc-router is run on an instance within the VPC.\n\nA new route spec can be POSTed to the `/route_spec` URL. The current route spec\ncan be retrieved with a GET to that URL.\n\nFor example:\n\n    $ curl -X \"POST\" -H \"Content-type:application/json\" \"http://localhost:33289/route_spec\" -d '{\"10.55.0.0/16\" : [ \"10.33.20.142\" ], \"10.66.17.0/24\" : [ \"10.33.20.93\", \"10.33.30.22\" ]}'\n\n### Mode 'romana'\n\nFor integration with the [Romana project](http://romana.io/), please see the\n[vpc-router Romana plugin](https://github.com/romana/vpcrouter-romana-plugin).\n\n## Continuous monitoring\n\nContinuos monitoring is performed for all hosts listed in the route spec. If an\ninstance does not appear healthy anymore and it is a current target for a route\nthen the route will be automatically updated to point to an alternate target,\nif a healthy one is available.\n\nThe health-check itself is implemented via plugins, which gives vpc-router the\nflexibility to use a wide variety of information to determine whether an EC2\nrouting instance is healthy. By default, it uses the 'icmpecho' plugin, which\nutilizes an ICMPecho ('ping') request to actively check the responsiveness of\ninstances. A 'tcp' plugin, which attempts TCP connection attempts on a\nspecified port, is also provided.\n\nUse the `--health` option to select the health monitor plugin, for example:\n\n    $ vpcrouter --health tcp --tcp_check_port 22 --tcp_check_interval 5 ...\n\nor:\n\n    $ vpcrouter --health icmpecho --icmp_check_interval 5 ...\n\n### The 'multi' plugin: Combining more than one health monitor plugin\n\nA `multi` plugin is also provided with vpc-router. This plugin allows the\ncombining of multiple, simpler health-monitoring plugins into complex or\nmulti-layered instance health monitoring. Use the `--health` option to select\nthe `multi` plugin. Then use the `--multi_plugins` option to specify the list\nof simple health plugins that should be used simultaneously (a list of column\nseparated health-monitor plugin names). Any additional command line options\nadded by those plugins can then also be specified.\n\nAs an example, let's configure vpc-router to use the `icmpecho` plugin (with a\nmonitoring interval of 2 seconds) as well as the `tcp` plugin, which should\nmonitor port 80.\n\n    $ vpcrouter --health multi --multi_plugins icmpecho:tcp \\\n                        --icmp_check_interval 2 --tcp_check_port 80 ...\n\nAn instance is considered 'failed' if ANY of the specified sub-plugins reports\nthe instance as failed.\n\n### Considering an instance as 'healthy' again\n\nIf a health monitoring plugin reports an instance as 'failed', it will be\nconsidered 'failed' for some amount of time (the exact time depends on the\nplugin, but usually it's 10 times the selected monitoring interval, when using\nthe 'multi' plugin, it will be 20 times the largest interval of the specified\nsub-plugins).\n\nThe health monitoring occasionally attempts to re-check failed instances to see\nif they have recovered. If not, it will report them as failed again.\n\nIf there has not been a 'failed' report about an instance within that time\nwindow, the instance will automatically be considered as 'healthy' again. This\ndoes not mean that routes are failing back to that instance, it just means that\nthis instance becomes eligible to be a target for routes again.\n\n## TODO\n\nA 'todo' list is maintained in the\n[issue tracker](https://github.com/romana/vpc-router/issues) of the project.\n\n\n\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "http://github.com/romana/vpc-router/",
    "keywords": "",
    "license": "Apache Software License",
    "maintainer": "",
    "maintainer_email": "",
    "name": "vpcrouter",
    "platform": "",
    "project_url": "https://pypi.org/project/vpcrouter/",
    "release_url": "https://pypi.org/project/vpcrouter/1.7.0/",
    "requires_dist": [
      "wsgiref (==0.1.2)",
      "watchdog (==0.8.3)",
      "netaddr (==0.7.19)",
      "multiping (>=1.0.4)",
      "bottle (==0.12.13)",
      "boto (==2.47.0)",
      "argparse (==1.2.1)"
    ],
    "requires_python": "",
    "summary": "Automated route management, backup routes and route failover for Amazon VPC environments",
    "version": "1.7.0"
  },
  "releases": {
    "1.6.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "2a17096bb91d9249ce51394f10254f3b",
          "sha256": "7351e61d2a02fe0e0d4be957f030fcba425ce76b82e3c9e07e390f7ab80f4bc4"
        },
        "downloads": 0,
        "filename": "vpcrouter-1.6.3-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "2a17096bb91d9249ce51394f10254f3b",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 63732,
        "upload_time": "2017-08-19T00:22:39",
        "url": "https://files.pythonhosted.org/packages/2c/7b/fa8d19322c1590e96786aee50ad4b2b9259d94fc8c0160ab8b6fc05e43d8/vpcrouter-1.6.3-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "e5c23de824b105335176af6a0780715f",
          "sha256": "f44bd5cbe3114065423de5f5b2505f69a417db9214152afe3c73938c5e41a36e"
        },
        "downloads": 0,
        "filename": "vpcrouter-1.6.3.tar.gz",
        "has_sig": false,
        "md5_digest": "e5c23de824b105335176af6a0780715f",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 44026,
        "upload_time": "2017-08-19T00:22:41",
        "url": "https://files.pythonhosted.org/packages/28/d8/785444830104eb66fb40f8705ce69f5a053f34a431d95134771a324d7f1d/vpcrouter-1.6.3.tar.gz"
      }
    ],
    "1.7.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "65a7ede1adb792374d9b81543ed0bc94",
          "sha256": "1782354472e78b6d55e46b6546cbe026b76e272826138a69bfe69fee9b8919bc"
        },
        "downloads": 0,
        "filename": "vpcrouter-1.7.0-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "65a7ede1adb792374d9b81543ed0bc94",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 69641,
        "upload_time": "2017-08-22T06:07:40",
        "url": "https://files.pythonhosted.org/packages/0d/53/285dfe541ef4cef91be80a6201f9f20aa130fe9a1e98d71f9f028687a290/vpcrouter-1.7.0-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "12cdc754829b16f2b0743ff259024266",
          "sha256": "d9eea17d5e85424e08060447385166933abe073c986d37802b9a14f3f1c3cd0d"
        },
        "downloads": 0,
        "filename": "vpcrouter-1.7.0.tar.gz",
        "has_sig": false,
        "md5_digest": "12cdc754829b16f2b0743ff259024266",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 48145,
        "upload_time": "2017-08-22T06:07:42",
        "url": "https://files.pythonhosted.org/packages/de/e3/4f590e3bd86087c9e1a0f7cd9e293870213cd6b598a74725ddba77c2064f/vpcrouter-1.7.0.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "65a7ede1adb792374d9b81543ed0bc94",
        "sha256": "1782354472e78b6d55e46b6546cbe026b76e272826138a69bfe69fee9b8919bc"
      },
      "downloads": 0,
      "filename": "vpcrouter-1.7.0-py2-none-any.whl",
      "has_sig": false,
      "md5_digest": "65a7ede1adb792374d9b81543ed0bc94",
      "packagetype": "bdist_wheel",
      "python_version": "py2",
      "size": 69641,
      "upload_time": "2017-08-22T06:07:40",
      "url": "https://files.pythonhosted.org/packages/0d/53/285dfe541ef4cef91be80a6201f9f20aa130fe9a1e98d71f9f028687a290/vpcrouter-1.7.0-py2-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "12cdc754829b16f2b0743ff259024266",
        "sha256": "d9eea17d5e85424e08060447385166933abe073c986d37802b9a14f3f1c3cd0d"
      },
      "downloads": 0,
      "filename": "vpcrouter-1.7.0.tar.gz",
      "has_sig": false,
      "md5_digest": "12cdc754829b16f2b0743ff259024266",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 48145,
      "upload_time": "2017-08-22T06:07:42",
      "url": "https://files.pythonhosted.org/packages/de/e3/4f590e3bd86087c9e1a0f7cd9e293870213cd6b598a74725ddba77c2064f/vpcrouter-1.7.0.tar.gz"
    }
  ]
}