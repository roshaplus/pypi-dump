{
  "info": {
    "author": "Paul Olsen",
    "author_email": "python@wholeshoot.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Topic :: Database :: Database Engines/Servers"
    ],
    "description": "================\nmongo_datatables\n================\n\nA script for using the jQuery plug-in DataTables server-side processing (and DataTables Editor) with MongoDB.\n\nWorks with Flask and Pymongo. Supports column sorting and filtering by multiple search terms and/or column specific\nsearches like column:keyword.\n\n----\n\n\nInstall\n=======\nYou can install with pip::\n\n    pip install mongo-datatables\n\n..\n\nBasic Usage\n===========\n\nIn your ``views.py``::\n\n    import json\n    from flask import request, render_template\n    from mongo_datatables import DataTables\n    from app import mongo\n    from . import main\n\n\n    @main.route('/table-view')\n    def table_view():\n        return render_template('main/table_view.html')\n\n\n    @main.route('/mongo/<collection>')\n    def api_db(collection):\n        request_args = json.loads(request.values.get(\"args\"))\n        results = DataTables(mongo, collection, request_args).get_rows()\n        return json.dumps(results)\n\n\n..\n\nIn your ``table_view.html``::\n\n    {% extends \"base.html\" %}\n\n\n    {% block content %}\n        {{ super() }}\n\n        <div class=\"container\">\n\n            <h1>\n                Contracts\n            </h1>\n\n            <table id=\"dt_table\" class=\"table table-striped table-responsive\">\n                <thead>\n                <tr>\n                    <th>ExpiryDate</th>\n                    <th>ContractId</th>\n                    <th>Vendor</th>\n                    <th>Note</th>\n                </tr>\n                </thead>\n            </table>\n\n\n        </div>\n    {% endblock %}\n\n    {% block scripts %}\n        {{ super() }} // DataTables, jQuery, Bootstrap loaded here\n\n        <script>\n            $(function () {\n                $('#dt_table').DataTable({\n                    serverSide: true,\n                    ajax: {\n                        url: '{{ url_for('main.api_db', collection='contracts') }}',\n                        dataSrc: 'data',\n                        type: 'GET',\n                        data: function (args) {\n                            //args.qString = getQuerystring(); //add in querystring args, or anything else you want\n                            return {\n                                \"args\": JSON.stringify(args)\n                            };\n                        }\n                    },\n                    columns: [\n                        {data: 'ExpiryDate'},\n                        {data: 'ContractId'},\n                        {data: 'Vendor'},\n                        {data: 'Note'}\n                    ]\n                });\n\n            });\n\n            // in case you want to pass the querystring along with the request\n            function getQuerystring() {\n                var $qItems = $('#qItems');\n                $qItems.empty();\n                var hash;\n                var filters = {};\n                var q = document.URL.split('?')[1];\n                if (q != undefined) {\n                    q = q.split('&');\n                    for (var i = 0; i < q.length; i++) {\n                        hash = q[i].split('=');\n                        filters[hash[0]] = hash[1];\n                    }\n                }\n                return filters\n            }\n        </script>\n\n    {% endblock %}\n\n..\n\nAdvanced Usage, With A Custom Filter\n====================================\n\nIn your ``views.py``::\n\n    import json\n    from datetime import datetime, timedelta\n    from mongo_datatables import Editor, DataTables\n    from flask import request\n    from app import mongo\n    from . import main\n\n\n    @main.route('/support-expiry', methods=['GET'])\n    def support_expiry():\n        \"\"\"This examples receives a 'daysToExpiry' value and translates it to an Expiration Date, which can be looked\n        up in the Mongo collection.\n        \"\"\"\n\n        request_args = json.loads(request.values.get(\"args\"))\n        custom_filter = {}\n\n        # translate daysToExpiry into a filter for the ExpiryDate Mongo key\n        if 'daysToExpiry' in request_args['qString']:\n            days_to_expiry = request_args['qString'].pop('daysToExpiry', None)  # remove daysToExpiry, leave the rest\n            t = datetime.utcnow()\n            ts = t.strftime(\"%Y-%m-%d\")\n            if days_to_expiry == 'Expired':\n                custom_filter.update({\n                    'ExpiryDate': {'$lt': ts, '$ne': ''}  # ExpiryDate is before today but not equal to ''\n                })\n            else:\n                d = t + timedelta(days=int(days_to_expiry))\n                ds = d.strftime(\"%Y-%m-%d\")\n                custom_filter.update({\n                    'ExpiryDate': {'$gt': ts, '$lt': ds}  # ExpiryDate is between now and daysToExpiry from now\n                })\n\n        # add the rest of the query string to the custom filter\n        custom_filter.update(request_args['qString'])\n\n        collection = 'HardwareInventory'\n        results = DataTables(mongo, collection, request_args, **custom_filter).get_rows()\n        return json.dumps(results)\n\n..\n\n\nDataTables Editor Usage\n=======================\n\nIn your ``views.py``::\n\n    import json\n    from flask import request\n    from mongo_datatables import DataTables, Editor\n    from . import main\n    from app import mongo\n\n    # include the table_view and api_db views from above\n\n    @main.route('/mongo/edit/<collection>/<doc_id>', methods=['POST'])\n    def api_editor(collection, doc_id):\n        request_args = json.loads(request.values.get(\"args\"))\n        results = Editor(mongo, collection, request_args, doc_id).update_rows()\n        return json.dumps(results)\n\n..\n\nIn your ``table-view.html``::\n\n    {% extends \"base.html\" %}\n\n\n    {% block content %}\n        {{ super() }}\n\n        <div class=\"container\">\n\n            <table id=\"dt_table\" class=\"table table-striped table-responsive\">\n                <thead>\n                <tr>\n                    <th>ExpiryDate</th>\n                    <th>ContractId</th>\n                    <th>Vendor</th>\n                    <th>Note</th>\n                </tr>\n                </thead>\n            </table>\n\n\n        </div>\n    {% endblock %}\n\n    {% block scripts %}\n        {{ super() }}  // DataTables, Editor, jQuery, Bootstrap, Buttons loaded here\n\n        <script>\n\n            $(function () {\n\n                // DataTables\n                var table = $('#dt_table').DataTable({\n                    serverSide: true,\n                    ajax: {\n                        url: '{{ url_for('main.api_db', collection='contracts') }}',\n                        dataSrc: 'data',\n                        type: 'GET',\n                        data: function (args) {\n                            return {\n                                \"args\": JSON.stringify(args)\n                            };\n                        }\n                    },\n                    select: true,\n                    columns: [\n                        {data: 'ExpiryDate'},\n                        {data: 'ContractId'},\n                        {data: 'Vendor'},\n                        {data: 'Note'}\n                    ]\n                });\n\n                // Editor\n                var editor = new $.fn.dataTable.Editor({\n                    ajax: {\n                        //Editor replaces _id_ with the row ID(s) (the Mongo _id(s))\n                        url: '{{ url_for('main.api_editor', collection='contracts', doc_id='_id_') }}',\n                        type: 'POST',\n                        data: function (args) {\n                            return {\n                                \"args\": JSON.stringify(args)\n                            };\n                        }\n                    },\n                    table: \"#dt_table\",\n                    fields: [\n                        {name: 'ExpiryDate', value: 'Expiry Date'},\n                        {name: 'ContractId', value: 'Contract ID'},\n                        {name: 'Vendor', value: 'Vendor'},\n                        {name: 'Note', value: 'Note'}\n                    ]\n                });\n\n                // Buttons\n                new $.fn.dataTable.Buttons(table, [\n                    {extend: \"create\", editor: editor},\n                    {extend: \"edit\", editor: editor},\n                    {extend: \"remove\", editor: editor}\n                ]);\n\n                table.buttons().container()\n                        .appendTo($(table.table().container(), '.col-sm-6:eq(0)'));\n\n            });\n        </script>\n\n    {% endblock %}\n\n\n\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "http://github.com/pauljolsen/mongo_datatables",
    "keywords": "flask pymongo mongodb",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "mongo-datatables",
    "platform": "",
    "project_url": "https://pypi.org/project/mongo-datatables/",
    "release_url": "https://pypi.org/project/mongo-datatables/0.2.0/",
    "requires_dist": [
      "pymongo"
    ],
    "requires_python": "",
    "summary": "Classes for connecting DataTables and Editor to MongoDB",
    "version": "0.2.0"
  },
  "releases": {
    "0.1.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "b5c904470cafd1ff54a9c094c3333315",
          "sha256": "3a6a371fb17432f3368424b8a504936e2e2bd6a270aee6115fd73129ba7ff864"
        },
        "downloads": 0,
        "filename": "mongo_datatables-0.1.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b5c904470cafd1ff54a9c094c3333315",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "size": 9384,
        "upload_time": "2017-09-14T13:47:23",
        "url": "https://files.pythonhosted.org/packages/0d/34/11c9ea033f40e41fab54828ca04b23ee6acd37be66ca35fe7d0a655c0938/mongo_datatables-0.1.4-py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "bcbeb689cf0ede5e66d59d8d2b78e932",
          "sha256": "b60ae3068533af3bd572dbecc64e8ca9a955354c89f2d005c13bf6ed64fcb7f6"
        },
        "downloads": 0,
        "filename": "mongo_datatables-0.1.4.zip",
        "has_sig": false,
        "md5_digest": "bcbeb689cf0ede5e66d59d8d2b78e932",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 12694,
        "upload_time": "2017-09-14T13:47:00",
        "url": "https://files.pythonhosted.org/packages/71/7f/cc507cbeeeb61832659a64f27acf541cdc6cdf99f7bcc5fc3b8bf1fa768a/mongo_datatables-0.1.4.zip"
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "d8dae9468863bb60e6dddde5a13decd6",
          "sha256": "212d8663b244843589cb7c6ba3413904155d20622b9c91dc25c61b1523541a10"
        },
        "downloads": 0,
        "filename": "mongo_datatables-0.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d8dae9468863bb60e6dddde5a13decd6",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "size": 9434,
        "upload_time": "2017-09-17T16:07:20",
        "url": "https://files.pythonhosted.org/packages/26/b6/febc34c60468e482c196f0f2163cdb86f00253591d37e3766571297e3dcc/mongo_datatables-0.2.0-py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "f1901a1bc8b64143f68d5f325807d584",
          "sha256": "6fa2f474ffa5f48927b28f1aad8b05b769a8d530e6a698767b5b599f2ea81aa7"
        },
        "downloads": 0,
        "filename": "mongo_datatables-0.2.0.zip",
        "has_sig": false,
        "md5_digest": "f1901a1bc8b64143f68d5f325807d584",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 12750,
        "upload_time": "2017-09-17T16:07:21",
        "url": "https://files.pythonhosted.org/packages/fe/92/2786213c637e98eb3234698f1970536567ed0b990205beea7cb270d6e974/mongo_datatables-0.2.0.zip"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "d8dae9468863bb60e6dddde5a13decd6",
        "sha256": "212d8663b244843589cb7c6ba3413904155d20622b9c91dc25c61b1523541a10"
      },
      "downloads": 0,
      "filename": "mongo_datatables-0.2.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "d8dae9468863bb60e6dddde5a13decd6",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "size": 9434,
      "upload_time": "2017-09-17T16:07:20",
      "url": "https://files.pythonhosted.org/packages/26/b6/febc34c60468e482c196f0f2163cdb86f00253591d37e3766571297e3dcc/mongo_datatables-0.2.0-py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "f1901a1bc8b64143f68d5f325807d584",
        "sha256": "6fa2f474ffa5f48927b28f1aad8b05b769a8d530e6a698767b5b599f2ea81aa7"
      },
      "downloads": 0,
      "filename": "mongo_datatables-0.2.0.zip",
      "has_sig": false,
      "md5_digest": "f1901a1bc8b64143f68d5f325807d584",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 12750,
      "upload_time": "2017-09-17T16:07:21",
      "url": "https://files.pythonhosted.org/packages/fe/92/2786213c637e98eb3234698f1970536567ed0b990205beea7cb270d6e974/mongo_datatables-0.2.0.zip"
    }
  ]
}