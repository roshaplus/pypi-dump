{
  "info": {
    "author": "Dillon Dixon",
    "author_email": "dillondixon@gmail.com",
    "bugtrack_url": "",
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5"
    ],
    "description": "mixpanel-jql\n============\n\nA small Python library for running `JQL <https://mixpanel.com/jql/>`__\nqueries against Mixpanel's JQL API. The data returned from the API is\nautomatically decompressed as it arrives, making it available for\nprocessing as soon as the first row arrives. This is to avoid buffering\nlarge result sets in memory.\n\nInstallation\n------------\n\nTo install the ``mixpanel-jql`` library, simply run the following in\nyour terminal:\n\n``pip install mixpanel-jql``\n\nSimple example\n--------------\n\nLet's do a simple count of our number of 'X' events over each day of May 2016. Our key for grouping will be the date the event was sent to Mixpanel in the format ``YYYY-MM-DD``. We can get that from our event's ``time`` property by specifying our key as ``new Date(e.time).toISOString().split('T')[0]``.\n\nThis is simple and fast to do with this library.\n\n.. code:: python\n\n    from mixpanel_jql import JQL, Reducer\n\n    api_secret = '...'\n\n    params = {\n        'event_selectors': [{'event': \"X\"}],\n        'from_date': '2016-05-01',\n        'to_date': '2016-05-31'\n    }\n\n    query = JQL(api_secret, params)\\\n              .group_by(\n                  keys=[\n                      \"new Date(e.time).toISOString().split('T')[0]\",\n                  ],\n                  accumulator=Reducer.count())\n\n    for row in query.send():\n        date = row['key'][0]\n        value = row['value']\n        print(\"[%s] => %d\" % (date, value))\n    # [2016-05-01] => 302\n    # [2016-05-02] => 1102\n    # ...\n    # [2016-05-31] => 120\n\nBut what if we only want to count unique events? That is to say, what if we care about how many users spawned each event per day and not just the overall number of times the event occurred?\n\nWith some minor modification to our previous code, we can achieve this:\n\n.. code:: python\n\n    query = JQL(api_secret, params)\\\n              .group_by_user(\n                  keys=[\n                      \"new Date(e.time).toISOString().split('T')[0]\",\n                  ],\n                  accumulator=\"function(){ return 1;}\")\\\n              .group_by(\n                  keys=[\"e.key.slice(1)\"],\n                  accumulator=Reducer.count())\n\nWe replace our ``accumulator`` keyward argument with a JavaScript function returning ``1``, since each user will only be counted for once. ``group_by_user`` also adds the user ID into the key of our results. We can regroup our results by slicing that detail off with ``e.key.slice(1)`` and recounting.\n\nMore advanced examples\n----------------------\n\nLet's assume we want to count all events 'A' with a property 'B' that is\nequal to 2 and a property F that is equal to \"hello\". Events 'A' also\nhave a property 'C', which is some random string value. We want the\nresults grouped and tallied by values of 'C' to see how many property\n'C' events occurred over each day in the month of April 2016.\n\n.. code:: python\n\n    from mixpanel_jql import JQL, Reducer\n\n    api_secret = '...'\n\n    params = {\n        'event_selectors': [{'event': \"A\"}],\n        'from_date': '2016-04-01',\n        'to_date': '2016-04-30'\n    }\n\n    query = JQL(api_secret, params)\\\n              .filter('e.property.B == 2')\\\n              .filter('e.property.F == \"hello\"')\\\n              .group_by(\n                  keys=[\n                      \"new Date(e.time).toISOString().split('T')[0]\",\n                      \"e.property.C\"\n                  ],\n                  accumulator=Reducer.count())\n\n    for row in query.send():\n        date, c = row['key'][0]\n        value = row['value']\n        print(\"[%s] %s => %d\" % (date, c, value))\n    # [2016-04-01] abc => 3\n    # [2016-04-01] xyz => 1\n    # ...\n\nIf we wanted to count only *unique* events (i.e. count each user causing\nthe event only once), we can change our query to *group by user*, to\nreduce the number of times they caused a particular ``e.properties.C``\nto just 1.\n\n.. code:: python\n\n    query = JQL(api_secret, params)\\\n              .filter('e.property.B == 2')\\\n              .filter('e.property.F == \"hello\"')\\\n              .group_by_user(\n                  keys=[\n                      \"new Date(e.time).toISOString().split('T')[0]\",\n                      \"e.property.C\"\n                  ],\n                  accumulator=\"function(){ return 1;}\")\\\n              .group_by(\n                  keys=[\"e.key.slice(1)\"],\n                  accumulator=Reducer.count())\n\nWhy are your filters not joined with ``&&``?\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nWe could have also combined our ``.filter(...)`` methods into 1 method\nby doing, ``.filter('e.property.B == 2 && e.property.F == \"hello\"')``.\nSuccessive ``.filter(...)`` expressions are automatically ``&&``'ed. The\nmethod of expression you choose is stylistic.\n\nWhat is that ``Reducer`` thing?\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nThe ``Reducer`` class is for convenience and contains shortcuts to all\nthe reducer functions (e.g. ``Reducer.count()`` returns\n``mixpanel.reducer.count()``, and ``Reducer.top(limit)`` returns\n``mixpanel.reducer.top(limit)``). Refer to the code for a list of all\nreducer shortcuts.\n\nTo write your own reducer, make sure to include a full JavaScript\nfunction body (i.e. ``function(){ ... }``).\n\nHow do I see what the final JavaScript sent to Mixpanel will be?\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nUse the ``.query_plan()`` method on your JQL query to view what the\nequivalent JavaScript will be.\n\n.. code:: python\n\n    >>> query.query_plan()\n    'function main() { return Events(params).filter(function(e){return e.property.B == 2}).filter(function(e){return e.property.F == \"hello\"}).groupByUser([function(e){return new Date(e.time)).toISOString().split(\\'T\\')[0]},function(e){return e.property.C}], function(){ return 1;}).groupBy([function(e){return e.key.slice(1)}], mixpanel.reducer.count()); }'\n\nThis can be quite helpful during debugging.\n\nCaveats\n-------\n\n``.filter(...)`` automatically transforms whatever is within the\nparenthesis' into ``function(e){ return ... }``. This library does\n**not** support the ``properties.x`` shortcut syntax and requires\n``e.properties.x``.\n\nThis library cannot easily express everything possible in Mixpanel's JQL\nlanguage, but does try to simplify the general cases. If you have some\nideas for making this library more user friendly to a wider range of\npotential queries, please submit a pull request or create an issue.\n\nContributions are very welcome!\n\nWhere can I learn more about Mixpanel's JQL?\n--------------------------------------------\n\nFor more information on what you can do with JQL, refer to Mixpanel's\ndocumentation `here <https://mixpanel.com/help/reference/jql>`__.\n",
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/ownaginatious/mixpanel-jql",
    "keywords": "mixpanel,jql,stream",
    "license": "MIT",
    "maintainer": null,
    "maintainer_email": null,
    "name": "mixpanel-jql",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/mixpanel-jql/",
    "release_url": "https://pypi.org/project/mixpanel-jql/0.3.post4/",
    "requires_python": null,
    "summary": "A streaming library for making JQL queries to Mixpanel",
    "version": "0.3.post4"
  },
  "releases": {
    "0.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "e381a07b39f19d7656d5bc8a12609fbb",
          "sha256": "e8feb04f3ab61a54ecbb6885e8843c1134e5b5671530b1bab70a0236d32a3762"
        },
        "downloads": 453,
        "filename": "mixpanel-jql-0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "e381a07b39f19d7656d5bc8a12609fbb",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 20829,
        "upload_time": "2016-05-13T19:39:07",
        "url": "https://files.pythonhosted.org/packages/bb/b1/b96a5d777bb998170d7afb4d4f78de0b6de12f4aa0b44f05e2355626e923/mixpanel-jql-0.1.tar.gz"
      }
    ],
    "0.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "412acbdce402e228c66234061bee05f1",
          "sha256": "4ad6ddaf0dc7e5d94e5ed985f492d80b7b526380d5ba8312135308dcdf154d64"
        },
        "downloads": 141,
        "filename": "mixpanel-jql-0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "412acbdce402e228c66234061bee05f1",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 20725,
        "upload_time": "2016-05-16T20:16:25",
        "url": "https://files.pythonhosted.org/packages/ce/39/b62f8272dbd09fc041fbd7c87710b4e8e994c37cf9560d7ea5c1a76e8f99/mixpanel-jql-0.2.tar.gz"
      }
    ],
    "0.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "1d713e8107341c626765d5aada93bcca",
          "sha256": "50e26967691023a47e25517eea744ea6d3bb599cb00451b171adc714cf14e3c1"
        },
        "downloads": 215,
        "filename": "mixpanel-jql-0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "1d713e8107341c626765d5aada93bcca",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 21207,
        "upload_time": "2016-06-21T23:33:35",
        "url": "https://files.pythonhosted.org/packages/52/c9/060a841a07db2d3604eed9548f95eab155576486d92af31010cd18a7b9b5/mixpanel-jql-0.3.tar.gz"
      }
    ],
    "0.3.post4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "0e503f1353005221a93115ed5a8d8159",
          "sha256": "8df4416c9a24f2090b3867c016fb7b0ea71d7a6cc2d9c6c9eb9cde9099bb7f45"
        },
        "downloads": 279,
        "filename": "mixpanel-jql-0.3.post4.tar.gz",
        "has_sig": false,
        "md5_digest": "0e503f1353005221a93115ed5a8d8159",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 21330,
        "upload_time": "2016-06-27T14:41:15",
        "url": "https://files.pythonhosted.org/packages/a4/12/1cced3d963e0103492f890c2f79647f44b2442fed1bcfe9798f3debe4b04/mixpanel-jql-0.3.post4.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "0e503f1353005221a93115ed5a8d8159",
        "sha256": "8df4416c9a24f2090b3867c016fb7b0ea71d7a6cc2d9c6c9eb9cde9099bb7f45"
      },
      "downloads": 279,
      "filename": "mixpanel-jql-0.3.post4.tar.gz",
      "has_sig": false,
      "md5_digest": "0e503f1353005221a93115ed5a8d8159",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 21330,
      "upload_time": "2016-06-27T14:41:15",
      "url": "https://files.pythonhosted.org/packages/a4/12/1cced3d963e0103492f890c2f79647f44b2442fed1bcfe9798f3debe4b04/mixpanel-jql-0.3.post4.tar.gz"
    }
  ]
}