{
  "info": {
    "author": "Juan Antonio Osorio Robles",
    "author_email": "jaosorior@redhat.com",
    "bugtrack_url": null,
    "classifiers": [
      "Intended Audience :: Developers",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
      "Operating System :: POSIX :: Linux"
    ],
    "description": "Role Name\n=========\n\nThis sets up packages and firewall settings.\n\nSets the configuration for the IPSEC tunnels in the overcloud nodes.\n\nParses the given configuration file and starts the IPSEC tunnels.\n\nIn a final step, when pacemaker is enabled, it enables resource agents for each\nVirtual IP which puts up/tears down IPSEC tunnels depending on the VIP\nlocation.\n\nRole Variables\n--------------\n\n* `ipsec_psk`: the Pre-Shared Key to be used for the IPSEC tunnels.\n  Note that is is sensible information and it's recommended that it's stored\n  securely on the host where the playbook runs from, e.g. using Ansible Vault.\n  One can generate this variable with the following command:\n  `openssl rand -base64 48`\n* `overcloud_controller_identifier`: This identifies which nodes are\n  controllers in the cluster and which aren't, and should be part of the\n  hostname of the controller. Defaults to: 'controller'. It's highly\n  recommended that there's a way to explicitly identify the nodes this way.\n* `ipsec_algorithm`: Defines the encryption algorithm to use in the phase2alg\n  configuration option for the tunnels. Defaults to: `aes_gcm128-null`.\n  The possible values should be checked in libreswan's documentation.\n* `ipsec_skip_firewall_rules`: Determines whether the role should skip\n  or not the firewall rules. Defaults to: `false`.\n\nExample Playbook\n----------------\n\n    - hosts: servers\n      roles:\n         - tripleo-ipsec\n\nEnabling ipsec tunnels in TripleO\n=========================================\n\nThe main playbook to be ran on the overcloud nodes is:\n\n```\ntests/deploy-ipsec-tripleo.yml\n```\n\nWhich will deploy IPSEC on the overcloud nodes for the internal API network.\n\nWe'll use a PSK and an AES128 cipher.\n\nAdd the PSK to an ansible var file:\n\n```\ncat <<EOF > ipsec-psk.yml\nipsec_psk: $(openssl rand -base64 48)\nEOF\n```\n\nNote that for convenience I put the file in a path that's reachable for\nansible. And this name is necessary, as it's written directly to the playbook.\n\nEncrypt the file with ansible-vault (note that it'll prompt for a password):\n\n```\nansible-vault encrypt ipsec-psk.yml\n```\n\nHaving done this, now you can run the playbook:\n\n```\nansible-playbook -i /usr/bin/tripleo-ansible-inventory --ask-vault-pass \\\n\ttests/deploy-ipsec-tripleo.yml\n```\n\nGenerating an inventory\n-----------------------\n\nThe script _/usr/bin/tripleo-ansible-inventory_ generates a dynamic inventory\nwith the nodes in the overcloud. And However it comes with some inconveniences:\n\n* In deployments older than Pike, it might be a bit slow to run. To address\n  this, in Ocata and Pike it's possible to generate a static inventory out of\n  the output of this command:\n\n  ```\n  /usr/bin/tripleo-ansible-inventory  --static-inventory nodes.txt\n  ```\n\n  This will create a called nodes.txt with the static inventory, which we could\n  now use and save some time.\n\n* Newton unfortunately only takes into account computes and controllers with\n  this command. So for this deployment we need to generate an inventory of our\n  own. we can do so with the following command:\n\n  ```\n  cat <<EOF > nodes.txt\n  [undercloud]\n  localhost\n\n  [undercloud:vars]\n  ansible_connection = local\n\n  [overcloud:vars]\n  ansible_ssh_user = heat-admin\n\n  [overcloud]\n  $( openstack server list -c Networks -f value | sed 's/ctlplane=//')\n  EOF\n  ```\n\n  This assumes that you're deploying this playbook from the undercloud itself.\n  Hence the undercloud group containing localhost.\n\n\n\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/JAORMX/tripleo-ipsec",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "tripleo-ipsec",
    "platform": "",
    "project_url": "https://pypi.org/project/tripleo-ipsec/",
    "release_url": "https://pypi.org/project/tripleo-ipsec/0.0.1.dev95/",
    "requires_dist": [],
    "requires_python": "",
    "summary": "Ansible role for managing TripleO's IPSEC tunnels",
    "version": "0.0.1.dev95"
  },
  "releases": {
    "0.0.1.dev95": [
      {
        "comment_text": "",
        "digests": {
          "md5": "e3763238c522cf3100b2b225b20c44ff",
          "sha256": "5d568751e4f785ddc8e97339a45e0564fd903cbba3723b470fcd63b1323a13c0"
        },
        "downloads": -1,
        "filename": "tripleo_ipsec-0.0.1.dev95-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e3763238c522cf3100b2b225b20c44ff",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 5469,
        "upload_time": "2017-11-27T13:26:15",
        "url": "https://files.pythonhosted.org/packages/cb/d1/5c4fa012aa45ce6b26de8e81f8c675a8a397ac1822c210b7cf4f0378ed2c/tripleo_ipsec-0.0.1.dev95-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "5498be8b1a814818ed3dedb9892b3f1d",
          "sha256": "76dfa593d963188b0810230c996bcf3352c4ed8b9f96ec1ab13817b47becf256"
        },
        "downloads": -1,
        "filename": "tripleo-ipsec-0.0.1.dev95.tar.gz",
        "has_sig": false,
        "md5_digest": "5498be8b1a814818ed3dedb9892b3f1d",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 27917,
        "upload_time": "2017-11-27T13:26:17",
        "url": "https://files.pythonhosted.org/packages/b8/65/c3cd0b8835615607a022138fc4c584a5edebc3c2b99de0c6cd6175087b11/tripleo-ipsec-0.0.1.dev95.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "e3763238c522cf3100b2b225b20c44ff",
        "sha256": "5d568751e4f785ddc8e97339a45e0564fd903cbba3723b470fcd63b1323a13c0"
      },
      "downloads": -1,
      "filename": "tripleo_ipsec-0.0.1.dev95-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "e3763238c522cf3100b2b225b20c44ff",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "size": 5469,
      "upload_time": "2017-11-27T13:26:15",
      "url": "https://files.pythonhosted.org/packages/cb/d1/5c4fa012aa45ce6b26de8e81f8c675a8a397ac1822c210b7cf4f0378ed2c/tripleo_ipsec-0.0.1.dev95-py2.py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "5498be8b1a814818ed3dedb9892b3f1d",
        "sha256": "76dfa593d963188b0810230c996bcf3352c4ed8b9f96ec1ab13817b47becf256"
      },
      "downloads": -1,
      "filename": "tripleo-ipsec-0.0.1.dev95.tar.gz",
      "has_sig": false,
      "md5_digest": "5498be8b1a814818ed3dedb9892b3f1d",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 27917,
      "upload_time": "2017-11-27T13:26:17",
      "url": "https://files.pythonhosted.org/packages/b8/65/c3cd0b8835615607a022138fc4c584a5edebc3c2b99de0c6cd6175087b11/tripleo-ipsec-0.0.1.dev95.tar.gz"
    }
  ]
}