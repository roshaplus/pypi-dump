{
  "info": {
    "author": "Marjan Moderc",
    "author_email": "marjan.moderc@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# WORK IN PROGRESS!  NOT YET AVAILABLE ON PYPI!\n\n# PySitra\n\nA Python package for a two-way 2D transformation between old and new slovenian coordinates system.\n\n## About\n\nPySitra is a python written library two-way 2D transformation between old and new slovenian coordinates system. \nThe project and it's name (**Py**thon **S**loven**i**an **tra**nsformation) is inspired by the popular Slovenian web \nportal for online point transformation between old (Gauss-Kr\u00fcger) and new (Transverse Mercator) coordinate systems, \ncalled [SitraNet.si](www.sitranet.si), and it's C-written command-line-friendly successor \n[Geo Coordinate Converter](http://geocoordinateconverter.tk/indeks.html).\nLibrary comes with a handy command-line utility tool that enables an easy batch conversion of shapefiles and \ncoma-separated ascii files.\n\n\nProgram supports two most commonly used transformating methods for 2D point transformations:\n- ***triangle:*** affine 6-parametric 2D triangle transformation, based on 899 [Slovenian reference points](http://www.e-prostor.gov.si/zbirke-prostorskih-podatkov/drzavni-koordinatni-sistem/horizontalni-drzavni-koordinatni-sistem-d96tm/d96tm/transformacijski-parametri/) (best accuracy)\n- ***24regions:*** a simplified 4-parametric 2D transformation (where parameteres are precalculated for 24 Slovenian regions\n([more info](http://www.e-prostor.gov.si/zbirke-prostorskih-podatkov/drzavni-koordinatni-sistem/horizontalni-drzavni-koordinatni-sistem-d96tm/d96tm/transformacijski-parametri/))\n\nProgram contains spatailly precalculated regional transformation parameters, but also\nallows a manual specification of transformation parameters for both available methods.\n\n**IMPORTANT NOTICE:** Library is primarily intended and therefore mostly suitable for \nslovenian coordinate systems d48GK (espg: 3912) and d96TM (epsg: 3794)!\n\nFor more theoretical background, see the official GURS [webpage](http://www.e-prostor.gov.si/zbirke-prostorskih-podatkov/drzavni-koordinatni-sistem/transformacija-v-novi-koordinatni-sistem/).\n\n## Installation:\n\nLibrary is available on PyPi repository, so it can easily be installed with pip:\n\n```\npip install pysitra\n```\n\n\n## Usage:\n\n### 1. Python API\n\n**1.1. Transforming python lists of points:**\n\n```python\nfrom pysitra import SloTransformation\n\n# List of point that you want converted into d96 via several methods\nD48_POINTS = [(500000,100000),(0,0),(650000,200000)]\n\n\n# Initialize a Triangle Transformation object\nts_triangle = SloTransformation(from_crs=\"d48\",method=\"triangle\")\n\n# Initialize a 24regions transformation object\nts_24region = SloTransformation(from_crs=\"d48\",method=\"24regions\")\n\n# Initialize a affine transformation object with your own parameters\nts_triangle_manual = SloTransformation(from_crs=\"d48\",method=\"triangle\",params=\"1.00001;0.000040647;-374.668;-0.00002241;1.000006;494.8428\".split(\";\"))\n\n# Note, that seemingly redundant recreation of different transformations as a separate object comes very handy, when you want to\n# transform many files/lists at once, so you don't have to perform the expensive transformation object initialization\n# for every file/list separately.\n\n\n# Once you have transformation object initialized, you can use it's .transform() method to transform old points into\n# new points quite cheaply:\nprint(\"Triangle transformation (affine 6parametric):\")\nprint(ts_triangle.transform(D48_POINTS))\nprint(\"24regions transformation (4parametric):\")\nprint( ts_24region.transform(D48_POINTS))\nprint(\"Triangle transformation with custom parameters:\")\nprint(ts_triangle_manual.transform(D48_POINTS))\n```\n\n**1.2. Transforming files with python**\n\n```python\nfrom pysitra import shp_transformation,csv_transformation\nfrom pysitra.utils import recognize_csv_separator,check_for_csv_header\nimport geopandas as gpd\nimport pandas as pd\n\n\n# SHAPEFILES:\n\n#read shapefile into GeoDataFrame and transform it and save it as into new shapefile\ndf_in = gpd.read_file(\"shapefile_in_d48.shp\")\ndf_out = shp_transformation(df_in,from_crs=\"d48\",method=\"24regions\")\ndf_out.to_file(\"shapefile_in_d96.shp\")\n\n\n# ASCII CSVS:\ncsv_file = \"terrain_measurements_in_d48.csv\"\n\nsep = recognize_csv_separator(csv_file) #guess the separator type\nheader = check_for_csv_header(csv_file) #check if file has header\n\n#read csv file into DataFrame, transform them by triangle method with custom parameters and save it to csv.\ncsv_in = pd.read_csv(csv_file, sep=sep, header=header)\ncsv_out = csv_transformation(df_in=csv_in, from_crs=\"d48\", method=\"triangle\", params=\"1.00001;0.000040647;-374.668;-0.00002241;1.000006;494.8428\".split(\";\"))\ncsv_out.to_file(\"terrain_measurements_in_d96.csv\")\n```\n\n**1.3. Using low level functions to transform point-by-point**\n\n```python\nfrom pysitra import trans_2R_4params,trans_2R_6params\n\nD48_POINTS = [(500000,100000), (0,0), (650000,200000)]\n\nfor point in D48_POINTS:\n    # 4parametric transformation with params: scale,rotation,trans_x,trans_y\n    x, y = trans_2R_4params(point[0], point[1], params=[0.9999873226,0.0009846750,378.755,-493.382])\n    print(x, y)\n    # 6parametric transformation with params a,b,c,d,e,f\n    x, y = trans_2R_6params(point[0], point[1], params=[1.00001,0.000040647,-374.668,-0.00002241,1.000006,494.8428])\n    print(x, y)\n```\n\n### 2. Command Line Utility\n\nTransformations on a file (directory) level are best carried out by using the command line utility, that automatically \nships and installs with the library. Utility can be invoked with the command `sitra` in your shell. \nCalling `sitra --help` brings up commands overview with available options:\n\n```\n$ sitra --help\nUsage: sitra [OPTIONS] FILE_IN [FILE_OUT]\n\nOptions:\n  --to_crs [d48|d96]             Coordinate system to transform your data into\n                                 [required]\n  --method [triangle|24regions]  Transformation method to be used\n  --params TEXT                  Optional argument: semicolon separated manual\n                                 parameters, required for each transformation\n                                 method (24regions:4params,\n                                 triangle:6params,...\n  --help                         Show this message and exit.\n\n\n```\n\n**2.1. RULES AND DEFAULT CMD BEHAVIOUR**\n\n* `FILE_IN` is a mandatory input. Valid input file type are ESRI Shapefiles (\\*.shp) or plain ASCII csv files (\\*.csv, *.txt)\n* If no outfile name is given as input `FILE_OUT`, the same filename with extension _{crs} will be used automaticaly! \n(e.g.: shapefile.shp --> shapefile_d96.shp)\n* If input file is ASCII type, program will try to autodetect field for easting and northing by checking\n the column values range and column names\n* If input file is type *.shp, program check its EPSG code and \nwill complain if input's crs is not reverse of the desired crs! No such test \ncan be performed with ascii input types\n* parameter `--to_crs` is mandatory and can only be `d96`(=EPSG:3794) or `d48` (=EPSG:3912).\n* default value for `--method` is `triangle` (best accuracy)\n* default value for `--params` is `None` (they get calculated automatically - best accuracy)\n* in case you want to perform transformation with your own transformation parameters,\n you have to specify them manually with an option `--params` in a following style:\n    * for affine triangle transformation (=2R-6parameters transformation):\n     ```\n     ... -method=triangular --params=\"scale_x;rotation_y;translation_x;rotation_x;scale_y;translation_y\" ...\n     ```\n      \n    * for simplified 2R-4parameters transformation (which is used in 24regions transformation)\n    ```\n    ... --method=24regions --params=\"scale;CCW_rotation[dec \u00b0];translation_x[m];translation_y[m]\" ...\n    ```\n    * note the apostrophe `\"` or `'` around the semicolon-separated values in both cases! See the actual examples below!\n    \n**2.2. CMD EXAMPLES**:\n1. A minimal example usage for transforming shapefile with default settings (--method=triangle) will save result into 'old_shapefile_d96.shp'\n```\nsitra --to_crs=d96 old_shapefile.shp\n```\n\n2. Another example, this time with --method=24regions and specified output:\n\n```\nsitra --to_crs=d96 --method=24regions old_shapefile.shp new_shapefile.shp\n```\n\n3. Example with csv file (note that no csv format specification is needed --> separator and x,y,z columns are automatically guessed!):\n\n```\nsitra --to_crs=d48 --method=24regions Cool_points.csv Back_to_MariaTheresa_times.csv\n```\n\n\n4. In all the above examples the transformation parameters were automatically calculated based on a chosen method and point location.\nBut you can also specify your own parameters, but you have to make sure you pass correct number of parameters in right \norder for the corresponding transformation method. Here is an example for custom affine 6-parametric 2R transformation \n(~triangle) d48-->d96 tranformation. (*Parameters are given in order a,b,c,d,e,f, based on this [standard naming convention](http://geocoordinateconverter.tk/)*):\n\n```\nsitra --to_crs=d96 --method=triangle --params='1.00001;0.000040647;-374.668;-0.00002241;1.000006;494.8428' old_points.csv new_points.csv\n```\n\n5. For a 4-parameteric 2R transformation (~24regions) from d96 to back to d48 using your own transformation parameters, do the following:\n(*example parameters based on a region No.1 of the [d96-->d48 24region transformation](http://www.e-prostor.gov.si/fileadmin/ogs/drz_parametri/24_regij_PARAMETRI_D96-D48.pdf))* :\n```\nsitra --to_crs=d96 --method=24regions --params=\"0.9999873226;0.0009846750;378.755;-493.382\" old_points.csv new_points.csv\n```\n\n\n\n### TODO:\n* Implementation for 3D points (7-parametric transformation) --> 1region,3regions,7regions transformation\n\n\n## Authors\n\n* **Marjan Moderc**, ARSO, Slovenia - *the coding wizardy* - [GitHub](https://github.com/marjanmo)\n* **Regina Kolenc**, ARSO, Slovenia - *mathematical-geodetic background*\n\n## License\n\nThis project is licensed under the MIT License - see the [LICENSE.txt](https://github.com/marjanmo/pysitra/blob/master/LICENSE.txt) file for details",
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/marjanmo/pysitra",
    "keywords": null,
    "license": "MIT",
    "maintainer": null,
    "maintainer_email": null,
    "name": "pysitra",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/pysitra/",
    "release_url": "https://pypi.org/project/pysitra/0.1/",
    "requires_python": null,
    "summary": "Python implementation of some popular slovenian transformation methods (SiTra!)",
    "version": "0.1"
  },
  "releases": {
    "0.1": []
  },
  "urls": []
}