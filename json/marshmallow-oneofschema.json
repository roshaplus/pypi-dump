{
  "info": {
    "author": "Maxim Kulkin",
    "author_email": "maxim.kulkin@gmail.com",
    "bugtrack_url": "",
    "classifiers": [],
    "description": "=======================\r\nMarshmallow-OneOfSchema\r\n=======================\r\n\r\n.. image:: https://travis-ci.org/maximkulkin/marshmallow-oneofschema.svg?branch=master\r\n    :target: https://travis-ci.org/maximkulkin/marshmallow-oneofschema\r\n    :alt: Build Status\r\n\r\nAn extenstion to Marshmallow to support schema (de)multiplexing.\r\n\r\nMarshmallow is a fantastic library for serialization and deserialization of data.\r\nFor more on that project see its `GitHub <https://github.com/marshmallow-code/marshmallow>`_\r\npage or its `Documentation <http://marshmallow.readthedocs.org/en/latest/>`_.\r\n\r\nThis library adds a special kind of schema that actually multiplexes other schemas\r\nbased on object type. When serializing values, it uses get_obj_type() method\r\nto get object type name. Then it uses `type_schemas` name-to-Schema mapping\r\nto get schema for that particular object type, serializes object using that\r\nschema and adds an extra field with name of object type. Deserialization is reverse.\r\n\r\nInstalling\r\n----------\r\n::\r\n\r\n    $ pip install marshmallow-oneofschema\r\n\r\nImporting\r\n---------\r\nHere is how to import the necessary field class\r\n::\r\n\r\n    from marshmallow_oneofschema import OneOfSchema\r\n\r\nExample\r\n-------\r\n\r\nThe code below demonstrates how to setup a schema with a PolyField. For the full context check out the tests.\r\nOnce setup the schema should act like any other schema. If it does not then please file an Issue.\r\n\r\n.. code:: python\r\n\r\n        import marshmallow\r\n        import marshmallow.fields\r\n        from marshmallow_oneofschema import OneOfSchema\r\n\r\n        class Foo(object):\r\n            def __init__(self, foo):\r\n                self.foo = foo\r\n\r\n        class Bar(object):\r\n            def __init__(self, bar):\r\n                self.bar = bar\r\n\r\n        class FooSchema(marshmallow.Schema):\r\n            foo = marshmallow.fields.String(required=True)\r\n\r\n            @marshmallow.post_load\r\n            def make_foo(self, data):\r\n                return Foo(**data)\r\n\r\n        class BarSchema(marshmallow.Schema):\r\n            bar = marshmallow.fields.Integer(required=True)\r\n\r\n            @marshmallow.post_load\r\n            def make_bar(self, data):\r\n                return Bar(**data)\r\n\r\n        class MyUberSchema(OneOfSchema):\r\n            type_schemas = {\r\n                'foo': FooSchema,\r\n                'bar': BarSchema,\r\n            }\r\n\r\n            def get_obj_type(self, obj):\r\n                if isinstance(obj, Foo):\r\n                    return 'foo'\r\n                elif isinstance(obj, Bar):\r\n                    return 'bar'\r\n                else:\r\n                    raise Exception('Unknown object type: %s' % obj.__class__.__name__)\r\n\r\n        MyUberSchema().dump([Foo(foo='hello'), Bar(bar=123)], many=True).data\r\n        # => [{'type': 'foo', 'foo': 'hello'}, {'type': 'bar', 'bar': 123}]\r\n\r\n        MyUberSchema().load([{'type': 'foo', 'foo': 'hello'},\r\n                             {'type': 'bar', 'bar': 123}],\r\n                            many=True).data\r\n        # => [Foo('hello'), Bar(123)]\r\n\r\nBy default get_obj_type() returns obj.__class__.__name__, so you can just reuse that\r\nto save some typing:\r\n\r\n.. code:: python\r\n\r\n        class MyUberSchema(OneOfSchema):\r\n            type_schemas = {\r\n                'Foo': FooSchema,\r\n                'Bar': BarSchema,\r\n            }\r\n\r\nYou can customize type field with `type_field` class property:\r\n\r\n.. code:: python\r\n\r\n        class MyUberSchema(OneOfSchema):\r\n            type_field = 'object_type'\r\n            type_schemas = {\r\n                'Foo': FooSchema,\r\n                'Bar': BarSchema,\r\n            }\r\n\r\n        MyUberSchema().dump([Foo(foo='hello'), Bar(bar=123)], many=True).data\r\n        # => [{'object_type': 'Foo', 'foo': 'hello'}, {'object_type': 'Bar', 'bar': 123}]\r\n\r\nYou can use resulting schema everywhere marshmallow.Schema can be used, e.g.\r\n\r\n.. code:: python\r\n\r\n        import marshmallow as m\r\n        import marshmallow.fields as f\r\n\r\n        class MyOtherSchema(m.Schema):\r\n            items = f.List(f.Nested(MyUberSchema))\r\n\r\nLicense\r\n-------\r\n\r\nMIT licensed. See the bundled `LICENSE <https://github.com/maximkulkin/marshmallow-oneofschema/blob/master/LICENSE>`_ file for more details.",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/maximkulkin/marshmallow-oneofschema",
    "keywords": "",
    "license": "Copyright 2016 Maxim Kulkin",
    "maintainer": "",
    "maintainer_email": "",
    "name": "marshmallow-oneofschema",
    "platform": "",
    "project_url": "https://pypi.org/project/marshmallow-oneofschema/",
    "release_url": "https://pypi.org/project/marshmallow-oneofschema/1.0.4/",
    "requires_python": "",
    "summary": "Marshmallow multiplexing schema",
    "version": "1.0.4"
  },
  "releases": {
    "1.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "fc2cd83e3fa86be53768895d6fbf0f11",
          "sha256": "d1d6dc6d373a29af9a97ebe9ddf5bc2d39620a5c29ded38b4530f71641735203"
        },
        "downloads": 460,
        "filename": "marshmallow-oneofschema-1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "fc2cd83e3fa86be53768895d6fbf0f11",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 4372,
        "upload_time": "2016-03-15T05:18:04",
        "url": "https://files.pythonhosted.org/packages/fc/54/91e9e1e1587ca96a779cdce7e97545b421a0b5eccdb2d8dbe9fb567ac7a1/marshmallow-oneofschema-1.0.tar.gz"
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "11d684ddbf27f4e1cbdbc455bf6f4f25",
          "sha256": "1ffb961d160b7fcb09ef36940ae91ca693ed80595bb532ef32473dbfa99d85c5"
        },
        "downloads": 97,
        "filename": "marshmallow_oneofschema-1.0.1-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "11d684ddbf27f4e1cbdbc455bf6f4f25",
        "packagetype": "bdist_wheel",
        "python_version": "2.7",
        "size": 8033,
        "upload_time": "2016-08-12T00:27:28",
        "url": "https://files.pythonhosted.org/packages/5c/25/72346c5654823572a725d06c14ffc96f328f5434b70c9f42054bd37a30d8/marshmallow_oneofschema-1.0.1-py2.py3-none-any.whl"
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "d4d4618b4e5dbd71a3c5658a75a42672",
          "sha256": "148925c7f86f679737cea14f3720d2f9edf640db30c0d37239b23878eeae7407"
        },
        "downloads": 132,
        "filename": "marshmallow_oneofschema-1.0.2-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d4d4618b4e5dbd71a3c5658a75a42672",
        "packagetype": "bdist_wheel",
        "python_version": "2.7",
        "size": 8058,
        "upload_time": "2016-08-12T01:25:46",
        "url": "https://files.pythonhosted.org/packages/93/bc/08b6a1fa0b42637eaf49dac671588b03aa33f65ece343c0b38ab5d961920/marshmallow_oneofschema-1.0.2-py2.py3-none-any.whl"
      }
    ],
    "1.0.3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "3e30b7460afb072c7356aacc13186a39",
          "sha256": "d8dd37b5802610e4790409c10bcd8d6fb5de8733bed4144980078e4478afb5b9"
        },
        "downloads": 63,
        "filename": "marshmallow_oneofschema-1.0.3-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3e30b7460afb072c7356aacc13186a39",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 8151,
        "upload_time": "2016-11-04T18:43:45",
        "url": "https://files.pythonhosted.org/packages/68/95/7a1002f21810fd8c880a02668f6e2e12f2eed0be7e09dbbf59351e12435b/marshmallow_oneofschema-1.0.3-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "3211aabaa0ad6ad99aefcc37a94475ed",
          "sha256": "62df51f0497edcf3954bcb630cda7cae6a294517ab575aa56cdd618058334c96"
        },
        "downloads": 68,
        "filename": "marshmallow-oneofschema-1.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "3211aabaa0ad6ad99aefcc37a94475ed",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 4822,
        "upload_time": "2016-11-04T18:43:48",
        "url": "https://files.pythonhosted.org/packages/61/b9/e07b6006cea93b0f023f645fac9decfffea8b56becaed8c0dc2348966a5f/marshmallow-oneofschema-1.0.3.tar.gz"
      }
    ],
    "1.0.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "b688853fe1e0ed4782c60c688b236dee",
          "sha256": "72b90c0fe36afd5215c0abfea6ba1c89c12dd375bbbe469fc83916dc9e2e005b"
        },
        "downloads": 0,
        "filename": "marshmallow_oneofschema-1.0.4-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b688853fe1e0ed4782c60c688b236dee",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 8188,
        "upload_time": "2017-04-26T00:54:05",
        "url": "https://files.pythonhosted.org/packages/1f/43/d1a332ed8b9c74ac9df596d77dc75dfe87c37026613b1f72d04550ef524d/marshmallow_oneofschema-1.0.4-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "da5a1bd763ae55f133b152c96183694a",
          "sha256": "1411934066858a71805c3f98dcbdcd24db52e28003988b5515e1189c642524d3"
        },
        "downloads": 0,
        "filename": "marshmallow-oneofschema-1.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "da5a1bd763ae55f133b152c96183694a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 4870,
        "upload_time": "2017-04-26T00:54:07",
        "url": "https://files.pythonhosted.org/packages/1b/31/3977a147d33cc71468ea3509a70c0db78c746bef1bcb3ee808c8670b14a3/marshmallow-oneofschema-1.0.4.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "b688853fe1e0ed4782c60c688b236dee",
        "sha256": "72b90c0fe36afd5215c0abfea6ba1c89c12dd375bbbe469fc83916dc9e2e005b"
      },
      "downloads": 0,
      "filename": "marshmallow_oneofschema-1.0.4-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "b688853fe1e0ed4782c60c688b236dee",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "size": 8188,
      "upload_time": "2017-04-26T00:54:05",
      "url": "https://files.pythonhosted.org/packages/1f/43/d1a332ed8b9c74ac9df596d77dc75dfe87c37026613b1f72d04550ef524d/marshmallow_oneofschema-1.0.4-py2.py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "da5a1bd763ae55f133b152c96183694a",
        "sha256": "1411934066858a71805c3f98dcbdcd24db52e28003988b5515e1189c642524d3"
      },
      "downloads": 0,
      "filename": "marshmallow-oneofschema-1.0.4.tar.gz",
      "has_sig": false,
      "md5_digest": "da5a1bd763ae55f133b152c96183694a",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 4870,
      "upload_time": "2017-04-26T00:54:07",
      "url": "https://files.pythonhosted.org/packages/1b/31/3977a147d33cc71468ea3509a70c0db78c746bef1bcb3ee808c8670b14a3/marshmallow-oneofschema-1.0.4.tar.gz"
    }
  ]
}