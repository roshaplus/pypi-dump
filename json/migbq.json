{
  "info": {
    "author": "jo8937",
    "author_email": "jo8937@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# migbq \r\n\r\nRDBMS Table data upload to Bigquery table.\r\n\r\n## Requirement\r\n\r\n* Python\r\n  - CPython 2.7.x\r\n\r\n* RDBMS (below, DB)  \r\n  - Microsoft SQL Server\r\n  - Mysql (development)\r\n\r\n* Table Spec\r\n  - All table must have Numeric Primary Key Field\r\n\r\n* DB User Grant\r\n  - SELECT, INSERT, UPDATE, CREATE\r\n  - can access DB's metadata ([INFORMATION_SCHEMA] database) \r\n  - some metadata tables create in source RDBMS\r\n  - (If you don't want create table in source, you can use sqlite. fork this project and edit source)\r\n\r\n* Google Cloud SDK \r\n  - install Google Cloud SDK must be required \r\n    - https://cloud.google.com/sdk/downloads\r\n    - https://cloud.google.com/sdk/gcloud/reference/auth/login\r\n\r\n* Pymssql freetds\r\n  - http://www.pymssql.org/en/stable/\r\n\r\n## Install\r\n\r\n```\r\nexport PYMSSQL_BUILD_WITH_BUNDLED_FREETDS=1\r\npip install migbq\r\n```\r\n\r\n## Usage\r\n\r\n### write Configuration File\r\n\r\n* like embulk ( http://www.embulk.org ) \r\n\r\n### Example \r\n\r\n* config.yml \r\n\r\n```yml\r\nin:\r\n  type: mssql\r\n  host: localhost\r\n  user: USER\r\n  password: PASSWORD\r\n  port: 1433\r\n  database: DATABASE\r\n  tables: \r\n    - tbl\r\n    - tbl2\r\n    - tbl3\r\n  batch_size: 50000\r\n  temp_csv_path: /temp/pymig_csv\r\n  temp_csv_path_complete: /temp/pymig_csv_complete \r\nout:\r\n  type: bigquery\r\n  project: GCP_PROJECT\r\n  dataset: BQ_DATASET\r\n```\r\n\r\n### Run  \r\n\r\n#### (1) Execute\r\n\r\n```bash\r\nbqmig run config.yml\r\n```\r\n\r\n#### (2) Check Job Complete\r\n\r\n```bash\r\nbqmig check config.yml\r\n```\r\n\r\n### Run Forever \r\n\r\n* you can add crontab \r\n* migbq have exclusive process lock. so you can add crontab every minute. \r\n* you must add both **run** and **check**  \r\n\r\n## Description\r\n\r\n### run command\r\n\r\n**[1]** select RDBMS table metadata \r\n  - get table primary key name in RDBMS metadata table.\r\n  - get column name and type fields in RDBMS metadata table.\r\n\r\n**[2]** select RDBMS Primary key value range \r\n  - get min / max PK of table \r\n\r\n**[3]** select data in primary key range\r\n  - select with pk min and min + batch_size\r\n\r\n```sql\r\n\tselect * from tbl where idx => 1 and idx < 100;\r\n```\r\n\r\n  - create file **pymig-tbl-idx-1-100** \r\n  - gzip csv  \r\n\r\n**[4]** upload csv file to bigquery  \r\n  - direct upload to bigquery table. not upload to GCS (quota exceed can occur)\r\n\r\n**[5]** Repeat 1~4 until over the max primary key. \r\n\r\nFor example, batch_size : 100, max pk is 321, then rdbms query execute like below.\r\n\r\n```sql\r\n\r\nselect * from tbl where idx => 1 and idx < 100;\r\nselect * from tbl where idx => 100 and idx < 200;\r\nselect * from tbl where idx => 200 and idx < 300;\r\nselect * from tbl where idx => 300 and idx < 400;\r\n\r\n-- end \r\n\r\n```\r\n\r\n### check command\r\n\r\n* check bigquery jobid end. \r\n* retry fail job.\r\n\r\n## loadmap\r\n\r\n* parallel loading not supported.  \r\n\r\n\r\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/jo8937/rdbms-to-bigquery-data-loader",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "migbq",
    "platform": "",
    "project_url": "https://pypi.org/project/migbq/",
    "release_url": "https://pypi.org/project/migbq/0.0.14/",
    "requires_dist": [
      "google-cloud-bigquery (==0.27.0)",
      "pyyaml (>=3.12)",
      "concurrent-log-handler (>=0.9.7)",
      "peewee-mssql (>=0.1.0)",
      "pymssql (>=2.1.1)",
      "peewee (>=2.8.5)",
      "ujson (>=1.35)"
    ],
    "requires_python": ">=2.7",
    "summary": "read rdbms table data and upload to bigquery",
    "version": "0.0.14"
  },
  "releases": {
    "0.0.12": [
      {
        "comment_text": "",
        "digests": {
          "md5": "bfb735e6bd5c794cb4eaaba795cdc6d7",
          "sha256": "9c2ecb9fdad720eff0480d1fbdf22e783296a17d0287cac88d9a2332a5d3f4b5"
        },
        "downloads": -1,
        "filename": "migbq-0.0.12-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bfb735e6bd5c794cb4eaaba795cdc6d7",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37885,
        "upload_time": "2017-11-27T12:43:09",
        "url": "https://files.pythonhosted.org/packages/ad/85/fe385ea1f8d7e6c407882384dbb034043113a70204772030f1196811e546/migbq-0.0.12-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "5ae137a9b061eac385919ce29941cb5a",
          "sha256": "6d2edcf244b547dc10f1ee96bc753af260d890b707ba927cdd05e5f62d6893cf"
        },
        "downloads": -1,
        "filename": "migbq-0.0.12.tar.gz",
        "has_sig": false,
        "md5_digest": "5ae137a9b061eac385919ce29941cb5a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30083,
        "upload_time": "2017-11-27T12:43:11",
        "url": "https://files.pythonhosted.org/packages/1d/de/a55899512aed21c550e193baa9889376ce2162685a556414028356dad749/migbq-0.0.12.tar.gz"
      }
    ],
    "0.0.13": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a7df6c3c0d9ce197677fa6810d256234",
          "sha256": "f2fd928a2d56d31b82bb4eff5bf2680f8e9f8a0f59fdaf964905a7c8d82a8df9"
        },
        "downloads": -1,
        "filename": "migbq-0.0.13-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a7df6c3c0d9ce197677fa6810d256234",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37889,
        "upload_time": "2017-11-27T12:45:22",
        "url": "https://files.pythonhosted.org/packages/e3/17/d98a90bde99d4cc136a28fc44844f5251ea1f9b01e681585dcf9df25b389/migbq-0.0.13-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "ef567075350868806229e8926e8051f9",
          "sha256": "042b001ac486a2966b0a3a9f8e622d767c7067b37a8a18b6b7acee8cfe81f69b"
        },
        "downloads": -1,
        "filename": "migbq-0.0.13.tar.gz",
        "has_sig": false,
        "md5_digest": "ef567075350868806229e8926e8051f9",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30086,
        "upload_time": "2017-11-27T12:45:23",
        "url": "https://files.pythonhosted.org/packages/77/55/a96700f140d29e5857357145579e3dd3fe92a7f5cf037aad7bf786cbdc5b/migbq-0.0.13.tar.gz"
      }
    ],
    "0.0.14": [
      {
        "comment_text": "",
        "digests": {
          "md5": "48d10cbe333c06060fbcac1b2533e59f",
          "sha256": "ef92d624b4bc3b0f88a703f6d231c1e59cf43404f7ef024ae8774b340063a0e1"
        },
        "downloads": -1,
        "filename": "migbq-0.0.14-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "48d10cbe333c06060fbcac1b2533e59f",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37922,
        "upload_time": "2017-11-27T13:01:15",
        "url": "https://files.pythonhosted.org/packages/0f/20/2cc56bc807ba41f559521c5f05992035f089763ad2cc4961574861a850b1/migbq-0.0.14-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "829bc8ac92dbcf6717e9f3565e22113e",
          "sha256": "abd2c14a47cf3e6edc197c105f5b27605cf6d79b4b03f0a70cefc79bb71ff478"
        },
        "downloads": -1,
        "filename": "migbq-0.0.14.tar.gz",
        "has_sig": false,
        "md5_digest": "829bc8ac92dbcf6717e9f3565e22113e",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30109,
        "upload_time": "2017-11-27T13:01:23",
        "url": "https://files.pythonhosted.org/packages/49/07/f6d625ba9a2470c04335f56663bd7a054cd87f02d40397685bd953caff6c/migbq-0.0.14.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "48d10cbe333c06060fbcac1b2533e59f",
        "sha256": "ef92d624b4bc3b0f88a703f6d231c1e59cf43404f7ef024ae8774b340063a0e1"
      },
      "downloads": -1,
      "filename": "migbq-0.0.14-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "48d10cbe333c06060fbcac1b2533e59f",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "size": 37922,
      "upload_time": "2017-11-27T13:01:15",
      "url": "https://files.pythonhosted.org/packages/0f/20/2cc56bc807ba41f559521c5f05992035f089763ad2cc4961574861a850b1/migbq-0.0.14-py2.py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "829bc8ac92dbcf6717e9f3565e22113e",
        "sha256": "abd2c14a47cf3e6edc197c105f5b27605cf6d79b4b03f0a70cefc79bb71ff478"
      },
      "downloads": -1,
      "filename": "migbq-0.0.14.tar.gz",
      "has_sig": false,
      "md5_digest": "829bc8ac92dbcf6717e9f3565e22113e",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 30109,
      "upload_time": "2017-11-27T13:01:23",
      "url": "https://files.pythonhosted.org/packages/49/07/f6d625ba9a2470c04335f56663bd7a054cd87f02d40397685bd953caff6c/migbq-0.0.14.tar.gz"
    }
  ]
}