{
  "info": {
    "author": "jo8937",
    "author_email": "jo8937@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# migbq \r\n\r\nRDBMS Table data upload to Bigquery table.\r\n\r\n## Requirement\r\n\r\n* Python\r\n  - CPython 2.7.x\r\n\r\n* RDBMS (below, DB)  \r\n  - Microsoft SQL Server\r\n  - Mysql (development)\r\n\r\n* Table Spec\r\n  - All table must have Numeric Primary Key Field\r\n\r\n* DB User Grant\r\n  - SELECT, INSERT, UPDATE, CREATE\r\n  - can access DB's metadata ([INFORMATION_SCHEMA] database) \r\n  - some metadata tables create in source RDBMS\r\n  - (If you don't want create table in source, you can use sqlite. fork this project and edit source)\r\n\r\n* Google Cloud SDK \r\n  - install Google Cloud SDK must be required \r\n    - https://cloud.google.com/sdk/downloads\r\n    - https://cloud.google.com/sdk/gcloud/reference/auth/login\r\n\r\n* Pymssql freetds\r\n  - http://www.pymssql.org/en/stable/\r\n\r\n## Install\r\n\r\n```\r\nexport PYMSSQL_BUILD_WITH_BUNDLED_FREETDS=1\r\npip install migbq\r\n```\r\n\r\n## Usage\r\n\r\n### write Configuration File\r\n\r\n* like embulk ( http://www.embulk.org ) \r\n\r\n### Example \r\n\r\n#### general congif file\r\n* config.yml \r\n\r\n```yml\r\nin:\r\n  type: mssql\r\n  host: localhost\r\n  user: USER\r\n  password: PASSWORD\r\n  port: 1433\r\n  database: DATABASE\r\n  tables: \r\n    - tbl\r\n    - tbl2\r\n    - tbl3\r\n  batch_size: 50000\r\n  temp_csv_path: /temp/pymig_csv\r\n  temp_csv_path_complete: /temp/pymig_csv_complete \r\nout:\r\n  type: bigquery\r\n  project: GCP_PROJECT\r\n  dataset: BQ_DATASET\r\n```\r\n\r\n#### jinja2 template \r\n\r\n* config.j2.yml\r\n - variable is enviromant variable only.\r\n - file extension is **.j2.yml** \r\n\r\n```yml\r\nin:\r\n  type: mssql\r\n{% include \"mssql-connect.yml\" %}\r\n  tables: \r\n    - tbl\r\n    - tbl2\r\n    - tbl3\r\n  batch_size: 50000\r\n  temp_csv_path: /temp/pymig_csv\r\n  temp_csv_path_complete: /temp/pymig_csv_complete \r\nout:\r\n  type: bigquery\r\n  project: {{ env.GCP_PROJECT }}\r\n  dataset: BQ_DATASET\r\n```\r\n\r\n\r\n### Run  \r\n\r\n#### (1) Execute\r\n\r\n```bash\r\nbqmig run config.yml\r\n```\r\n\r\n#### (2) Check Job Complete\r\n\r\n```bash\r\nbqmig check config.yml\r\n```\r\n\r\n\r\n#### (3) Check table count equals  \r\n\r\n```bash\r\nbqmig sync config.yml\r\n```\r\n\r\n* Primary Key base count check. \r\n\r\n### Run Forever \r\n\r\n* you can add crontab \r\n* migbq have exclusive process lock. so you can add crontab every minute. \r\n* you must add both **run** and **check**  \r\n\r\n\r\n## Description\r\n\r\n### run command\r\n\r\n**[1]** select RDBMS table metadata \r\n  - get table primary key name in RDBMS metadata table.\r\n  - get column name and type fields in RDBMS metadata table.\r\n\r\n**[2]** select RDBMS Primary key value range \r\n  - get min / max PK of table \r\n\r\n**[3]** select data in primary key range\r\n  - select with pk min and min + batch_size\r\n\r\n```sql\r\n\tselect * from tbl where idx => 1 and idx < 100;\r\n```\r\n\r\n  - create file **pymig-tbl-idx-1-100** \r\n  - gzip csv  \r\n\r\n**[4]** upload csv file to bigquery  \r\n  - direct upload to bigquery table. not upload to GCS (quota exceed can occur)\r\n\r\n**[5]** Repeat 1~4 until over the max primary key. \r\n\r\nFor example, batch_size : 100, max pk is 321, then rdbms query execute like below.\r\n\r\n```sql\r\n\r\nselect * from tbl where idx => 1 and idx < 100;\r\nselect * from tbl where idx => 100 and idx < 200;\r\nselect * from tbl where idx => 200 and idx < 300;\r\nselect * from tbl where idx => 300 and idx < 400;\r\n\r\n-- end \r\n\r\n```\r\n\r\n### check command\r\n\r\n* check bigquery jobid end. \r\n* retry fail job.\r\n\r\n\r\n### Log file of program\r\n\r\n* log file create in config file's sub directory [log]\r\n\r\n### Pid file of program\r\n\r\n* pid file provide unique process for unique command. created at below directory. exclusive file lock.\r\n\r\n\r\n```\r\n/tmp\r\n```\r\n\r\n## loadmap\r\n\r\n* parallel loading not supported.  \r\n\r\n\r\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/jo8937/rdbms-to-bigquery-data-loader",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "migbq",
    "platform": "",
    "project_url": "https://pypi.org/project/migbq/",
    "release_url": "https://pypi.org/project/migbq/0.0.21/",
    "requires_dist": [
      "Jinja2 (>=2.10)",
      "google-cloud-bigquery (==0.27.0)",
      "pyyaml (>=3.12)",
      "concurrent-log-handler (>=0.9.7)",
      "peewee-mssql (>=0.1.0)",
      "pymssql (>=2.1.1)",
      "peewee (>=2.8.5)",
      "ujson (>=1.35)"
    ],
    "requires_python": ">=2.7",
    "summary": "read rdbms table data and upload to bigquery",
    "version": "0.0.21"
  },
  "releases": {
    "0.0.12": [
      {
        "comment_text": "",
        "digests": {
          "md5": "bfb735e6bd5c794cb4eaaba795cdc6d7",
          "sha256": "9c2ecb9fdad720eff0480d1fbdf22e783296a17d0287cac88d9a2332a5d3f4b5"
        },
        "downloads": -1,
        "filename": "migbq-0.0.12-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bfb735e6bd5c794cb4eaaba795cdc6d7",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37885,
        "upload_time": "2017-11-27T12:43:09",
        "url": "https://files.pythonhosted.org/packages/ad/85/fe385ea1f8d7e6c407882384dbb034043113a70204772030f1196811e546/migbq-0.0.12-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "5ae137a9b061eac385919ce29941cb5a",
          "sha256": "6d2edcf244b547dc10f1ee96bc753af260d890b707ba927cdd05e5f62d6893cf"
        },
        "downloads": -1,
        "filename": "migbq-0.0.12.tar.gz",
        "has_sig": false,
        "md5_digest": "5ae137a9b061eac385919ce29941cb5a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30083,
        "upload_time": "2017-11-27T12:43:11",
        "url": "https://files.pythonhosted.org/packages/1d/de/a55899512aed21c550e193baa9889376ce2162685a556414028356dad749/migbq-0.0.12.tar.gz"
      }
    ],
    "0.0.13": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a7df6c3c0d9ce197677fa6810d256234",
          "sha256": "f2fd928a2d56d31b82bb4eff5bf2680f8e9f8a0f59fdaf964905a7c8d82a8df9"
        },
        "downloads": -1,
        "filename": "migbq-0.0.13-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a7df6c3c0d9ce197677fa6810d256234",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37889,
        "upload_time": "2017-11-27T12:45:22",
        "url": "https://files.pythonhosted.org/packages/e3/17/d98a90bde99d4cc136a28fc44844f5251ea1f9b01e681585dcf9df25b389/migbq-0.0.13-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "ef567075350868806229e8926e8051f9",
          "sha256": "042b001ac486a2966b0a3a9f8e622d767c7067b37a8a18b6b7acee8cfe81f69b"
        },
        "downloads": -1,
        "filename": "migbq-0.0.13.tar.gz",
        "has_sig": false,
        "md5_digest": "ef567075350868806229e8926e8051f9",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30086,
        "upload_time": "2017-11-27T12:45:23",
        "url": "https://files.pythonhosted.org/packages/77/55/a96700f140d29e5857357145579e3dd3fe92a7f5cf037aad7bf786cbdc5b/migbq-0.0.13.tar.gz"
      }
    ],
    "0.0.14": [
      {
        "comment_text": "",
        "digests": {
          "md5": "48d10cbe333c06060fbcac1b2533e59f",
          "sha256": "ef92d624b4bc3b0f88a703f6d231c1e59cf43404f7ef024ae8774b340063a0e1"
        },
        "downloads": -1,
        "filename": "migbq-0.0.14-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "48d10cbe333c06060fbcac1b2533e59f",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37922,
        "upload_time": "2017-11-27T13:01:15",
        "url": "https://files.pythonhosted.org/packages/0f/20/2cc56bc807ba41f559521c5f05992035f089763ad2cc4961574861a850b1/migbq-0.0.14-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "829bc8ac92dbcf6717e9f3565e22113e",
          "sha256": "abd2c14a47cf3e6edc197c105f5b27605cf6d79b4b03f0a70cefc79bb71ff478"
        },
        "downloads": -1,
        "filename": "migbq-0.0.14.tar.gz",
        "has_sig": false,
        "md5_digest": "829bc8ac92dbcf6717e9f3565e22113e",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30109,
        "upload_time": "2017-11-27T13:01:23",
        "url": "https://files.pythonhosted.org/packages/49/07/f6d625ba9a2470c04335f56663bd7a054cd87f02d40397685bd953caff6c/migbq-0.0.14.tar.gz"
      }
    ],
    "0.0.15": [
      {
        "comment_text": "",
        "digests": {
          "md5": "85f2bed19d2436bd1e14215bb5145fac",
          "sha256": "1b58d1df0ebd873514c9b2a6dec933a9d2f6d01473217f4d3b530efa30b12c6a"
        },
        "downloads": -1,
        "filename": "migbq-0.0.15-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "85f2bed19d2436bd1e14215bb5145fac",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 37917,
        "upload_time": "2017-11-28T07:09:40",
        "url": "https://files.pythonhosted.org/packages/54/45/093e85d90d23f748e96fafd6c21c875ab6ddf07e98dc7acc6a701579d9b7/migbq-0.0.15-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "4aa20640f591fc88474dc217e791f98d",
          "sha256": "f1a76fc73533551f3864cdfa0ef5aa853da275335fdbf2a1a2044c70bdb9086d"
        },
        "downloads": -1,
        "filename": "migbq-0.0.15.tar.gz",
        "has_sig": false,
        "md5_digest": "4aa20640f591fc88474dc217e791f98d",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30294,
        "upload_time": "2017-11-28T07:09:42",
        "url": "https://files.pythonhosted.org/packages/3c/fd/b224d66c97f21c34c723d28ee339fc902ff3455200b595cba9a3b8653821/migbq-0.0.15.tar.gz"
      }
    ],
    "0.0.16": [
      {
        "comment_text": "",
        "digests": {
          "md5": "1bfe5355464fbd95b65c7dbfa1730844",
          "sha256": "c50d6ccbb93e943e4c0350eb9f83cefca89dd1b5c9ff5ac3369d726b1c5f233b"
        },
        "downloads": -1,
        "filename": "migbq-0.0.16-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "1bfe5355464fbd95b65c7dbfa1730844",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38162,
        "upload_time": "2017-11-28T07:20:11",
        "url": "https://files.pythonhosted.org/packages/24/c4/fbb5f5d2d5732899bd73a60b02d9af74f54bb9afcfa52f83522b8ccb1aff/migbq-0.0.16-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "3d87001c3662324540bfd7dc0f827a59",
          "sha256": "7a1f5bea9b08c2ab1934dc309b27042964c17cea2d05255e05be48863c29cc96"
        },
        "downloads": -1,
        "filename": "migbq-0.0.16.tar.gz",
        "has_sig": false,
        "md5_digest": "3d87001c3662324540bfd7dc0f827a59",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30436,
        "upload_time": "2017-11-28T07:20:14",
        "url": "https://files.pythonhosted.org/packages/93/12/62d7ccabe6577c90dd39d9cb7764e52a8becd49754dbb02093dfe019b09d/migbq-0.0.16.tar.gz"
      }
    ],
    "0.0.17": [
      {
        "comment_text": "",
        "digests": {
          "md5": "0358a09b869ce1f507b2c7397b4bbdd1",
          "sha256": "f3e9e8c582344b03f8ff4ca918b4c13bcd7a4cfaf0414d48e43085157fd624ec"
        },
        "downloads": -1,
        "filename": "migbq-0.0.17-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0358a09b869ce1f507b2c7397b4bbdd1",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38344,
        "upload_time": "2017-11-28T08:17:23",
        "url": "https://files.pythonhosted.org/packages/fd/38/33a50d3ee508138e9615d5e116628d268315bd8b2e926323cb100c8819ff/migbq-0.0.17-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "2c78ce296aabef571b5d432d8c75c88d",
          "sha256": "5c902d18082b42bbe902c8c148608c066b6b4654d70c06773663ca61ec532d09"
        },
        "downloads": -1,
        "filename": "migbq-0.0.17.tar.gz",
        "has_sig": false,
        "md5_digest": "2c78ce296aabef571b5d432d8c75c88d",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30629,
        "upload_time": "2017-11-28T08:17:25",
        "url": "https://files.pythonhosted.org/packages/b6/f8/01bc475188207b3b16f8863a954a52cd57e9fc9e3583cc30b15c69731f4b/migbq-0.0.17.tar.gz"
      }
    ],
    "0.0.18": [
      {
        "comment_text": "",
        "digests": {
          "md5": "74073f12e7f6f3500b845c46d0b4caec",
          "sha256": "d682bff5ac2e3f6f0dcaa76408eb38ff6fdaf3879f47db19c7c2cc641429c040"
        },
        "downloads": -1,
        "filename": "migbq-0.0.18-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "74073f12e7f6f3500b845c46d0b4caec",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38379,
        "upload_time": "2017-11-28T09:04:46",
        "url": "https://files.pythonhosted.org/packages/2f/7a/4c07a32acde1e71314341fd2ccbcd79254492b940a34f274287010758a14/migbq-0.0.18-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "a6eb7e302a9d855ab85df509d4cbc89e",
          "sha256": "ab882d8c87695d0b84a729756ad3e40fc123e4d35eb20811084521ed25c53b1c"
        },
        "downloads": -1,
        "filename": "migbq-0.0.18.tar.gz",
        "has_sig": false,
        "md5_digest": "a6eb7e302a9d855ab85df509d4cbc89e",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30652,
        "upload_time": "2017-11-28T09:04:48",
        "url": "https://files.pythonhosted.org/packages/e9/93/95dc197d6b0aa45963235df01bdc7d546bd2aa10d8b1e0b303fdd82973f8/migbq-0.0.18.tar.gz"
      }
    ],
    "0.0.19": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a04c1d8d890f519e088f19ae0b7d7174",
          "sha256": "dd01f895946c4b97b71875de18a3c9e6924d61cd541ff8741471cab7cb6ed167"
        },
        "downloads": -1,
        "filename": "migbq-0.0.19-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a04c1d8d890f519e088f19ae0b7d7174",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38623,
        "upload_time": "2017-11-28T09:32:58",
        "url": "https://files.pythonhosted.org/packages/13/71/b7d51dfe194fd0cda3a2e39ce0185679a287fa52db8ab323851e667cde27/migbq-0.0.19-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "8cb9af9cbfb626edbd5337ec89d434a4",
          "sha256": "56af7932f2d74d8095feaa564f44e76083a54f5485aff8e97e6914b0e67578b1"
        },
        "downloads": -1,
        "filename": "migbq-0.0.19.tar.gz",
        "has_sig": false,
        "md5_digest": "8cb9af9cbfb626edbd5337ec89d434a4",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 30837,
        "upload_time": "2017-11-28T09:33:05",
        "url": "https://files.pythonhosted.org/packages/e0/cd/ead6ced9ab8eb694e0a47b62de29e783fbc92bd675fc19fc0f1e82956dc2/migbq-0.0.19.tar.gz"
      }
    ],
    "0.0.20": [
      {
        "comment_text": "",
        "digests": {
          "md5": "1db2488ad6acb7d85af91ac1d4a0aca0",
          "sha256": "b60da6422a1d44f99b6550d3e34e2f32d5711d2310166d0ce4b19dce8e1c5142"
        },
        "downloads": -1,
        "filename": "migbq-0.0.20-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "1db2488ad6acb7d85af91ac1d4a0aca0",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38935,
        "upload_time": "2017-11-28T12:16:55",
        "url": "https://files.pythonhosted.org/packages/68/48/870df3f53898f6eef8b2e4652ad0b8e75a38e411c453c6cb86402809b0a7/migbq-0.0.20-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "8233ef58ee7392b308c7ba947980cf60",
          "sha256": "f20a89e5e332b5647375c43ba3784eeb754b0c16bef629c2a5e662bc6ed37d1c"
        },
        "downloads": -1,
        "filename": "migbq-0.0.20.tar.gz",
        "has_sig": false,
        "md5_digest": "8233ef58ee7392b308c7ba947980cf60",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 31158,
        "upload_time": "2017-11-28T12:16:57",
        "url": "https://files.pythonhosted.org/packages/b6/c7/9d2a25e024e02681133a8ca0e17a62d6d6a3712901e1f18f5ad878065fd4/migbq-0.0.20.tar.gz"
      }
    ],
    "0.0.21": [
      {
        "comment_text": "",
        "digests": {
          "md5": "91904d8501ebf023f98e5e3bea7beb27",
          "sha256": "28ebb3f2b0291db715bff5aa6454f03a40d3ffbdb7fa691be0edd6ce6ed5679f"
        },
        "downloads": -1,
        "filename": "migbq-0.0.21-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "91904d8501ebf023f98e5e3bea7beb27",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 38936,
        "upload_time": "2017-11-28T12:19:15",
        "url": "https://files.pythonhosted.org/packages/0f/88/4cb91d07280881509ca8f0ce68beb68e9a3ad9bf97dfb62f6dc37c545e96/migbq-0.0.21-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "42b109d578fbeedd5717effec701d82f",
          "sha256": "7088fe1caa9eaf3b3b1280902338f2e2cf3f8e56ac29619c94234341c747c36a"
        },
        "downloads": -1,
        "filename": "migbq-0.0.21.tar.gz",
        "has_sig": false,
        "md5_digest": "42b109d578fbeedd5717effec701d82f",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 31148,
        "upload_time": "2017-11-28T12:19:19",
        "url": "https://files.pythonhosted.org/packages/8a/c0/76c3b0c392c4754eef4c3af76641343f8ab73bfa36122c40f65df28d6c6f/migbq-0.0.21.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "91904d8501ebf023f98e5e3bea7beb27",
        "sha256": "28ebb3f2b0291db715bff5aa6454f03a40d3ffbdb7fa691be0edd6ce6ed5679f"
      },
      "downloads": -1,
      "filename": "migbq-0.0.21-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "91904d8501ebf023f98e5e3bea7beb27",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "size": 38936,
      "upload_time": "2017-11-28T12:19:15",
      "url": "https://files.pythonhosted.org/packages/0f/88/4cb91d07280881509ca8f0ce68beb68e9a3ad9bf97dfb62f6dc37c545e96/migbq-0.0.21-py2.py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "42b109d578fbeedd5717effec701d82f",
        "sha256": "7088fe1caa9eaf3b3b1280902338f2e2cf3f8e56ac29619c94234341c747c36a"
      },
      "downloads": -1,
      "filename": "migbq-0.0.21.tar.gz",
      "has_sig": false,
      "md5_digest": "42b109d578fbeedd5717effec701d82f",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 31148,
      "upload_time": "2017-11-28T12:19:19",
      "url": "https://files.pythonhosted.org/packages/8a/c0/76c3b0c392c4754eef4c3af76641343f8ab73bfa36122c40f65df28d6c6f/migbq-0.0.21.tar.gz"
    }
  ]
}