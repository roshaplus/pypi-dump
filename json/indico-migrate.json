{
  "info": {
    "author": "Indico Team",
    "author_email": "indico-team@cern.ch",
    "bugtrack_url": "",
    "classifiers": [],
    "description": "**ATTENTION: This module is not yet fully tested, use it at your own risk!**\n\nThis script migrates the database of an Indico 1.2.x server to **version 2.0**.\n\n\nMigrating to Indico 2.0\n-----------------------\n\nPlease refer to the `Upgrade Guide <http://indico.readthedocs.io/en/latest/installation/upgrade/>`_ for instructions on\nhow to upgrade from Indico 1.2 to 2.0.\n\n\nMigration settings\n------------------\n\nThe migration command accepts a series of options that you will have to adjust according to your current Indico setup\nand whichever way you'd like to organize your new installation. We will go over them one by one, please **read carefully**!\n\nThe basic migration command consists of::\n\n    $ indico-migrate <sqlalchemy-uri> <zodb-uri> [--rb-zodb-uri <rb-zodb-uri>]\n\n\n==================\n``sqlalchemy-uri``\n==================\n    This is the URI of your new SQLAlchemy database. If it's located in your local machine, it will look like this::\n\n        postgresql:///indico\n\n    Otherwise, it will be something like ``postgresql://<username>:<password>@<hostname>:<port>/indico``.\n\n\n============\n``zodb-uri``\n============\n    This is the URI of your Indico 1.2 ZODB. It should normally look like this::\n\n        zeo://localhost:9675/indico\n\n    If you're running it on a remote server, it will become ``zeo://<username>:<password>@<hostname>:<port>/indico``\n\n    You can also choose to access the database file directly, instead of going through the ZEO service::\n\n        file:///opt/indico/db/Data.fs\n\n    This is slightly slower than the previous option but can be very useful if all you have is a database file and you\n    don't want to set up a ZEO server.\n\n\n===========================\n``--rb-zodburi`` (optional)\n===========================\n    This option only applies if you were running Indico's Room Booking system and wish to migrate room and reservation\n    information. The URI follows the same rules of ``zodb-uri``. In most cases it will be something like::\n\n        zeo://localhost:9676/indico\n\n\nThis is followed by the relevant options from the following list:\n\n``--system-user-id`` (optional)\n===============================\n    The \"system user\" is a user that performs automatic operations and which will also be used whenever, during the\n    migration process, Indico doesn't manage to figure out who was responsible for a given action.\n\n    *For instance, in Indico < 2.0 we were not keeping track of whoever submitted a paper revision. In 2.0 that is\n    enforced, which is why during the migration we set all revisions as if they were authored by the system user.*\n\n    If you already had an Indico user that you were using for \"bot\" actions, you can specify its (numeric) ID using this\n    option. If that's not the case, you can safely ignore it and a new user will be created automatically.\n\n    Example::\n\n        $ indico-migrate postgresql:///indico2 zeo://127.0.0.1:9675 -v\n\n\n``--default-email`` (mandatory)\n===============================\n    This is an e-mail address that will be used whenever Indico finds invalid addresses it cannot correct.\n    Unfortunately, really old versions of Indico didn't validate e-mail addresses that well, which is why we need a\n    placeholder e-mail to use in case we find an address we cannot understand.\n    E.g. ``broken-indico-identity@myorganization.org``.\n\n\n``--ldap-provider-name`` (optional)\n====================================\n    This is the name of the LDAP provider that will be used in your new config. Existing LDAP identities will be mapped\n    to it. The best choice at this point is to set it to something like ``<your-organization>-ldap``\n    (e.g. ``cern-ldap``). Write down this choice, **you will need it** when configuring Indico 2.0.\n\n\n``--default-group-provider`` (mandatory)\n========================================\n    This is the name of the LDAP provider that will be used to resolve any groups in your new config. Existing LDAP\n    groups will be mapped to the provider with this ID. It will be almost always the same value as that of\n    ``--ldap-provider-name``. Once again, write it down, **you will need it** when configuring Indico 2.0.\n\n\n``--archive-dir`` (mandatory)\n=============================\n    This is the ``ArchiveDir`` that was set in your old ``indico.conf`` (in version 1.2).\n\n\n``--storage-backend`` (mandatory)\n=================================\n    This is the name of the storage backend where migrated files will be kept. This option was added since in Indico\n    2.0 you will be able to set more than one storage backend (thus being able to split your files across different\n    folders and even storage technology). The setup process needs to know the ID you will give to the storage backend\n    where files imported from 1.2 will be kept. Since the directory structure changes slightly in 2.0, we recommend\n    that you set this to something like ``fs-legacy``. Whatever you choose, write it down since **you'll need it** when\n    configuring 2.0.\n\n\n``--symlink-target`` and ``--symlink-backend`` (optional)\n=========================================================\n    These two options are closely related and require each other.\n\n    The sanitization of file names was quite poor in some early versions of Indico. This could lead to files with\n    non-UTF8 names, which would be difficult for Indico 2.0 to deal with. Instead of renaming those files (which is not\n    as simple as it may seem), we chose to instead symlink them and store the name of the link instead. If these options\n    are specified, symlinks to weirdly-named files will be kept in the directory indicated by ``--symlink-target``. They\n    will be associated with the storage backend ID specified in ``--symlink-backend``.\n\n    **NOTE:** This means that in the ``StorageBackends`` option of your new ``indico.conf`` you will have something\n    like::\n\n        StorageBackends = {\n            ...\n            'fs-legacy-symlinks`: '/opt/indico/archive/legacy-symlinks'\n        }\n\n\n``--photo-path`` (optional)\n===========================\n    If ``--rb-zodb-uri`` was specified, this is an optional directory (path) where Indico will be able to find photos\n    of each room. Indico will look inside two directories: ``small_photos`` (thumbnails) and ``large_photos`` and import\n    existing files (``<room_canonical_name>.jpg``) into the database.\n\n\n``--reference-type`` (optional, multiple)\n=========================================\n    If you were storing \"Report Numbers\" (now known as \"External References\"), specify here the IDs of the systems that\n    were being used. Those should correspond to the keys in your ``ReportNumberSystems`` dictionary (Indico 1.2 config).\n    The result should be somethink like ``--reference-type CDS --reference-type EDMS ...``\n\n\n``--default-currency`` (mandatory)\n=========================================\n    This is the code of the currency unit that will be used by default in your server. E.g. ``USD`` or ``EUR``.\n\n\n``--ignore-local-accounts`` (optional flag)\n===========================================\n    This option is meant for servers that were at some point using local accounts (username + password) but have since\n    adopted another authentication method (LDAP + SSO, for instance). If you don't need local accounts anymore and don't\n    want to move the old usernames and password to the new DB (which is probably a good idea), then set this option.\n    This will also save you some migration time.\n\n\n==============\nOther settings\n==============\n\nThese less used settings are meant mainly for debugging purposes. You shouldn't normally use them unless you know what\nyou're doing.\n\n``--no-gui`` (optional flag)\n=========================================\n    This option will disable the curses-like \"graphical\" interface, using plain text instead.\n\n\n``--verbose`` (optional flag)\n=========================================\n    This flag increases the verbosity of the Indico migration command. The amount of information can be overwhelming.\n\n\n``--dblog`` (optional flag)\n=========================================\n    If this option is specified, the migration command will contact the\n    `Indico DB logger <https://github.com/indico/indico/blob/master/bin/utils/db_log.py>`_ running in the local machine\n    and log every request that is made to the PostgreSQL server.\n\n\n``--debug`` (optional flag)\n=========================================\n    This option will launch the migration in debug mode, which means that the user will be given a debugger shell\n    when something goes wrong.\n\n\n``--avoid-storage-check`` (optional flag)\n=========================================\n    **DANGER!**\n    By specifying this option, you're telling Indico it doesn't need to check if a file really exists when migrating it.\n    This will result in a faster migration but as well in **possible data inconsistency and incomplete information**.\n\n\n\n``--save-restore`` (optional flag)\n==================================\n    This option triggers a dump of all intermediate migration data that is kept in memory to a file on disk, called\n    ``indico-migration.yaml``, whenever the migration fails. This allows the process to be resumed from the point\n    at which it failed.\n\n\n``--restore-file`` (optional flag)\n==================================\n    **DANGER!**\n    This option takes a file path as argument. The file in question should be a dump proced with ``--save-restore`` and\n    which will be loaded to memory. The global migration steps that had been performed at the time of the failure will\n    be skipped.\n\n\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/indico/indico-migrate",
    "keywords": "",
    "license": "https://www.gnu.org/licenses/gpl-3.0.txt",
    "maintainer": "",
    "maintainer_email": "",
    "name": "indico-migrate",
    "platform": "",
    "project_url": "https://pypi.org/project/indico-migrate/",
    "release_url": "https://pypi.org/project/indico-migrate/1.0.dev4/",
    "requires_dist": [
      "urwid (==1.3.1)",
      "indico (>=1.9.11.dev3)",
      "github3.py (==0.9.6)",
      "ZODB3 (==3.10.5)"
    ],
    "requires_python": "",
    "summary": "Migration from Indico 1.2 to 2.0",
    "version": "1.0.dev4"
  },
  "releases": {
    "1.0.dev0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "81caf210bcfb589a3e1fd2e11c7abc64",
          "sha256": "d4d63119badb48275aac6cb21823e7f7f02291425a46c55c9cf4704c26047bbd"
        },
        "downloads": 0,
        "filename": "indico_migrate-1.0.dev0-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "81caf210bcfb589a3e1fd2e11c7abc64",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 124490,
        "upload_time": "2017-06-26T12:11:50",
        "url": "https://files.pythonhosted.org/packages/29/e2/feb2421408c10c91239341acc43ac8a7d24f5dc20cf73f46210cf8633ae0/indico_migrate-1.0.dev0-py2-none-any.whl"
      }
    ],
    "1.0.dev1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "e14bd724b9141438feb4af137771cf69",
          "sha256": "a6c0ff78bfbc0f24843600999aac255e57f52b5da60bce3c1c1f807a1e4f794a"
        },
        "downloads": 0,
        "filename": "indico_migrate-1.0.dev1-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "e14bd724b9141438feb4af137771cf69",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 124493,
        "upload_time": "2017-06-26T12:15:01",
        "url": "https://files.pythonhosted.org/packages/19/a8/531775ebb7d8f2c0a424995eba4c65a97616c0fc7e4c90ce24bf05264896/indico_migrate-1.0.dev1-py2-none-any.whl"
      }
    ],
    "1.0.dev2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "29f8f0ff0cf0498b9c938980144d8ea2",
          "sha256": "7e7f599ec34e840d520e9d0cd955e9d2f7c7607538703eae71b7518daa004a5f"
        },
        "downloads": 0,
        "filename": "indico_migrate-1.0.dev2-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "29f8f0ff0cf0498b9c938980144d8ea2",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 124740,
        "upload_time": "2017-06-26T13:06:22",
        "url": "https://files.pythonhosted.org/packages/05/df/07752ef47a97a8ae49ff51814a73aab37f7680122b2988023758e4da0769/indico_migrate-1.0.dev2-py2-none-any.whl"
      }
    ],
    "1.0.dev3": [
      {
        "comment_text": "",
        "digests": {
          "md5": "2b399a07c3e30985b99cd05baad5a9eb",
          "sha256": "f6879b84574a57fbc576e6fd7409c113b156f04ae942393d02edd69e702e22f8"
        },
        "downloads": 0,
        "filename": "indico_migrate-1.0.dev3-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "2b399a07c3e30985b99cd05baad5a9eb",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 124762,
        "upload_time": "2017-06-26T15:13:19",
        "url": "https://files.pythonhosted.org/packages/d0/57/948defae64776f882142fc41f74cb637e56a532fa654e6d15e5332dff4b0/indico_migrate-1.0.dev3-py2-none-any.whl"
      }
    ],
    "1.0.dev4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "9187107c2bb4b5bd9d0fb5b577545a6c",
          "sha256": "1cbb2262a86d2a042d08b0bfe4f5cb97db0a801748421e4cf023ddcd67836a25"
        },
        "downloads": 0,
        "filename": "indico_migrate-1.0.dev4-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "9187107c2bb4b5bd9d0fb5b577545a6c",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 124836,
        "upload_time": "2017-06-27T08:55:52",
        "url": "https://files.pythonhosted.org/packages/96/e2/cfdc9fbeca3fb6c5cb95612d02cd71fa084391fb608ffacefa47fabd75bf/indico_migrate-1.0.dev4-py2-none-any.whl"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "9187107c2bb4b5bd9d0fb5b577545a6c",
        "sha256": "1cbb2262a86d2a042d08b0bfe4f5cb97db0a801748421e4cf023ddcd67836a25"
      },
      "downloads": 0,
      "filename": "indico_migrate-1.0.dev4-py2-none-any.whl",
      "has_sig": false,
      "md5_digest": "9187107c2bb4b5bd9d0fb5b577545a6c",
      "packagetype": "bdist_wheel",
      "python_version": "py2",
      "size": 124836,
      "upload_time": "2017-06-27T08:55:52",
      "url": "https://files.pythonhosted.org/packages/96/e2/cfdc9fbeca3fb6c5cb95612d02cd71fa084391fb608ffacefa47fabd75bf/indico_migrate-1.0.dev4-py2-none-any.whl"
    }
  ]
}