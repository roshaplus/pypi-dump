{
  "info": {
    "author": "Tyler Crumpton",
    "author_email": "tyler.crumpton@gmail.com",
    "bugtrack_url": "",
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: ISC License (ISCL)",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.6",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Topic :: Software Development :: Version Control"
    ],
    "description": ".. image:: https://travis-ci.org/habnabit/vcversioner.png\r\n\r\n===========\r\nvcversioner\r\n===========\r\n\r\n`Elevator pitch`_: you can write a ``setup.py`` with no version information\r\nspecified, and vcversioner will find a recent, properly-formatted VCS tag and\r\nextract a version from it.\r\n\r\nIt's much more convenient to be able to use your version control system's\r\ntagging mechanism to derive a version number than to have to duplicate that\r\ninformation all over the place. I eventually ended up copy-pasting the same\r\ncode into a couple different ``setup.py`` files just to avoid duplicating\r\nversion information. But, copy-pasting is dumb and unit testing ``setup.py``\r\nfiles is hard. This code got factored out into vcversioner.\r\n\r\n\r\nBasic usage\r\n-----------\r\n\r\nvcversioner installs itself as a setuptools hook, which makes its use\r\nexceedingly simple::\r\n\r\n  from setuptools import setup\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={},\r\n  )\r\n\r\nThe presence of a ``vcversioner`` argument automagically activates vcversioner\r\nand updates the project's version. The parameter to the ``vcversioner``\r\nargument can also be a dict of keyword arguments which |find_version|\r\nwill be called with.\r\n\r\nTo allow tarballs to be distributed without requiring a ``.git`` (or ``.hg``,\r\netc.) directory, vcversioner will also write out a file named (by default)\r\n``version.txt``. Then, if there is no VCS program or the program is unable to\r\nfind any version information, vcversioner will read version information from\r\nthe ``version.txt`` file. However, this file needs to be included in a\r\ndistributed tarball, so the following line should be added to ``MANIFEST.in``::\r\n\r\n  include version.txt\r\n\r\nThis isn't necessary if ``setup.py`` will always be run from a checkout, but\r\notherwise is essential for vcversioner to know what version to use.\r\n\r\nThe name ``version.txt`` also can be changed by specifying the ``version_file``\r\nparameter. For example::\r\n\r\n  from setuptools import setup\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={\r\n          'version_file': 'custom_version.txt',\r\n      },\r\n  )\r\n\r\nFor compatibility with `semantic versioning`_, ``vcversioner`` will strip\r\nleading ``'v'``\\ s  from version tags. That is, the tag ``v1.0`` will be\r\ntreated as if it was ``1.0``.\r\n\r\nOther prefixes can be specified to be stripped by using the ``strip_prefix``\r\nargument to vcversioner. For compatibility with ``git-dch``, one could specify\r\nthe ``strip_prefix`` as ``'debian/'``.\r\n\r\n\r\nNon-hook usage\r\n--------------\r\n\r\nIt's not necessary to depend on vcversioner; while `pip`_ will take care of\r\ndependencies automatically, sometimes having a self-contained project is\r\nsimpler. vcversioner is a single file which is easy to add to a project. Simply\r\ncopy the entire ``vcversioner.py`` file adjacent to the existing ``setup.py``\r\nfile and update the usage slightly::\r\n\r\n  from setuptools import setup\r\n  import vcversioner\r\n\r\n  setup(\r\n      # [...]\r\n      version=vcversioner.find_version().version,\r\n  )\r\n\r\nThis is necessary because the ``vcversioner`` distutils hook won't be\r\navailable.\r\n\r\n\r\nVersion modules\r\n---------------\r\n\r\n``setup.py`` isn't the only place that version information gets duplicated. By\r\ngenerating a version module, the ``__init__.py`` file of a package can import\r\nversion information. For example, with a package named ``spam``::\r\n\r\n  from setuptools import setup\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={\r\n          'version_module_paths': ['spam/_version.py'],\r\n      },\r\n  )\r\n\r\nThis will generate a ``spam/_version.py`` file that defines ``__version__`` and\r\n``__revision__``. Then, in ``spam/__init__.py``::\r\n\r\n  from spam._version import __version__, __revision__\r\n\r\nSince this acts like (and *is*) a regular python module, changing\r\n``MANIFEST.in`` is not required.\r\n\r\n\r\nCustomizing VCS commands\r\n------------------------\r\n\r\nvcversioner by default tries to detect which VCS is being used and picks a\r\ncommand to run based on that. For git, that is ``git --git-dir %(root)s/.git\r\ndescribe --tags --long``. For hg, that is ``hg log -R %(root)s -r . --template\r\n'{latesttag}-{latesttagdistance}-hg{node|short}'``.\r\n\r\nAny command should output a string that describes the current commit in the\r\nformat ``1.0-0-gdeadbeef``. Specifically, that is ``<version number>-<number of\r\ncommits between the current commit and the version tagged commit>-<revision>``.\r\nThe revision should have a VCS-specific prefix, e.g. ``g`` for git and ``hg``\r\nfor hg.\r\n\r\nHowever, sometimes this isn't sufficient. If someone wanted to only use\r\nannotated tags, the git command could be amended like so::\r\n\r\n  from setuptools import setup\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={\r\n          'vcs_args': ['git', 'describe', '--long'],\r\n      },\r\n  )\r\n\r\nThe ``vcs_args`` parameter must always be a list of strings, which will not be\r\ninterpreted by the shell. This is the same as what ``subprocess.Popen``\r\nexpects.\r\n\r\nThis argument used to be spelled ``git_args`` until support for multiple VCS\r\nsystems was added.\r\n\r\n\r\nDevelopment versions\r\n--------------------\r\n\r\nvcversioner can also automatically make a version that corresponds to a commit\r\nthat isn't itself tagged. Following `PEP 386`_, this is done by adding a\r\n``.post`` suffix to the version specified by a tag on an earlier commit. For\r\nexample, if the current commit is three revisions past the ``1.0`` tag, the\r\ncomputed version will be ``1.0.post3``.\r\n\r\nThis behavior can be disabled by setting the ``include_dev_version`` parameter\r\nto ``False``. In that case, the aforementioned untagged commit's version would\r\nbe just ``1.0``.\r\n\r\n`PEP 440`_ states that versions created during development cycles should use\r\nthe ``.dev`` suffix instead of ``.post``. This suffix can be used by setting \r\nthe ``use_dev_not_post`` parameter to ``True``. This suffix references a \r\ncorresponding future release, so vcversioner will assume that the future\r\nrelease is a single version higher than the current commit. For example, if the \r\ncurrent commit is one revision past the ``2.0.1`` tag, the computed version\r\nwill be ``2.0.2dev1``.\r\n\r\nSince hg requires a commit to make a tag, there's a parameter\r\n``decrement_dev_version`` to subtract one from the number of commits after the\r\nmost recent tag. If the VCS used is detected to be hg (i.e. the revision starts\r\nwith ``'hg'``) and ``decrement_dev_version`` is not specified as ``False``,\r\n``decrement_dev_version`` will be automatically set to ``True``.\r\n\r\n\r\nProject roots\r\n-------------\r\n\r\nIn order to prevent contamination from other source repositories, vcversioner\r\nin the 1.x version series will only look in the project root directory for\r\nrepositories. The project root defaults to the current working directory, which\r\nis often the case when running setup.py. This can be changed by specifying the\r\n``root`` parameter. Someone concerned with being able to run setup.py from\r\ndirectories other than the directory containing setup.py should determine the\r\nproject root from ``__file__`` in setup.py::\r\n\r\n  from setuptools import setup\r\n  import os\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={\r\n          'root': os.path.dirname(os.path.abspath(__file__)),\r\n      },\r\n  )\r\n\r\nTo get the same behavior in the 0.x version series, ``vcs_args`` can be set to\r\ninclude the ``--git-dir`` flag::\r\n\r\n  from setuptools import setup\r\n\r\n  setup(\r\n      # [...]\r\n      setup_requires=['vcversioner'],\r\n      vcversioner={\r\n          vcs_args=['git', '--git-dir', '%(root)s/.git', 'describe',\r\n                    '--tags', '--long'],\r\n      },\r\n  )\r\n\r\nBy default, ``version.txt`` is also read from the project root.\r\n\r\n\r\nSubstitutions\r\n~~~~~~~~~~~~~\r\n\r\nAs seen above, *root*, *version_file*, and *vcs_args* each support some\r\nsubstitutions:\r\n\r\n``%(root)s``\r\n  The value provided for *root*. This is not available for the *root*\r\n  parameter itself.\r\n\r\n``%(pwd)s``\r\n  The current working directory.\r\n\r\n``/`` will automatically be translated into the correct path separator for the\r\ncurrent platform, such as ``:`` or ``\\``.\r\n\r\n\r\nSphinx documentation\r\n--------------------\r\n\r\n`Sphinx`_ documentation is yet another place where version numbers get\r\nduplicated. Fortunately, since sphinx configuration is python code, vcversioner\r\ncan be used there too. Assuming vcversioner is installed system-wide, this is\r\nquite easy. Since Sphinx is typically run with the current working directory as\r\n``<your project root>/docs``, it's necessary to tell vcversioner where the\r\nproject root is. Simply change your ``conf.py`` to include::\r\n\r\n  import vcversioner\r\n  version = release = vcversioner.find_version(root='..').version\r\n\r\nThis assumes that your project root is the parent directory of the current\r\nworking directory. A slightly longer version which is a little more robust\r\nwould be::\r\n\r\n  import vcversioner, os\r\n  version = release = vcversioner.find_version(\r\n      root=os.path.dirname(os.path.dirname(os.path.abspath(__file__)))).version\r\n\r\nThis version is more robust because it finds the project root not relative to\r\nthe current working directory but instead relative to the ``conf.py`` file.\r\n\r\nIf vcversioner is bundled with your project instead of relying on it being\r\ninstalled, you might have to add the following to your ``conf.py`` before\r\n``import vcversioner``::\r\n\r\n  import sys, os\r\n  sys.path.insert(0, os.path.abspath('..'))\r\n\r\nThis line, or something with the same effect, is sometimes already present when\r\nusing the sphinx ``autodoc`` extension.\r\n\r\n\r\nRead the Docs\r\n~~~~~~~~~~~~~\r\n\r\nUsing vcversioner is even possible when building documentation on `Read the\r\nDocs`_. If vcversioner is bundled with your project, nothing further needs to\r\nbe done. Otherwise, you need to tell Read the Docs to install vcversioner\r\nbefore it builds the documentation. This means using a ``requirements.txt``\r\nfile.\r\n\r\nIf your project is already set up to install dependencies with a\r\n``requirements.txt`` file, add ``vcversioner`` to it. Otherwise, create a\r\n``requirements.txt`` file. Assuming your documentation is in a ``docs``\r\nsubdirectory of the main project directory, create ``docs/requirements.txt``\r\ncontaining a ``vcversioner`` line.\r\n\r\nThen, make the following changes to your project's configuration: (Project\r\nconfiguration is edited at e.g.\r\nhttps://readthedocs.org/dashboard/vcversioner/edit/)\r\n\r\n- Check the checkbox under **Use virtualenv**.\r\n- If there was no ``requirements.txt`` previously, set the **Requirements\r\n  file** to the newly-created one, e.g. ``docs/requirements.txt``.\r\n\r\n\r\n.. _Elevator pitch: http://en.wikipedia.org/wiki/Elevator_pitch\r\n.. _pip: https://pypi.python.org/pypi/pip\r\n.. _PEP 386: http://www.python.org/dev/peps/pep-0386/\r\n.. _PEP 440: http://www.python.org/dev/peps/pep-0440/#developmental-releases\r\n.. _Sphinx: http://sphinx-doc.org\r\n.. _Read the Docs: https://readthedocs.org/\r\n.. _semantic versioning: http://semver.org/\r\n\r\n.. |find_version| replace:: ``find_version``",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/tylercrumpton/vcversioner",
    "keywords": "",
    "license": "ISC",
    "maintainer": "",
    "maintainer_email": "",
    "name": "tcversioner",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/tcversioner/",
    "release_url": "https://pypi.org/project/tcversioner/2.16.0.0.post5/",
    "requires_python": "",
    "summary": "Use version control tags to discover version numbers",
    "version": "2.16.0.0.post5"
  },
  "releases": {
    "2.16.0.0.post4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "fb1a386cba8d47d049024d4af098340d",
          "sha256": "be332d7a05f45142c013d087b58c451acd83a03560d1be50d06a55eaf9e30ef2"
        },
        "downloads": 79,
        "filename": "tcversioner-2.16.0.0.post4-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "fb1a386cba8d47d049024d4af098340d",
        "packagetype": "bdist_wheel",
        "python_version": "any",
        "size": 14820,
        "upload_time": "2016-09-16T20:25:22",
        "url": "https://files.pythonhosted.org/packages/13/e3/ad9fd21318e9816b0897318530c98ec93956311fec4aa0afc877525d174e/tcversioner-2.16.0.0.post4-py2-none-any.whl"
      }
    ],
    "2.16.0.0.post5": [
      {
        "comment_text": "",
        "digests": {
          "md5": "fef1f25af91d0ed2c94c48a49e8c5987",
          "sha256": "2774d42bd83464f5e62538ceb0c57740b18c819707bf2657b5184d581fd99a3d"
        },
        "downloads": 179,
        "filename": "tcversioner-2.16.0.0.post5-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "fef1f25af91d0ed2c94c48a49e8c5987",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 14820,
        "upload_time": "2016-09-16T20:31:03",
        "url": "https://files.pythonhosted.org/packages/3b/d0/4eadc0dca45dd34528d62bfc26004af927b184df222d3bebb0cdc9fc19a8/tcversioner-2.16.0.0.post5-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "8d6b69a432e303f0b532e8f114afd485",
          "sha256": "d7087680346dca702f37c0096474b2f308cfdc98b42e2e119c84daaef0207bf5"
        },
        "downloads": 374,
        "filename": "tcversioner-2.16.0.0.post5.zip",
        "has_sig": false,
        "md5_digest": "8d6b69a432e303f0b532e8f114afd485",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 20042,
        "upload_time": "2016-09-16T20:31:06",
        "url": "https://files.pythonhosted.org/packages/68/3b/42b0423bc1c454cfa76a778016309d3ea66e86e86f911789c0d8284b857f/tcversioner-2.16.0.0.post5.zip"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "fef1f25af91d0ed2c94c48a49e8c5987",
        "sha256": "2774d42bd83464f5e62538ceb0c57740b18c819707bf2657b5184d581fd99a3d"
      },
      "downloads": 179,
      "filename": "tcversioner-2.16.0.0.post5-py2-none-any.whl",
      "has_sig": false,
      "md5_digest": "fef1f25af91d0ed2c94c48a49e8c5987",
      "packagetype": "bdist_wheel",
      "python_version": "py2",
      "size": 14820,
      "upload_time": "2016-09-16T20:31:03",
      "url": "https://files.pythonhosted.org/packages/3b/d0/4eadc0dca45dd34528d62bfc26004af927b184df222d3bebb0cdc9fc19a8/tcversioner-2.16.0.0.post5-py2-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "8d6b69a432e303f0b532e8f114afd485",
        "sha256": "d7087680346dca702f37c0096474b2f308cfdc98b42e2e119c84daaef0207bf5"
      },
      "downloads": 374,
      "filename": "tcversioner-2.16.0.0.post5.zip",
      "has_sig": false,
      "md5_digest": "8d6b69a432e303f0b532e8f114afd485",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 20042,
      "upload_time": "2016-09-16T20:31:06",
      "url": "https://files.pythonhosted.org/packages/68/3b/42b0423bc1c454cfa76a778016309d3ea66e86e86f911789c0d8284b857f/tcversioner-2.16.0.0.post5.zip"
    }
  ]
}