{
  "info": {
    "author": "Ruairi Fahy",
    "author_email": "ruairi@scrapinghub.com",
    "bugtrack_url": "",
    "classifiers": [
      "Development Status :: 4 - Beta",
      "License :: OSI Approved :: BSD License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.7"
    ],
    "description": "Installation\n============\n\nTo install ``portia_porter``:\n\n::\n\n    pip install portia2code\n\nPurpose\n=======\n\nThe purpose of this project is to give more options to users of Portia\nand Scrapy.\n\nIn some cases when a spider is created with Portia it doesn't extract\nthe data correctly or some custom logic is needed to join different\npages together. This project allows you to get around those issues by\nconverting spiders from the JSON format used by Portia to Scrapy spiders\nwritten in Python. With the Python code it can allow users to create\ntheir own custom logic for extracting data.\n\nFor scrapy users it can give you the ability to bootstrap a spider using\nPortia. Rather than going to a site in your browser and manually finding\nthe CSS/XPath selectors you can use the Portia tool to do that work for\nyou and export the spider as python code ready to be customised.\n\nPort your project\n=================\n\nOnce You have installed the tool you can port your project using the\ncommand:\n\n::\n\n    portia_porter PROJECT_DIR OUT_DIR\n\nYou can download your portia project as python using\n\n::\n\n    export PROJECT_ID=\"PROJECT_ID\"\n    curl https://portia/api/projects/$PROJECT_ID/download?format=code\n\n\n\nHow it works\n============\n\nSpiders built with Portia consist of JSON definitions of which urls a\nspider should crawl and how it should extract data from the data at\nthose urls. When running these spiders the JSON definitions are compiled\ninto a custom Scrapy spider with trained samples used for extraction.\nThe trained samples are used with the ``scrapely`` library to extract\ndata from similar pages. To build one of these trained samples an\nannotated page must be passed to scrapely so it knows what data to\nextract. In older versions of Portia these annotations were found in the\npage by adding an attribute to each element called ``data-tagid=N``\nwhere ``N`` is a unique incrementing integer for each open or self\nclosing tag on the page. Newer versions of Portia have changed this and\nnow use unique selectors for each annotated element on the page. Using\nthese unique selectors we are able to build an extraction tree that can\nuse item loaders on a page to extract the annotated data.\n\nCustomising Your Spiders\n========================\n\nIf you want to change the functionality you can do so as you would with\nany other scrapy spider. The spiders produced by Portia2Code are a\ncustom ``scrapy.CrawlSpider``, the code for which is included in the\ndownloaded project.\n\nThe example below demonstrates how to make an additional API request to\na metrics site when there is a meta property with the name ``metrics``\non the page.\n\n    In the example the extended spider is separated out from the\n    original spider, this is just to demonstrate the changes that you\n    need to make when modifying the spider. In practice you would make\n    changes to the spider in the same class.\n\n.. code:: python\n\n    from scrapy.linkextractors import LinkExtractor\n    from scrapy.spiders import Rule\n\n    from ..utils.spiders import BasePortiaSpider\n    from ..utils.processors import Field\n    from ..utils.processors import Item\n    from ..items import ArticleItem\n\n\n    class ExampleCom(BasePortiaSpider):\n        name = \"www.example.com\"\n        start_urls = [u'http://www.example.com/search/?q=articles']\n        allowed_domains = [u'www.example.com']\n        rules = [\n            Rule(LinkExtractor(allow=(ur'\\d{6}'), deny=()), callback='parse_item',\n                 follow=True)\n        ]\n        items = [\n            [Item(ArticleItem, None, u'#content', [\n                  Field(u'title', u'.page_title *::text', []),\n                  Field(u'Article', u'.article *::text', []),\n                  Field(u'published', u'.date *::text', []),\n                  Field(u'Authors', u'.authors *::text', []),\n                  Field(u'pdf', u'#pdf-link::attr(href)', [])])]\n        ]\n\n\n    import json\n    from scrapy import Request\n    from six.moves.urllib.parse import urljoin\n\n\n    class ExtendedExampleCom(ExampleCom):\n        base_api_url = 'https://api.examplemetrics.com/v1/metrics/'\n        allowed_domains = [u'www.example.com', u'api.examplemetrics.com']\n\n        def parse_item(self, response):\n            for item in super(ExtendedExampleCom, self).parse_item(response):\n                score = response.css('meta[name=\"metrics\"]::attr(content)')\n                if score:\n                    yield Request(\n                        url=urljoin(self.base_api_url, score.extract()[0]),\n                        callback=self.add_score, meta={'item': item})\n                else:\n                    yield item\n\n        def add_score(self, response):\n            item = response.meta['item']\n            item['score'] = json.loads(response.body)['score']\n            return item\n\nWhat's happening here?\n----------------------\n\nHere is an example meta tag\n``<meta name=\"metrics\" content=\"area/1234\">`` on this site. The content\nattribute needs to be joined with a ``base_api_url`` to produce the full\nurl where the metrics are hosted.\n\nThe ``base_api_url`` is hosted at a different domain to the rest of the\nsite so we need to add the domain to ``allowed_domains`` so that it\ndoesn't get filtered by the offsite middleware.\n\nSince the goal here is to add an additional field to the items that are\nextracted from the definitons the first step is to overwrite the\n``parse_item`` function for this class. The most important part of this\nis to loop over the ``parse_item`` function in the superclass,\n``for item in super(ClassName, self).parse_item(response):``. After this\nthe custom logic is added. First, checking if the meta property metrics\nis present. If it is present then another request is sent with the\ncurrent item stored in the request meta, after the request is resolved\nthe ``score`` property is added to the item in the ``add_score`` method\nfrom the json response and the item is returned. If the property is not\npresent then the item itself is returned.\n\n    The ``parse_item`` method uses the ``items`` definitions to extract\n    data from the response. The ``parse_item`` function from\n    ``BasePortiaSpider`` only outputs ``scrapy.Item`` items so you don't\n    need to handle ``scrapy.Request`` or other types of items when\n    calling the function.\n\nThis pattern is quite common in spiders built with Portia. There are\nsome pages where to get some data like this the page would need to be\nloaded in Splash which will greatly increase the time it takes to crawl\na site. Using this approach the additional data can be received using a\nsingle small request rather than needing to load all additional\njavascript and CSS just to have this data stored in the page.\n\nMissing Features\n================\n\nSome features from Portia are still not available though this porting\nmechanism but will hopefully be added in the future:\n\n-  Load pages using Splash depending on crawl rules\n-  Follow links automatically\n-  Text data extractors (annotations generated by highlighting text)\n\nFuture Improvements\n===================\n\n-  Only Portia 2.0 spiders are supported for now but we will be adding\n   support for Portia 1.0 spiders.\n\n",
    "docs_url": null,
    "download_url": "https://github.com/scrapinghub/portia2code/tarball/portia2code-0.0.12",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/scrapinghub/portia2code",
    "keywords": "",
    "license": "BSD",
    "maintainer": "",
    "maintainer_email": "",
    "name": "portia2code",
    "platform": "Any",
    "project_url": "https://pypi.org/project/portia2code/",
    "release_url": "https://pypi.org/project/portia2code/0.0.12/",
    "requires_python": "",
    "summary": "Convert portia spider definitions to python scrapy spiders",
    "version": "0.0.12"
  },
  "releases": {
    "0.0.1": [],
    "0.0.10": [
      {
        "comment_text": "",
        "digests": {
          "md5": "d9c38ec988f3b1495c7d686fb4089458",
          "sha256": "9f9aba8832ba121fd3ce1ee906661a494e54a4246008b8838dc8ee90fa4e6ead"
        },
        "downloads": 12,
        "filename": "portia2code-0.0.10-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "d9c38ec988f3b1495c7d686fb4089458",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 16782,
        "upload_time": "2017-02-01T17:42:10",
        "url": "https://files.pythonhosted.org/packages/46/93/cbafd9eb2223d0ef6f56cd89b474576d992326d377b5237786363c30b5fa/portia2code-0.0.10-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "e4695f49a87db61544c68efa5f3ffd3a",
          "sha256": "06de0ee5d60a54aca81664128e2df8f1f1612591aa6d7681eab9d922f8cb694d"
        },
        "downloads": 9,
        "filename": "portia2code-0.0.10.tar.gz",
        "has_sig": false,
        "md5_digest": "e4695f49a87db61544c68efa5f3ffd3a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15643,
        "upload_time": "2017-02-01T17:42:12",
        "url": "https://files.pythonhosted.org/packages/e2/1a/5e7ca01858c7ac6a4ca089667bf57a7d081e0fdb917b6b1fb86959a817d2/portia2code-0.0.10.tar.gz"
      }
    ],
    "0.0.11": [
      {
        "comment_text": "",
        "digests": {
          "md5": "2fd65e4daeb5f2ec4d01b32bd6092599",
          "sha256": "d035ee4ec8474c38aed25d4f5e3e6c981f8dc58d96febea022c9ce8ded5b0dc8"
        },
        "downloads": 45,
        "filename": "portia2code-0.0.11-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "2fd65e4daeb5f2ec4d01b32bd6092599",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 16808,
        "upload_time": "2017-02-24T09:31:47",
        "url": "https://files.pythonhosted.org/packages/f7/26/0ccd93851aa4b6948f5228274b721778115f4681e4dc2a5343b609cf7310/portia2code-0.0.11-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "727ca5fb819a749087e44ccefd3be61c",
          "sha256": "ac4e8369c0ee71bdd41e6a7ac2a8ab3cdb09054cf03d29567e2fa5d2631c3aa4"
        },
        "downloads": 9,
        "filename": "portia2code-0.0.11.tar.gz",
        "has_sig": false,
        "md5_digest": "727ca5fb819a749087e44ccefd3be61c",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15674,
        "upload_time": "2017-02-24T09:31:49",
        "url": "https://files.pythonhosted.org/packages/80/94/b491a258ba4403fe5e7466bff5ab37c216fb1ace1edf9f0946785c2694aa/portia2code-0.0.11.tar.gz"
      }
    ],
    "0.0.12": [
      {
        "comment_text": "",
        "digests": {
          "md5": "c62f7955a3e04b668079950873d85f1d",
          "sha256": "449e9f6df816ae66e0c795830fe426aa2e22ba36a503ed079aeba59e763a8e13"
        },
        "downloads": 0,
        "filename": "portia2code-0.0.12-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "c62f7955a3e04b668079950873d85f1d",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 16841,
        "upload_time": "2017-04-13T13:43:00",
        "url": "https://files.pythonhosted.org/packages/07/24/463ffee03360fabc404c6c135660a7e6c2bede42a2ed7cc350b8782f2689/portia2code-0.0.12-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "aec8e2450e365f4f4c6c5d12f0ae2118",
          "sha256": "918c58fc57f597f457c3e0a78b677c8b6a87eafafae7896bdb979b7fbcb0dcb9"
        },
        "downloads": 0,
        "filename": "portia2code-0.0.12.tar.gz",
        "has_sig": false,
        "md5_digest": "aec8e2450e365f4f4c6c5d12f0ae2118",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15706,
        "upload_time": "2017-04-13T13:43:01",
        "url": "https://files.pythonhosted.org/packages/cf/8f/3bbc5890aafd00bed58ae9edbfdefc7bd2cb3e8482b5d623ef7677ad8037/portia2code-0.0.12.tar.gz"
      }
    ],
    "0.0.3": [],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "md5": "7e53b10abf3da2afd9030394a3e8995a",
          "sha256": "cbad9f52c0b3821ee3e080485eb1abadbdbc88312a45d0af684be7ca72714ac1"
        },
        "downloads": 123,
        "filename": "portia2code-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "7e53b10abf3da2afd9030394a3e8995a",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15558,
        "upload_time": "2016-06-08T08:18:23",
        "url": "https://files.pythonhosted.org/packages/e2/ec/386e4800fada5cc819324dbe1a4f8bdeb0b536a4c7355b439650d2956b6a/portia2code-0.0.4.tar.gz"
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "md5": "1703c8e5c1abfaa1c5aa84ceccf3d1ce",
          "sha256": "cb766a2b05a31fcb89508ad2fc5bef5e48be4f903099da5e7cb40e0c137ebbb0"
        },
        "downloads": 449,
        "filename": "portia2code-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "1703c8e5c1abfaa1c5aa84ceccf3d1ce",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15568,
        "upload_time": "2016-06-08T11:10:24",
        "url": "https://files.pythonhosted.org/packages/15/92/e6c7660be66638f31395a4990bd34bd50af272a5c6c08fa66295202fed9d/portia2code-0.0.5.tar.gz"
      }
    ],
    "0.0.6": [
      {
        "comment_text": "",
        "digests": {
          "md5": "347b13ec5bcb245dc3551bbee015f6e6",
          "sha256": "86e4a03444d469dea2377f3870374dd30f16eae06ec24544a9201cc7cd1b96de"
        },
        "downloads": 373,
        "filename": "portia2code-0.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "347b13ec5bcb245dc3551bbee015f6e6",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 15572,
        "upload_time": "2016-06-08T11:41:58",
        "url": "https://files.pythonhosted.org/packages/f8/ef/8d97b9fa28df91a3e33ac0cccacbcef9360166b96e8e81a5b94726569b93/portia2code-0.0.6.tar.gz"
      }
    ],
    "0.0.7": [
      {
        "comment_text": "",
        "digests": {
          "md5": "31582ed745fdc0cda75a231c5d7ae29c",
          "sha256": "8d62e0aea031e4d8a6ce7ed1725a496d183f59c524105cdc8f4d8dc3af3c2366"
        },
        "downloads": 107,
        "filename": "portia2code-0.0.7-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "31582ed745fdc0cda75a231c5d7ae29c",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 17188,
        "upload_time": "2016-12-12T12:20:05",
        "url": "https://files.pythonhosted.org/packages/92/54/47aea8a2b95f8575e20f8cb7dadcd5bd41e70691f09e4eaea5db4d3cf9cb/portia2code-0.0.7-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "e82abe4776e69495d63c5f742cede03b",
          "sha256": "5b21032d2b39610fb168b6b20d1858e647b2dbda95a5899cd58ca7610de92977"
        },
        "downloads": 59,
        "filename": "portia2code-0.0.7.tar.gz",
        "has_sig": false,
        "md5_digest": "e82abe4776e69495d63c5f742cede03b",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 16079,
        "upload_time": "2016-12-12T12:16:09",
        "url": "https://files.pythonhosted.org/packages/b2/82/f4fbd08795b7a57bc1f72a294aae852fd37e90fd4c1ea2d15f1af488f0b0/portia2code-0.0.7.tar.gz"
      }
    ],
    "0.0.8": [
      {
        "comment_text": "",
        "digests": {
          "md5": "a29be5b674ebd54de2faf18494a34253",
          "sha256": "30f870ae70f1c1bb98e74dfe34204b40a869c7646e3039dfa20dc772f36b4ac5"
        },
        "downloads": 94,
        "filename": "portia2code-0.0.8-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "a29be5b674ebd54de2faf18494a34253",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 17703,
        "upload_time": "2017-01-06T15:57:43",
        "url": "https://files.pythonhosted.org/packages/6f/cb/23b766fa78072c0ca7d9728cb797833b771ff67c0e814facb8e090229557/portia2code-0.0.8-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "14b19d130cbc0a5e3e2dcc64137c4e25",
          "sha256": "6d9a575c1133c1a65699be1e07562955c73a885dca408c60cd877904057a5cb2"
        },
        "downloads": 94,
        "filename": "portia2code-0.0.8.tar.gz",
        "has_sig": false,
        "md5_digest": "14b19d130cbc0a5e3e2dcc64137c4e25",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 16560,
        "upload_time": "2017-01-06T15:57:45",
        "url": "https://files.pythonhosted.org/packages/f8/d4/6937f77d5c093210c6c9a428075ad515fbffb1386d9740bf212452be8ebb/portia2code-0.0.8.tar.gz"
      }
    ],
    "0.0.9": [
      {
        "comment_text": "",
        "digests": {
          "md5": "34e1e9871397dd49ce12a1f489794474",
          "sha256": "fe927c133a813efe87ece8bfcbc1f8cfa498abccad0b8c77a5ce09aa7081e2b0"
        },
        "downloads": 9,
        "filename": "portia2code-0.0.9-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "34e1e9871397dd49ce12a1f489794474",
        "packagetype": "bdist_wheel",
        "python_version": "py2",
        "size": 17698,
        "upload_time": "2017-01-10T16:20:33",
        "url": "https://files.pythonhosted.org/packages/21/51/46cd5c34214776c4761877f7ddf6b0b69e432a2c9b790a49f0573d6ecd00/portia2code-0.0.9-py2-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "6bb6d1a66afe0e45e136bc8533d4c3dc",
          "sha256": "32d786ed8c1a014f34eb9eb853659152353c06e43528ea1aa62d9a4d07cae48d"
        },
        "downloads": 11,
        "filename": "portia2code-0.0.9.tar.gz",
        "has_sig": false,
        "md5_digest": "6bb6d1a66afe0e45e136bc8533d4c3dc",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 16558,
        "upload_time": "2017-01-10T16:20:35",
        "url": "https://files.pythonhosted.org/packages/f9/74/f1a8934b64b2f4120959c43faddd18372bdf6d55a7de7415ef8f0cc42053/portia2code-0.0.9.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "c62f7955a3e04b668079950873d85f1d",
        "sha256": "449e9f6df816ae66e0c795830fe426aa2e22ba36a503ed079aeba59e763a8e13"
      },
      "downloads": 0,
      "filename": "portia2code-0.0.12-py2-none-any.whl",
      "has_sig": false,
      "md5_digest": "c62f7955a3e04b668079950873d85f1d",
      "packagetype": "bdist_wheel",
      "python_version": "py2",
      "size": 16841,
      "upload_time": "2017-04-13T13:43:00",
      "url": "https://files.pythonhosted.org/packages/07/24/463ffee03360fabc404c6c135660a7e6c2bede42a2ed7cc350b8782f2689/portia2code-0.0.12-py2-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "aec8e2450e365f4f4c6c5d12f0ae2118",
        "sha256": "918c58fc57f597f457c3e0a78b677c8b6a87eafafae7896bdb979b7fbcb0dcb9"
      },
      "downloads": 0,
      "filename": "portia2code-0.0.12.tar.gz",
      "has_sig": false,
      "md5_digest": "aec8e2450e365f4f4c6c5d12f0ae2118",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 15706,
      "upload_time": "2017-04-13T13:43:01",
      "url": "https://files.pythonhosted.org/packages/cf/8f/3bbc5890aafd00bed58ae9edbfdefc7bd2cb3e8482b5d623ef7677ad8037/portia2code-0.0.12.tar.gz"
    }
  ]
}