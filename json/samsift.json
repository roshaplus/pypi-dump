{
  "info": {
    "author": "Karel Brinda",
    "author_email": "kbrinda@hsph.harvard.edu",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: Console",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: MIT License",
      "Operating System :: Unix",
      "Programming Language :: Python :: 3 :: Only",
      "Topic :: Scientific/Engineering :: Bio-Informatics"
    ],
    "description": "SAMsift\n=======\n\n.. image:: https://travis-ci.org/karel-brinda/samsift.svg?branch=master\n\t:target: https://travis-ci.org/karel-brinda/samsift\n\n.. image:: https://img.shields.io/badge/install%20with-bioconda-brightgreen.svg?style=flat-square\n\t:target: https://anaconda.org/bioconda/samsift\n\n.. image:: https://badge.fury.io/py/samsift.svg\n        :target: https://badge.fury.io/py/samsift\n\nSAMsift is a program for advanced filtering and tagging of SAM/BAM alignments\nusing Python expressions.\n\n\nGetting started\n---------------\n\n.. code-block:: bash\n\n       # clone this repo and add it to PATH\n       git clone http://github.com/karel-brinda/samsift\n       cd samsift\n       export PATH=$(pwd)/samsift:$PATH\n\n       # filtering: keep only alignments with score >94, save them as filtered.bam\n       samsift -i tests/test.bam -o filtered.bam -f 'AS>94'\n       # filtering: keep only unaligned reads\n       samsift -i tests/test.bam -f 'FLAG & 0x04'\n       # filtering: keep only aligned reads\n       samsift -i tests/test.bam -f 'not(FLAG & 0x04)'\n       # filtering: keep only sequences containing ACCAGAGGAT\n       samsift -i tests/test.bam -f 'SEQ.find(\"ACCAGAGGAT\")!=-1'\n       # filtering: sample alignments with 25% rate\n       samsift -i tests/test.bam -f 'random.random()<0.25'\n       # filtering: sample alignments with 25% rate with a fixed RNG seed\n       samsift -i tests/test.bam -f 'random.random()<0.25' -0 'random.seed(42)'\n       # tagging: add tags 'ln' with sequence length and 'ab' with average base quality\n       samsift -i tests/test.bam -c 'ln=len(SEQ);ab=1.0*sum(QUALa)/ln'\n       # tagging: add a tag 'ii' the number of the current alignment\n       samsift -i tests/test.bam -0 'i=0' -c 'i+=1;ii=i'\n       # updating: removing sequences and base qualities\n       samsift -i ./tests/test.bam -c 'a.query_sequence=\"\"'\n       # updating: switching all reads to unaligned\n       samsift -i ./tests/test.bam -c 'a.flag|=0x4;a.reference_start=-1;a.cigarstring=\"\";a.reference_id=-1;a.mapping_quality=0'\n\n\nInstallation\n------------\n\n**Using Bioconda:**\n\n.. code-block:: bash\n\n        # add all necessary Bioconda channels\n        conda config --add channels defaults\n        conda config --add channels conda-forge\n        conda config --add channels bioconda\n\n        # install samsift\n        conda install samsift\n\n\n**Using PIP from PyPI:**\n\n.. code-block:: bash\n\n   pip install --upgrade samsift\n\n\n**Using PIP from Github:**\n\n.. code-block:: bash\n\n   pip install --upgrade git+https://github.com/karel-brinda/samsift\n\n\nCommand-line parameters\n-----------------------\n\n.. USAGE-BEGIN\n\n.. code-block::\n\n\tProgram: samsift (advanced filtering and tagging of SAM/BAM alignments using Python expressions)\n\tVersion: 0.2.0\n\tAuthor:  Karel Brinda <kbrinda@hsph.harvard.edu>\n\n\tUsage:   samsift.py [-i FILE] [-o FILE] [-f PY_EXPR] [-c PY_CODE] [-m STR]\n\t                    [-0 PY_CODE] [-d PY_EXPR] [-t PY_EXPR]\n\n\tBasic options:\n\t  -h, --help            show this help message and exit\n\t  -v, --version         show program's version number and exit\n\t  -i FILE               input SAM/BAM file [-]\n\t  -o FILE               output SAM/BAM file [-]\n\t  -f PY_EXPR            filter [True]\n\t  -c PY_CODE            code to be executed (e.g., assigning new tags) [None]\n\t  -m STR                mode: strict (stop on first error)\n\t                              nonstop-keep (keep alignments causing errors)\n\t                              nonstop-remove (remove alignments causing errors) [strict]\n\n\tAdvanced options:\n\t  -0 PY_CODE            initialization [None]\n\t  -d PY_EXPR            debugging expression to print [None]\n\t  -t PY_EXPR            debugging trigger [True]\n\n\n.. USAGE-END\n\nAlgorithm\n---------\n\n.. code-block:: python\n\n        exec(INITIALIZATION)\n        for ALIGNMENT in ALIGNMENTS:\n                if eval(DEBUG_TRIGER):\n                        print(eval(DEBUG_EXPR))\n                if eval(FILTER):\n                        exec(CODE)\n                        print(ALIGNMENT)\n\n\n**Python expressions and code.** All expressions and code should be valid with\nrespect to `Python 3 <https://docs.python.org/3/>`_. Expressions are evaluated\nusing the `eval <https://docs.python.org/3/library/functions.html#eval>`_\nfunction and code is executed using the `exec\n<https://docs.python.org/3/library/functions.html#exec>`_ function.\nInitialization can be used for importing Python modules, setting global\nvariables (e.g., counters) or loading data from disk. Some modules (e.g.,\n``random``) are loaded without an explicit request.\n\n*Example* (printing all alignments):\n\n.. code-block:: bash\n\n        samsift -i tests/test.bam -f 'True'\n\n**SAM fields.** Expressions and code can access variables mirroring the fields\nfrom the alignment section of the `SAM specification\n<https://samtools.github.io/hts-specs/SAMv1.pdf>`_, i.e., ``QNAME``, ``FLAG``,\n``RNAME``, ``POS`` (1-based), ``MAPQ``, ``CIGAR``, ``RNEXT``, ``PNEXT``,\n``TLEN``, ``SEQ``, and ``QUAL``. Several additional variables are defined to\nsimply accessing some useful information: ``QUALa`` stores the base qualities\nas an integer array;  ``SEQs``, ``QUALs``, ``QUALsa`` skip soft-clipped bases;\nand ``RNAMEi`` and ``RNEXTi`` store the reference ids as integers.\n\n*Example* (keeping only the alignments with leftmost position <= 10000):\n\n.. code-block:: bash\n\n        samsift -i tests/test.bam -f 'POS<=10000'\n\n\nSAMsift internally uses the `PySam <http://pysam.readthedocs.io/>`_ library and\nthe representation of the current alignment (an instance of the class\n`pysam.AlignedSegment\n<http://pysam.readthedocs.io/en/latest/api.html#pysam.AlignedSegment>`_) is\navailable as a variable ``a``. Therefore, the previous example is equivalent to\n\n.. code-block:: bash\n\n        samsift -i tests/test.bam -f 'a.reference_start+1<=10000'\n\n\nThe ``a`` variable can also be used for modifying the current alignment record.\n\n*Example* (removing the sequence and the bases from every record):\n\n.. code-block:: bash\n\n        samsift -i ./tests/test.bam -c 'a.query_sequence=\"\"'\n\n\n**SAM tags.** Every SAM tag is translated to a variable with the same name.\n\n*Example* (removing alignments with a score smaller or equal to the sequence length):\n\n.. code-block:: bash\n\n        samsift -i tests/test.bam -f 'AS>len(SEQ)'\n\nIf ``CODE`` is provided, all two-letter variables are back-translated after its execution to tags.\n\n*Example* (adding a tag ``ab`` carrying the average base quality):\n\n.. code-block:: bash\n\n        samsift -i tests/test.bam -c 'ab=1.0*sum(QUALa)/len(QUALa)'\n\n**Errors.** If an error occurs during an evalution of an expression or an\nexecution of a code (e.g., due to accessing an undefined tag), then SAMsift\nbehavior depends on the specified mode (``-m``).  With the strict mode (``-m\nstrict``, default), SAMsift will immediately interrupt the computation and\nreport an error.  With the ``-m nonstop-keep`` option, SAMsift will continue\nprocessing the alignments while keeping the error-causing alignments in the\noutput.  With the ``-m nonstop-remove`` option, all error-causing alignments\nare skipped and ommited from the output.\n\n\nSimilar programs\n----------------\n\n* `samtools view <http://www.htslib.org/doc/samtools.html>`_ can filter alignments based on FLAGS, read group tags, and CIGAR strings.\n* `sambamba view <http://lomereiter.github.io/sambamba/docs/sambamba-view.html>`_ supports, in addition to SAMtools, filtration using `simple Perl expressions <https://github.com/lomereiter/sambamba/wiki/%5Bsambamba-view%5D-Filter-expression-syntax>`_. However, it's not possible to compare different tags.\n* `bamPals <https://github.com/zeeev/bamPals>`_ adds tags XB, XE, XP and XL.\n* `SamJavascript <http://lindenb.github.io/jvarkit/SamJavascript.html>`_ can filter alignments using JavaScript expressions.\n\n\nIssues\n------\n\nPlease use `Github issues <https://github.com/karel-brinda/samsift/issues>`_.\n\n\nChangelog\n---------\n\nSee `Releases <https://github.com/karel-brinda/samsift/releases>`_.\n\n\nLicence\n-------\n\n`MIT <https://github.com/karel-brinda/samsift/blob/master/LICENSE>`_\n\n\nAuthor\n------\n\n`Karel Brinda <http://brinda.cz>`_ <kbrinda@hsph.harvard.edu>\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/karel-brinda/samsift",
    "keywords": "NGS SAM alignment",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "samsift",
    "platform": "",
    "project_url": "https://pypi.org/project/samsift/",
    "release_url": "https://pypi.org/project/samsift/0.2.0/",
    "requires_dist": [],
    "requires_python": "",
    "summary": "SAMsift - sift your alignments",
    "version": "0.2.0"
  },
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "d802fb31c3567ec3d0f8ea4dfce938a8",
          "sha256": "806670711dcac34d90eda341ef99134dcbd38f6a717aed6a73d94c1cea21bf65"
        },
        "downloads": 0,
        "filename": "samsift-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d802fb31c3567ec3d0f8ea4dfce938a8",
        "packagetype": "bdist_wheel",
        "python_version": "3.6",
        "size": 7783,
        "upload_time": "2017-08-31T19:33:50",
        "url": "https://files.pythonhosted.org/packages/49/74/bfd6db7a8eb094842ae7b91368a7943bf950da6cca27a69e78ba6ef3bbff/samsift-0.1.0-py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "d61699655e3724652415f890db9c0fbc",
          "sha256": "2508a030faee574e50fcfb0e2a76fc4ed5c90d2d434e68a63cdf04e1950ee2b9"
        },
        "downloads": 0,
        "filename": "samsift-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "d61699655e3724652415f890db9c0fbc",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 4891,
        "upload_time": "2017-08-31T19:33:48",
        "url": "https://files.pythonhosted.org/packages/bf/88/63dd104a0ca7c3bf9f251bd45a7f9ab75e6db7fdfd0afc31a4f4377d3f17/samsift-0.1.0.tar.gz"
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "bad7f853c0bc2ada7b7dbbb3db6389d3",
          "sha256": "c4917302c76ff95e185755a5fd1dbba7c9a5bb28e334de8e6d01e094564cba62"
        },
        "downloads": 0,
        "filename": "samsift-0.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bad7f853c0bc2ada7b7dbbb3db6389d3",
        "packagetype": "bdist_wheel",
        "python_version": "3.6",
        "size": 11903,
        "upload_time": "2017-09-05T21:47:36",
        "url": "https://files.pythonhosted.org/packages/72/39/1c2e0b71edfd2d67576e6c40e445fc445e384b5a6deba79deed2036b1395/samsift-0.2.0-py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "05004bd4c0fb03d5239c4643f13217fb",
          "sha256": "3cc39d4999e9cec9557d4c47919585a90d58b79cd71c762cf98e624cc7d0db44"
        },
        "downloads": 0,
        "filename": "samsift-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "05004bd4c0fb03d5239c4643f13217fb",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 8630,
        "upload_time": "2017-09-05T21:47:34",
        "url": "https://files.pythonhosted.org/packages/ce/e2/8952ac72ffc66b571a87b7e3c8e2763be0ce642019c7b5c9dccd0297d0ae/samsift-0.2.0.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "bad7f853c0bc2ada7b7dbbb3db6389d3",
        "sha256": "c4917302c76ff95e185755a5fd1dbba7c9a5bb28e334de8e6d01e094564cba62"
      },
      "downloads": 0,
      "filename": "samsift-0.2.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "bad7f853c0bc2ada7b7dbbb3db6389d3",
      "packagetype": "bdist_wheel",
      "python_version": "3.6",
      "size": 11903,
      "upload_time": "2017-09-05T21:47:36",
      "url": "https://files.pythonhosted.org/packages/72/39/1c2e0b71edfd2d67576e6c40e445fc445e384b5a6deba79deed2036b1395/samsift-0.2.0-py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "05004bd4c0fb03d5239c4643f13217fb",
        "sha256": "3cc39d4999e9cec9557d4c47919585a90d58b79cd71c762cf98e624cc7d0db44"
      },
      "downloads": 0,
      "filename": "samsift-0.2.0.tar.gz",
      "has_sig": false,
      "md5_digest": "05004bd4c0fb03d5239c4643f13217fb",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 8630,
      "upload_time": "2017-09-05T21:47:34",
      "url": "https://files.pythonhosted.org/packages/ce/e2/8952ac72ffc66b571a87b7e3c8e2763be0ce642019c7b5c9dccd0297d0ae/samsift-0.2.0.tar.gz"
    }
  ]
}