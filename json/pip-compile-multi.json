{
  "info": {
    "author": "Peter Demin",
    "author_email": "peterdemin@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 2 - Pre-Alpha",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Natural Language :: English",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4"
    ],
    "description": "===============================\npip-compile-multi\n===============================\n\n.. image:: https://badge.fury.io/py/pip-compile-multi.png\n    :target: http://badge.fury.io/py/pip-compile-multi\n\n.. image:: https://travis-ci.org/peterdemin/pip-compile-multi.svg?branch=master\n        :target: https://travis-ci.org/peterdemin/pip-compile-multi\n\n.. image:: https://pypip.in/d/pip-compile-multi/badge.png\n        :target: https://pypi.python.org/pypi/pip-compile-multi\n\n\nCompile multiple requirements files to lock dependency versions\n\nInstallation\n------------\n\n.. code-block:: shell\n\n    pip install pip-compile-multi\n\nBasic Usage\n-----------\n\n.. code-block:: shell\n\n    pip-compile-multi\n\nExample scenario\n----------------\n\nI will start from the very basics of dependency management and will go very slow,\nso if you feel bored, just scroll to the next section.\n\nSuppose you have a python project with following direct dependencies:\n\n.. code-block::\n\n    click\n    pip-tools\n\n(Yes I took pip-compile-multi as an example).\nLet's save them as-is in ``requirements/base.in``.\nThose are unpinned libraries, it means that whenever developer runs\n\n.. code-block:: shell\n\n    pip install -r requirements/base.in\n\nhe will get *some* version of these libraries.\nAnd chances are that if several developers do the same over some period in time,\nsome will have different dependency versions than others.\nAlso, if the project is online service, one day it may stop working after\nredeployment because some of the dependencies had backward incompatible release.\nThat kind of releases is more common than a newbie can think.\nMore or less every package with a version higher than ``2.0.0`` had them.\n\nTo avoid this problem Python developers are hard-pinning (aka locking) their dependencies.\nSo instead of a list of libraries, they have something like:\n\n.. code-block::\n\n    click==6.7\n    pip-tools==1.11.0\n\n(To keep things neat let's put this into ``requirements/base.txt``)\nThat's good for a starter. But there are two important drawbacks:\n\n1. Developers have to do non-trivial operations if they want to keep up with\n   newer versions (that have bug fixes and performance improvements).\n2. Indirect dependencies (that is dependencies of dependencies) may still have\n   backward-incompatible releases, that brake everything.\n\nLet's put aside point 1 and fight point 2. Let's do\n\n.. code-block:: shell\n\n    pip freeze > requirements/base.txt\n\nNow we have full heirarchy of dependencies hard-pinned:\n\n.. code-block::\n\n    click==6.7\n    first==2.0.1\n    pip-tools==1.11.0\n    six==1.11.0\n\nThat's great, and solves the main problem - service will be deployed exactly [1]\nthe same every single time and all developers will have identical environments.\n\nThis case is so common, that there already is a number of tools to solve it.\nTwo worth mentioning are:\n\n1. `Pip Tools`_ - a mature package that is enhanced by ``pip-compile-multi``.\n2. `PipEnv`_ - fresh approach that is going to become Python standard\n   way of locking dependencies some day.\n\nBut what if the project uses some packages that are not required by the service itself?\nFor example ``pytest``, that is needed to run unit tests, but should never\nbe deployed to a production site. Or ``flake8`` - syntax checking tool.\nIf they are installed in the current virtual environment, they will get into\n``pip freeze`` output.\nThat's no good.\nAnd removing them manually from ``requirements/base.txt`` is not an option.\nBut still, these packages must be pinned to ensure, that tests are running\nthe same way by the whole team (and build server).\n\nSo let's get hands dirty and put all the testing stuff into ``requirements/test.in``:\n\n.. code-block::\n\n    -r base.in\n\n    prospector\n    pylint\n    flake8\n    mock\n    six\n\nNote, how I put ``-r base.in`` in the beginning, so that *test* dependencies are installed\nalong with the *base*.\n\nNow installation command is\n\n.. code-block:: shell\n\n    pip install -e requirements/test.in\n\nFor one single time (exceptionally to show how unacceptable is this task)\nlet's manually compose ``requirements/test.txt``.\nAfter installation, run freeze to bring the whole list of all locked packages:\n\n.. code-block:: shell\n\n    $ pip freeze\n    astroid==1.6.0\n    click==6.7\n    dodgy==0.1.9\n    first==2.0.1\n    flake8==3.5.0\n    flake8-polyfill==1.0.2\n    isort==4.2.15\n    lazy-object-proxy==1.3.1\n    mccabe==0.6.1\n    mock==2.0.0\n    pbr==3.1.1\n    pep8-naming==0.5.0\n    pip-tools==1.11.0\n    prospector==0.12.7\n    pycodestyle==2.0.0\n    pydocstyle==2.1.1\n    pyflakes==1.6.0\n    pylint==1.8.1\n    pylint-celery==0.3\n    pylint-common==0.2.5\n    pylint-django==0.7.2\n    pylint-flask==0.5\n    pylint-plugin-utils==0.2.6\n    PyYAML==3.12\n    requirements-detector==0.5.2\n    setoptconf==0.2.0\n    six==1.11.0\n    snowballstemmer==1.2.1\n    wrapt==1.10.11\n\nWow! That's quite a list! But we remember what goes into base.txt:\n\n1. click\n2. first\n3. pip-tools\n4. six\n\nGood, everything else can be put into ``requirements/test.txt``.\nBut wait, ``six`` is included in ``test.in`` and is missing in ``test.txt``.\nThat feels wrong... Ah, it's because we've moved ``six`` to the ``base.txt``.\nIt's good, that we didn't forget, that it should be in *base*.\nWe might forget next time though.\n\nWhy don't we automate it? That's what ``pip-compile-multi`` is for.\n\nManaging dependency versions in multiple environments\n-----------------------------------------------------\n\nLet's rehearse, example service has two groups of dependencies\n(or, as I call them, environments):\n\n.. code-block::\n\n    $ cat requirements/base.in \n    click\n    pip-tools\n\n    $ cat requirements/test.in \n    -r base.in\n    prospector\n    pylint\n    flake8\n    mock\n    six\n\nTo make automation even more appealing, let's add one more environment.\nI'll call it *local* - things that are needed during development, but are not\nrequired by tests, or service itself.\n\n.. code-block::\n\n    $ cat requirements/local.in \n    -r test.in\n    tox\n\nNow we want to put all *base* dependencies along with all their recursive dependencies\ninto ``base.txt``,\nall recursive *test* dependencies except for *base* into ``test.txt``,\nand all recursive *local* dependencies except for *base* and *test* into ``local.txt``.\n\n.. code-block:: shell\n\n    $ pip-compile-multi\n    INFO:pip-compile-multi:Locking requirements/base.in to requirements/base.txt\n    INFO:pip-compile-multi:Locking requirements/test.in to requirements/test.txt\n    INFO:pip-compile-multi:Locking requirements/local.in to requirements/local.txt\n\nYes, that's right. All the tedious dependency versions management job done with\na single command, that doesn't even have options.\n\nNow you can run ``git diff`` to review the changes and ``git commit`` to save them.\nTo install the new set of versions run:\n\n.. code-block:: shell\n\n    pip install -Ur requirements/local.txt\n\nIt's a perfect time to run all the tests and make sure, that updates were\nbackward compatible enough for your needs.\nMore often than I'd like in big projects, it's not so.\nLet's say new version of ``pylint`` dropped support of old Python version,\nthat you still need to support.\nThan you open ``test.in`` and soft-pin it with descriptive comment:\n\n.. code-block::\n\n    $ cat requirements/test.in \n    -r base.in\n    prospector\n    pylint<1.8  # Newer versions dropped support for Python 2.4\n    flake8\n    mock\n    six\n\nI know, this example is made up. But you get the idea.\nThat re-run ``pip-compile-multi`` to compile new ``test.txt`` and check new set.\n\nBenefits of using pip-compile-multi\n-----------------------------------\n\nI want to summarise, why you need to start using ``pip-compile-multi``.\nSome of the benefits are achievable with other methods, but I want to be general:\n\n1. Production will not suddenly brake after redeployment because of\n   backward incompatible dependency release.\n2. The whole team will use the same package versions and see the same outcomes.\n   No more \"works for me\" and \"I can not reproduce this\" [2].\n3. Service still uses most recent versions of packages.\n   And fresh means best here.\n4. Dependencies are upgraded when the time is suitable for the service,\n   not whenever they are released.\n5. Different environments are separated into different files.\n6. ``*.in`` files are small and manageable because they store only direct dependencies.\n7. ``*.txt`` files are exhaustive and precise (but you don't need to edit them).\n\nHave a question? Need a feature? Fill free to open an `issue on GitHub`_.\n\n[1] That's not really true. Someone could re-upload broken package\nunder existing version on PyPI.\n\n[2] Yeah, yeah, there are still a lot of ways to have these problems.\n\n.. _Pip Tools: https://github.com/jazzband/pip-tools\n.. _PipEnv: https://github.com/pypa/pipenv\n.. _issue on GitHub: https://github.com/peterdemin/pip-compile-multi/issues\n\n\nHistory\n=========\n\n0.1.0 (2017-01-11)\n---------------------\n\n* First release on PyPI.\n\n\n",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": 0,
      "last_month": 0,
      "last_week": 0
    },
    "home_page": "https://github.com/peterdemin/pip-compile-multi",
    "keywords": "pip-compile-multi",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "pip-compile-multi",
    "platform": "",
    "project_url": "https://pypi.org/project/pip-compile-multi/",
    "release_url": "https://pypi.org/project/pip-compile-multi/1.0.6/",
    "requires_dist": [
      "pip-tools",
      "click"
    ],
    "requires_python": "",
    "summary": "Compile multiple requirements files to lock dependency versions",
    "version": "1.0.6"
  },
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "md5": "bcc3158317e12cc9b3b1b097ced0bbf1",
          "sha256": "99b1a265b76ac93d54079adff5665215f86ef110b79c0b299b06e1f83b9e9aca"
        },
        "downloads": -1,
        "filename": "pip_compile_multi-1.0.0-py2.7.egg",
        "has_sig": false,
        "md5_digest": "bcc3158317e12cc9b3b1b097ced0bbf1",
        "packagetype": "bdist_egg",
        "python_version": "2.7",
        "size": 11118,
        "upload_time": "2018-01-12T03:50:37",
        "url": "https://files.pythonhosted.org/packages/e2/1d/452e34fb0c53279abaab5f12cf20cfebb07f5063e8b1aeb6c62c149aeb1b/pip_compile_multi-1.0.0-py2.7.egg"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "e941dc4b9275cdfc39ac6b35c9b379a5",
          "sha256": "b186349f4c3a014768ec8322939eac75463d130a27bbf64d71e1e81cc9b7491b"
        },
        "downloads": -1,
        "filename": "pip_compile_multi-1.0.0-py27-none-any.whl",
        "has_sig": false,
        "md5_digest": "e941dc4b9275cdfc39ac6b35c9b379a5",
        "packagetype": "bdist_wheel",
        "python_version": "py27",
        "size": 15656,
        "upload_time": "2018-01-12T03:50:36",
        "url": "https://files.pythonhosted.org/packages/be/d6/82bad206e22b01be322274715d911db746abc903ac4b76e8eee8913ef785/pip_compile_multi-1.0.0-py27-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "e0ef89a108ea484e5e4c5be7e42256b4",
          "sha256": "ee7980750b7a413fe2d92bf2bab86ea946e5d0b1f708dfa1f8e92a49eebb6bd0"
        },
        "downloads": -1,
        "filename": "pip-compile-multi-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "e0ef89a108ea484e5e4c5be7e42256b4",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 9694,
        "upload_time": "2018-01-12T03:50:39",
        "url": "https://files.pythonhosted.org/packages/0f/20/1f20b9676a59e9a1f78df2f317f21d41c68fdd509bdb3dc8a4c4d67e404b/pip-compile-multi-1.0.0.tar.gz"
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "md5": "4427e27d76f19fec40bce0308cadb703",
          "sha256": "256a0e100d80309f7da29e45af6669e90d6ca17d63bcce2b69cbb2c54ba624b2"
        },
        "downloads": -1,
        "filename": "pip-compile-multi-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "4427e27d76f19fec40bce0308cadb703",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 9773,
        "upload_time": "2018-01-12T04:14:36",
        "url": "https://files.pythonhosted.org/packages/c5/13/bb30f0be4749ec4a37beebb218c2de2380f27fd5efb2d221c85a2bc6c5ba/pip-compile-multi-1.0.1.tar.gz"
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "md5": "fe3edc4a99c48cdee5fc948ce1babdd1",
          "sha256": "3b0eb14296f6f58514ffd17a88be35e0f7a4fa68c679e689a695fcaa588b80c8"
        },
        "downloads": -1,
        "filename": "pip-compile-multi-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "fe3edc4a99c48cdee5fc948ce1babdd1",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 9767,
        "upload_time": "2018-01-12T04:20:54",
        "url": "https://files.pythonhosted.org/packages/67/91/71e356b9ba8390e9c10fd0ef49ce1f059ee75b0c3856e5d2832f2f0d0beb/pip-compile-multi-1.0.2.tar.gz"
      }
    ],
    "1.0.6": [
      {
        "comment_text": "",
        "digests": {
          "md5": "9905d8e46f47450c765fc655139abfd0",
          "sha256": "5f7bbe996a99fec6c12b349c9304980dd93f51fb575d36daf2c47ed5826d443d"
        },
        "downloads": -1,
        "filename": "pip_compile_multi-1.0.6-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9905d8e46f47450c765fc655139abfd0",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "size": 11971,
        "upload_time": "2018-01-12T05:02:16",
        "url": "https://files.pythonhosted.org/packages/00/22/85f26c41536d2d5126326e201df73f71d9a9664836cd95c62d581ef9ddff/pip_compile_multi-1.0.6-py2.py3-none-any.whl"
      },
      {
        "comment_text": "",
        "digests": {
          "md5": "1219d63954631bfb8b34bb14180f548f",
          "sha256": "5c9d3044dc824fc196ea79be9bcac2f9cb807fbfce0f87cc435cca28b9ec648c"
        },
        "downloads": -1,
        "filename": "pip-compile-multi-1.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "1219d63954631bfb8b34bb14180f548f",
        "packagetype": "sdist",
        "python_version": "source",
        "size": 10847,
        "upload_time": "2018-01-12T05:02:17",
        "url": "https://files.pythonhosted.org/packages/45/17/4890b78eeecf7d4527924c8be26c152cd5571c34a87f3f3a489a0a8475ce/pip-compile-multi-1.0.6.tar.gz"
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "md5": "9905d8e46f47450c765fc655139abfd0",
        "sha256": "5f7bbe996a99fec6c12b349c9304980dd93f51fb575d36daf2c47ed5826d443d"
      },
      "downloads": -1,
      "filename": "pip_compile_multi-1.0.6-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "9905d8e46f47450c765fc655139abfd0",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "size": 11971,
      "upload_time": "2018-01-12T05:02:16",
      "url": "https://files.pythonhosted.org/packages/00/22/85f26c41536d2d5126326e201df73f71d9a9664836cd95c62d581ef9ddff/pip_compile_multi-1.0.6-py2.py3-none-any.whl"
    },
    {
      "comment_text": "",
      "digests": {
        "md5": "1219d63954631bfb8b34bb14180f548f",
        "sha256": "5c9d3044dc824fc196ea79be9bcac2f9cb807fbfce0f87cc435cca28b9ec648c"
      },
      "downloads": -1,
      "filename": "pip-compile-multi-1.0.6.tar.gz",
      "has_sig": false,
      "md5_digest": "1219d63954631bfb8b34bb14180f548f",
      "packagetype": "sdist",
      "python_version": "source",
      "size": 10847,
      "upload_time": "2018-01-12T05:02:17",
      "url": "https://files.pythonhosted.org/packages/45/17/4890b78eeecf7d4527924c8be26c152cd5571c34a87f3f3a489a0a8475ce/pip-compile-multi-1.0.6.tar.gz"
    }
  ]
}